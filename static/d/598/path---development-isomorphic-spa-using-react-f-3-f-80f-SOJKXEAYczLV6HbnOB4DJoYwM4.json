{"data":{"site":{"siteMetadata":{"title":"pjb0811.github.io","author":"Jeongbin Park"}},"markdownRemark":{"id":"d7389c55-09c7-5505-9b44-1a409030b798","excerpt":"react 를 활용한 isomorphic SPA 개발에 대한 내용을 정리한 글입니다. 이 전에 개발했던 내용들을 다시 정리하는 목적도 있고 react…","html":"<blockquote>\n<p>react 를 활용한 isomorphic SPA 개발에 대한 내용을 정리한 글입니다. 이 전에 개발했던 내용들을 다시 정리하는 목적도 있고 react 및 그와 관련된 새로운 도구들을 활용하여 프로젝트를 시작했을때 “전에는 이렇게 작업했었지..” 하는 내용을 남기고자 합니다. 단순한 개발과정뿐만 아니라 isomorphic SPA 에 개념 또한 기존에 생각했던 내용을 정리해서 스스로 이해하려고 합니다. 의식의 흐름대로 정리하는 내용이라 부족한 부분도 있을꺼 같은데, 그건 그때 그때 정리하면서 업데이트하려고 합니다.</p>\n</blockquote>\n<h2>Isomorphic JavaScript</h2>\n<p>isomorphic 란 사전적 의미로 ”<em>같은 모양의, 동일 구조의, 등정형(等晶形)의</em>” 라는 뜻은 가진 단어라고 네이버 사전에 나와있네요. 제가 생각하는 <strong>Isomorphic JavaScript</strong> 은 일반적으로 라우팅 기능, 정적 렌더링과 같이 주로 서버 영역에서 담당했던 기능들을 클라이언트 영역에서 처리함으로서 양쪽의 환경에서 같은 코드를 활용 할 수 있도록 하는 것이라고 생각했습니다. 이렇게 함으로써 백엔드 환경에서 처리해야 할 불필요하거나 반복적인 작업을 최소화해주는 것이죠. 프론트엔드 영역에서 작업한 환경 그대로 서버에서 사용 가능하기 때문이죠. 그걸 처리하는 언어는 JavaScript 가 될 것이구요.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/06adaf33f1cbe18c06df1883317b3b57/ee4a1/isomorphic-javascript-applications.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 62.57142857142857%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFQABAQAAAAAAAAAAAAAAAAAAAAT/xAAWAQEBAQAAAAAAAAAAAAAAAAABAAL/2gAMAwEAAhADEAAAAa1rRGvF/8QAGxAAAgIDAQAAAAAAAAAAAAAAAAEDEQIEExL/2gAIAQEAAQUC4RnCNi142eFSxpn/xAAVEQEBAAAAAAAAAAAAAAAAAAAAEf/aAAgBAwEBPwGI/8QAFhEBAQEAAAAAAAAAAAAAAAAAABEB/9oACAECAQE/Aauv/8QAGRAAAgMBAAAAAAAAAAAAAAAAARAAESEx/9oACAEBAAY/AurDKGP/xAAcEAEAAQQDAAAAAAAAAAAAAAABABARITFRYaH/2gAIAQEAAT8hvihQ3DWfIfdE6mUGXEyl1p//2gAMAwEAAgADAAAAEFDv/8QAFhEBAQEAAAAAAAAAAAAAAAAAABFR/9oACAEDAQE/EIxD/8QAFxEBAAMAAAAAAAAAAAAAAAAAABFRYf/aAAgBAgEBPxCdtn//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMUFR8PH/2gAIAQEAAT8QEUGILHxzjkWhWo1kWVqv3eRMhip7vOFuyJsO/mAHBM//2Q=='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"isomorphic-javascript-applications\"\n        title=\"\"\n        src=\"/static/06adaf33f1cbe18c06df1883317b3b57/f8fb9/isomorphic-javascript-applications.jpg\"\n        srcset=\"/static/06adaf33f1cbe18c06df1883317b3b57/e8976/isomorphic-javascript-applications.jpg 148w,\n/static/06adaf33f1cbe18c06df1883317b3b57/63df2/isomorphic-javascript-applications.jpg 295w,\n/static/06adaf33f1cbe18c06df1883317b3b57/f8fb9/isomorphic-javascript-applications.jpg 590w,\n/static/06adaf33f1cbe18c06df1883317b3b57/85e3d/isomorphic-javascript-applications.jpg 885w,\n/static/06adaf33f1cbe18c06df1883317b3b57/ee4a1/isomorphic-javascript-applications.jpg 1050w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>”<em>이미 node.js 를 활용하면 충분히 JavaScript 만으로 동작이 가능한데?</em>“라고 말씀하실수도 있지만 앞서 말씀드렸듯이 백엔드 영역에서 기존에 처리했던 기능들을 프론트엔드에서 처리하는 것이죠. 단순히 서버 환경을 JavaScript 로 구성했다고 해서 isomorphic 해지지는 않는다고 생각합니다. 이 글에서는 백엔드 환경에서 처리했던 기능 중 하나인 라우팅 및 정적 렌더링의 기능을 프론트엔드 영역에서 처리하는 것을 중점으로 말씀드려고 합니다.</p>\n<h2>routing</h2>\n<p>제가 벡엔드 개발 경험이 많지 않아 전문적으로 상세하기 말씀드릴 수는 없지만 일반적으로 서버에서는 요청된 주소에 따라 각 주소에 맞는 페이지를 호출해주도록 하는 작업을 하죠. 이러한 작업은 node.js 환경에서 주로 사용하는 <code class=\"language-text\">express</code> 의 라우팅 기능을 통해 처리해주었죠. 서버에서의 라우팅 설정의 경우 페이지가 몇개 없으면 상관없지만 웹 앱 규모가 커지면 커질수록 관리하기 어려워지겠죠. 이러한 작업을 이제는 서버에서 처리하지 않으려고 합니다.</p>\n<p>그럼 이렇게 생각하시는 분들고 계실것 같습니다. ”<em>그럼 페이지 변경 시 마다 해당 페이지에 필요한 정적 리소스들은 어떻게 가져오지?</em>” 이 전에 서버 환경에서의 라우팅 설정은 새로운 페이지를 요청할 때 마다 새로고침한 후 헤당 페이지에 필요한 리소스들을 전달받아 이러한 작업들을 처리해주었습니다. 하지만 Isomorphic JavaScript 에서는 그렇게 하지 않을 것입니다. <code class=\"language-text\">Single Page Application(SPA)</code> 으로 개발하면 되니까요.</p>\n<h2>Single Page Applications(SPA)</h2>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ef262c3d5d26e4b947a71b3903d2719c/679ec/SPA.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 59.07692307692308%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACbElEQVQoz22TTW/TQBCG+1e5cOIAP4AfgIIvqOJSckIVBwqcKiHECVqpKKQJNI0bp228iT8S766966/YXjvDrAMNiI41WnstPzsz7+s9Kpw3q3B+QCO3y8SyG8VBNy+lzldZKV/Ha/o0DMNHlNJDzvkBZlcnY6yL+900TQ+SJD2UUj7Z0wFQQxj7EGUeeGICvpxAunFB1gvYQIT7/lUURZ/yPAdCCLiuA67jALFtwH1I0wR0CCG+tkCX3sLYGq69yFJBeqtcYapZMFSLcFSuUguWcnrGGH/HGAXPcwtCbDUnRDnOQtn2TOFzsVqtIAz5cQv06AyGo28qkPMNBjQKIJEpYHmNPpkmdo8z/gG2UcNfwRmDOI7bPWz/YwuMCwrEw+ok2dwuTDCvh2DZFzCeDhomXGAp6eG8/gHqg9vDKIUr06x9398BndUNnF+ctcBrMoafZg9Gk75eGxTqPyAOH4qi2AKDAMfg1WmS7IBBtMAZDhRF4HQ2grP+F/g+PIXe4OReoIYppe4qpDSoq7IEVH4LFNkSsNW2wpv5GC6t87btkdVHoHNvy3+CIXA8vqxRrF2Fc38KveGpCgTZ2I4F5vQHTG4u9NpwudwC6Q44OO+jfey7lrGyWqlqB+SJBzNnsg6kXVE5v0tUvRRrH1Um2jZHeZ4B2qMwOs+q90dvqyzLKhSjQjut0dwaePzb2DpKTIVXDHnNodhE7apDrgMLTftZ3yc4/KllgVa1qqr2fdNsp4BinbZAmQcvMTv4ixlRsjTQKgaXvsGk91xkwQsEPhYiesB5uI+KdvBDA/8QA6s19D36sIO5j4c+1LxfI61AJKiAAxEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"spa\"\n        title=\"\"\n        src=\"/static/ef262c3d5d26e4b947a71b3903d2719c/fb8a0/SPA.png\"\n        srcset=\"/static/ef262c3d5d26e4b947a71b3903d2719c/1a291/SPA.png 148w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/2bc4a/SPA.png 295w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/fb8a0/SPA.png 590w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/526de/SPA.png 885w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/fa2eb/SPA.png 1180w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/08f6a/SPA.png 1770w,\n/static/ef262c3d5d26e4b947a71b3903d2719c/679ec/SPA.png 2600w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><strong>SPA</strong> 라는 용어의 개념은 알고 계시는 분들이 많고 위에 언급한 내용도 있기 때문에 자세히 설명하지 않지 않으려 합니다. 처음 페이지 요청 시 필요한 정적 리소스를 가져와서 페이지 새로고침 없이 서비스를 이용할 수 있는 웹 어플리케이션을 말하지 않나 싶네요.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7469464a77e67d44694b2392ae4008fa/f42fc/routing.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 33.94428152492669%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsSAAALEgHS3X78AAABIElEQVQY012P2U7DMBBF/f+/ghAIURV45YmWpUh9qlpolcSJ661NYnu8JTiyQIA1c215zsy10fh3DcMwZdJxtIzpsjRVBTUevM/l3zDKXO6ZthhT5kv+stxcX+1ubw7386h1xmKcwKwowSGE4Xvk8OM/jhEATqeO0qDU1PT/kSMqi+JpsSBNFaHxGjtVBRAhRu+9k7KvSrbbBsG9hRiCMo53nrWWdb43ASmlul5/bFbb1QXezA7rS14tOReEkPPbK364+5zP4Hkp6prS4x6LdWEfV8X73hTMoOSffM4nYTUFdQRFLJyd9wZAcd7iqq1xT4jR2jkHLsjOytaIziptUf6hUtqAS6GNMwa0VsnnSFmdRIhmOlIpJaSa0RZMijTuC4Dyjck03ESkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"routing\"\n        title=\"\"\n        src=\"/static/7469464a77e67d44694b2392ae4008fa/fb8a0/routing.png\"\n        srcset=\"/static/7469464a77e67d44694b2392ae4008fa/1a291/routing.png 148w,\n/static/7469464a77e67d44694b2392ae4008fa/2bc4a/routing.png 295w,\n/static/7469464a77e67d44694b2392ae4008fa/fb8a0/routing.png 590w,\n/static/7469464a77e67d44694b2392ae4008fa/526de/routing.png 885w,\n/static/7469464a77e67d44694b2392ae4008fa/fa2eb/routing.png 1180w,\n/static/7469464a77e67d44694b2392ae4008fa/f42fc/routing.png 1364w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>하나의 화면이라면 페이지 주소가 하나일텐데, 보통 웹 서비스는 하나의 페이지로 이루어져 있지 않죠. 그리고 페이지를 이동할 경우 각각의 페이지에 맞는 여러가지 주소가 필요합니다. SPA 환경에서의 라우팅 설정은 앞서 말씀드린대로 처음 페이지 요청 시 렌더링에 필요한 정적 리소스를 모두 가져오게 됩니다. 그리고 페이지 이동 시 실제로 이동하는 것으로 보여지게 하는 것이죠. 미리 가져온 리소스와 JavaScript 에서 제공하는 <strong>History API</strong> 를 통해서요. 페이지 주소 변경 시 변경이 필요한 영역에 대한 DOM 구조를 변경시키는 것이죠. 그리고 저는 해당 작업을 클라이언트에서 쉽게 처리해줄 수 있는 라이브러리를 사용하려고 합니다.</p>\n<p>이미 많은 분들이 여러가지 JavaScript 프레임워크를 활용하여 SPA 개발을 하시는데, 저는 그나마 할 줄 아는데 react 뿐이여서 react 를 활용해서 SPA 개발을 시작했습니다.</p>\n<h2>Search Engine Optimization(SEO) &#x26; Server Side Rendering(SSR)</h2>\n<p>클라이언트에서 제공하는 라우팅 설정을 통해 SPA 를 개발하더라도 문제점이 있긴 합니다. 검색엔진 최적화를 위해서는 웹 페이지 요청 시 해당 페이지에 맞는 정적 렌더링 정보가 필요한데 기본적인 클라이언트 환경의 SPA 개발을 통해서는 정적 렌더링이 제공되지 않습니다. 정적 렌더링을 하려면 결국 <strong>서버 측 렌더링(SSR)</strong>이 필요합니다. 하지만 react 및 관련 서드파티 라이브러리를 통해 SPA 구조에서도 페이지 요청 시에 필요한 정적 렌더링 작업을 구현할 수 있습니다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/81b749c4fbacd719a4d532d632b5aed6/778cc/ssr.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 75.07836990595611%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAMEAQX/xAAWAQEBAQAAAAAAAAAAAAAAAAABAgP/2gAMAwEAAhADEAAAAefVi7wSUif/xAAaEAACAwEBAAAAAAAAAAAAAAACAwABExES/9oACAEBAAEFAoxJLGVacwsfR49//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAGxAAAQUBAQAAAAAAAAAAAAAAAAIREiJBARD/2gAIAQEABj8CJK4nzZlnbSjn/8QAHBAAAgICAwAAAAAAAAAAAAAAAREAIRBBMXGB/9oACAEBAAE/IQVoHuUcWqwLbj8cDFykSEVbn//aAAwDAQACAAMAAAAQaB//xAAWEQEBAQAAAAAAAAAAAAAAAAABACH/2gAIAQMBAT8Qwkv/xAAXEQEBAQEAAAAAAAAAAAAAAAABABFB/9oACAECAQE/EFeW3//EAB0QAQEAAgEFAAAAAAAAAAAAAAERADFhIUFRkeH/2gAIAQEAAT8QjfWXBjTGxamLVYHBhuZvqXg7zxiS9oDcmLkd1O6/M//Z'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"ssr\"\n        title=\"\"\n        src=\"/static/81b749c4fbacd719a4d532d632b5aed6/f8fb9/ssr.jpg\"\n        srcset=\"/static/81b749c4fbacd719a4d532d632b5aed6/e8976/ssr.jpg 148w,\n/static/81b749c4fbacd719a4d532d632b5aed6/63df2/ssr.jpg 295w,\n/static/81b749c4fbacd719a4d532d632b5aed6/f8fb9/ssr.jpg 590w,\n/static/81b749c4fbacd719a4d532d632b5aed6/778cc/ssr.jpg 638w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>앞서 말씀드린대로 최초 페이지 로딩시에는 서버 렌더링을 통해 <strong>검색엔진 최적화(SEO)</strong>에 필요한 정적 데이터를 제공해주는 것이죠. 이 후 페이지 요청 시에는 클라이언트 렌더링을 통한 페이지 전환을 이루게 되구요. 이 전 웹 환경에서는 페이지 요청 시 서버 측에서 일일히 페이지 로딩을 통해 정적 렌더링 정보를 제공했지만 사용자 입장에서는 불필요한 동작이기도 했죠.</p>\n<p>이제 사용자는 페이지 요청 시 일일히 새로고침을 당할 필요가 없습니다. 최초 한번의 페이지 새로고침만 필요할 뿐이죠. 사실 사용자는 SSR 에 크게 관심이 없을지도 모릅니다. 사용자가 서버로부터 각 페이지 필요한 데이터를 매번 확인하지 않죠. 각 페이지에 대한 데이터들은 검색엔진에서만 관심이 있을 뿐입니다. 다만 SSR 이 필요하지 않은 경우라면 굳이 설정하지 않아도 됩니다.</p>\n<h2>create-react-app(CRA) 활용하기</h2>\n<p>처음 react 로 개발 시작할때 기본 설정 및 빌드 환경 설정 등 직접 세팅하는게 여간 귀찮았는데, CRA 을 쓴 이후부터는 거의 대부분의 (사실상 전체) 프로젝트를 시작할때 CRA 를 쓰고 있습니다. CRA 를 쓰지 않고 개발환경을 설정할때는 그것대로 공부가 되긴 하는데 그러한 내용은 기회가 되면 정리하려고 합니다.</p>\n<p>우선 CRA 를 사용하기 해당 라이브러리를 전역으로 설치해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g create-react-app</code></pre></div>\n<p>그리고 프로젝트를 생성할 경로로 이동하여 이런식으로 프로젝트명을 입력해준 후 CRA 프로젝트를 만들어줍니다. 사실 SPA 를 개발하기 위한 기본환경 구성은 CRA 를 통한 프로젝트 생성 시 거의 준비가 된다고 생각합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> create-react-app my-project</code></pre></div>\n<p>그리고 개발 서버를 실행해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yarn start</code></pre></div>\n<p>이제 사용하는 브라우저를 통해 기본적으로 설정되어 있는 웹 앱 구조가 마련되는 것을 보실 수 있으실 겁니다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ec69c602de09cc51bc47a80f86d68b78/ad168/app-main.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.31693989071039%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAAC/ElEQVQ4y62U2U8TURSHiTExbgSI+CIIRNvOTId2uk1LWSvgFo0hvhO2sgxi4EFN9IFEEjC++qCJiX+ET/KkRkshVpCggpqAtFAIQqlIS7GdHs+909aKhiXxJl/O7Vl+59zpncnIwDUy+Ewz+PypbfDFa8vo2Lg49emLODn1WZx4PykODXvEIbdHdI+8Fd3DCiNvxigezzvRPTph8YyOWd0jHl1bR88+ord/5uOHlwvLXpiZ8/8MBFbl9VBIjkQ25Q3Ev7gke+cWZN/8YopZn58y4/XLvllfdN6/AtNf56YlqT2bCB4IrCwPAa5QKCwHVoOw9G0Z1n6sw0YkAqFwmBLeiAA2or7g9zVYCazCwvIKRIOBeCxKaiM+Z3N9LhWsb2hxOduvQ5OzM9bSdi3e3Io4OylNLVK8iexbce+UqKVxtM62rrhT6o5JXT1YK3lPqxhF8EQB4zp5iof8IjaWV8QSi3BpNh02BcnNK2Rk4kfrPZKZpQgyvMnFCzbgdGIMgT8otijoklbciqzV24AtNnuzc3IVQTVrcLEY1GhNMYY3AwH3FEZnRUTqY4USxZfISeTJLDZSc0ZvVvaxfwvSIpKk1oG++gqUNHRDacdtEGrrqI/Ekg13JZgUZQ12sLfehJq+R1Db/xjKpDugtVaBhjPsbUKayBqAt9dAeVcv1N57gqIPoerWfdA5LoGa0dMpdyWYekaJI5vr6qHyxgBU9z4A89VGbCSki+3+GWICqEixsRT48vOgLTsHnNUBKo0eVBhLNt5WEBPohCTBaj8DJmsliLZKEAQrmIwlYDKXgtlWBWKJg16ZhOg2gmlHNljKQG+0gxmFLY6LIFZfBhPuBVMpNqqgTXcU3Hpk9IMG76G27CzwFReAwXuoYoSdj6xiDa8SHTeRKAGTFchvRojiPxvVcMaUP5lHaogwCs78npAzjPN45zichtP/DXm1CBxlSxxreOUNCmbl5B6n38O8AlVjfqF6ALmL9O0RUtOPdB88dPhwxtHMnIz/uX4Bup1hEAf/m38AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"main\"\n        title=\"\"\n        src=\"/static/ec69c602de09cc51bc47a80f86d68b78/fb8a0/app-main.png\"\n        srcset=\"/static/ec69c602de09cc51bc47a80f86d68b78/1a291/app-main.png 148w,\n/static/ec69c602de09cc51bc47a80f86d68b78/2bc4a/app-main.png 295w,\n/static/ec69c602de09cc51bc47a80f86d68b78/fb8a0/app-main.png 590w,\n/static/ec69c602de09cc51bc47a80f86d68b78/526de/app-main.png 885w,\n/static/ec69c602de09cc51bc47a80f86d68b78/fa2eb/app-main.png 1180w,\n/static/ec69c602de09cc51bc47a80f86d68b78/08f6a/app-main.png 1770w,\n/static/ec69c602de09cc51bc47a80f86d68b78/ad168/app-main.png 1830w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>이렣게 프로젝트 생성만으로 SPA 가 되는것은 아니지만 클라이언트 SPA 구현은 <code class=\"language-text\">react-router</code>, <code class=\"language-text\">react-helmet</code> 등 관련 서드파티 라이브러리를 통해 쉽게 개발할 수 있다고 생각합니다. 그리고 그렇게 만들어진 SPA 를 서버에서 실행할수 있게 설정해줌으로써 Isomorphic SPA 가 되는것이죠. 그럼 이제 라우팅 설정과 SSR 설정이 필요한데 저는 SSR 설정부터 진행하도록 하겠습니다.</p>\n<h3>SSR 설정</h3>\n<p>앞서 말씀드린대로 저는 SSR 설정부터 잔행하도록 하겠습니다. SSR 설정은 개인적으로 제일 작업하기 까다로운 부분이기도 하며, 나중에 작업하려면 클라이언트 영역의 구조를 수정해야 하는 경우도 생기기도 해서요. 그래서 미리 준비를 해놓으려고 합니다.</p>\n<p>우선 앞서 실행한 프로젝트의 페이지 소스 보기를 통해 정적 렌더링이 이루어지는 확인해 보겠습니다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cf40ed593e05f9581121547d9f1825a8/3fe95/app-main-src.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 94.35396308360478%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAADVklEQVQ4y62Uz3JbNRTGM0NnWLFkAS/Ajh2ePkRnWNEn4Al4gTYtdmbKUOiWZ8gKVrR27DCkgNPEIaUDXSTxde34+kpXutKVdP9J93Akh5JOE1Zo5vORz/X9nSN9kjc2cIyf/PjR49EPN79/PPxkb2/cGT876hxMnncODo87/d29zv6zCc6PMH/YOX7+IuR/HR92xvuTzm+TPzoHvx/fHO8ffvzw0XfveN6N6K8/f1qSGRy9eNmcnM5cNF+66WzhZq/O3Uk0c5mQKOEYz5zS2q1IGp4vlombz+bN+TKF0+n85NtvHr7vge9SmvwCOAS+yDgHkqZwvoxhlRDIMgF5rqBuGmisDbGqGyjLCirbQMHStjItMJ5HXz/48sMAnL+aPXVlAyoTTVVUbets6wfWwE+L0Ya5/7qOb8j6ZozR0zt37n4QgDMEQgWQz4kVhEISl6BkAY3OISUWSOKgNA5ah28j29l19Goa59ZAE21ubl4C4uCrleWUwCJWwBgHmS4gjgUslgKENJDrAkRuUBqkKkCbyisAtdbRvc17a2AURQFIBHaoJfA8g0wxILh/qcQuJQdhMpQAieIaixUCitqAqTS26LCgiLa6W28Cs4xZlnFYYXdKZbCiAubYYSZKXJ5FU5qgGlU1NTjcA9zkt5c8nU4DkGluaU4hFjGk2CHNCcYERYFK3FuR+FVAmqfA8LmHoy1XAM/WwJjHNmYxnKdLoIICQcgqS16DiCRYBGE5C8u3Lhh8BTBCYA2gSG6LwqCjJbg6/PjK4U/UJb0NPJuePfV16DSxIpWg0UWlVFBZlt7BoGvA1wC9KTS1nEswykBRFlDWZViW8z56tWv53PrcwzXAszUQj4NNJJqQs7BXVKYgtAiSRkJe5K/nwZDLQH0FkGmGLpOW5quWKdJyw1qqaEswh64GcZ22plbY3z/X8cKUAoF3/wX+7G8kTVmdpMLi2UNlNiHSZjyzPOVWSmlzJfCcGlSB3xtbFq1tSn8g8dpm8vR+9/7F1ZtFE1+lMSh0WyuAqryoD5fifwwtFeludcO/zY3t7e3Pd0Y7Xw2Gg+5w1O/t7j7pjVB+jrneYDTo9XdQg0FvOMT8sN8b4bMdjJjr4rsP+oP+F7c/u/3exq1bn278n+NvHCLPF67WDewAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"main source\"\n        title=\"\"\n        src=\"/static/cf40ed593e05f9581121547d9f1825a8/fb8a0/app-main-src.png\"\n        srcset=\"/static/cf40ed593e05f9581121547d9f1825a8/1a291/app-main-src.png 148w,\n/static/cf40ed593e05f9581121547d9f1825a8/2bc4a/app-main-src.png 295w,\n/static/cf40ed593e05f9581121547d9f1825a8/fb8a0/app-main-src.png 590w,\n/static/cf40ed593e05f9581121547d9f1825a8/526de/app-main-src.png 885w,\n/static/cf40ed593e05f9581121547d9f1825a8/fa2eb/app-main-src.png 1180w,\n/static/cf40ed593e05f9581121547d9f1825a8/08f6a/app-main-src.png 1770w,\n/static/cf40ed593e05f9581121547d9f1825a8/3fe95/app-main-src.png 1842w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>보시는 바와 같이 “root” id 속성을 갖는 div 요소 내에 아무것도 없는 것을 확인하실 수 있습니다. 프론트엔드 영역에서 페이지 호출 후 DOM 렌더링 통해 화면에 보여줄 컨텐츠를 그려주기 때문이죠.</p>\n<p>그럼 우선 SSR 에 필요한 서버를 구축하도록 하겠습니다. 저는 서버 구성에 필요한 패키지들을 설치하도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yarn global add cross-env nodemon\n\nyarn add --dev express</code></pre></div>\n<p>설치한 패키지들을 간략히 설명드리자면 <code class=\"language-text\">cross-env</code> 는 실행환경의 운영체제에 상관없이 node.js 정보를 설정해줄 수 있는 패키지입니다. <code class=\"language-text\">nodemon</code>은 서버 코드가 수정될 경우 서버를 재시작할 수 있도록 도와주는 패키지이구요. 그리고 <code class=\"language-text\">express</code>를 서버를 구성하기 위한 라이브러리입니다.</p>\n<p>설치 완료 후 서버 실행에 필요한 명령어를 <code class=\"language-text\">package.json</code>에 추가하도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts start\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts build\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts test\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"eject\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"react-scripts eject\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"serve\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"cross-env PORT=9000 nodemon server/index.js\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 서버 구성에 필요한 파일을 <code class=\"language-text\">server/index.js</code> 경로에 추가하도록 하겠습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> express <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'express'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">express</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token constant\">PORT</span> <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">PORT</span> <span class=\"token operator\">||</span> <span class=\"token number\">3000</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  res<span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">'hello!'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token constant\">PORT</span><span class=\"token punctuation\">,</span> console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token string\">`App listening on port </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token constant\">PORT</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">!`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>이제 서버를 실행하면 다음과 같은 화면을 보실수 있으실겁니다.</p>","frontmatter":{"title":"React를 활용한 isomorphic SPA 개발하기","date":"2018.11.16","tags":["react"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":1.580135440180587,"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECBP/EABYBAQEBAAAAAAAAAAAAAAAAAAMAAf/aAAwDAQACEAMQAAABxypYUBZ//8QAGRABAAIDAAAAAAAAAAAAAAAAAQATAhAR/9oACAEBAAEFAq5WxONmQa//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/AT//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAaEAACAgMAAAAAAAAAAAAAAAAQEQABEjGh/9oACAEBAAY/At8CiytH/8QAGhAAAgIDAAAAAAAAAAAAAAAAAREAIRBRYf/aAAgBAQABPyG62gIBYuFIUCRwPP8A/9oADAMBAAIAAwAAABAzL//EABURAQEAAAAAAAAAAAAAAAAAABAh/9oACAEDAQE/EIf/xAAVEQEBAAAAAAAAAAAAAAAAAAAQIf/aAAgBAgEBPxCn/8QAGxAAAwEBAAMAAAAAAAAAAAAAAAERITFRgaH/2gAIAQEAAT8Qi9posqKrz7McovHnwdwqhFQ8bwtHrP/Z","sizes":"(max-width: 700px) 100vw, 700px","src":"/static/71e188348c381c5531478b2764300b7b/37a2b/spa.jpeg","srcSet":"/static/71e188348c381c5531478b2764300b7b/df05e/spa.jpeg 300w,\n/static/71e188348c381c5531478b2764300b7b/5ba19/spa.jpeg 600w,\n/static/71e188348c381c5531478b2764300b7b/37a2b/spa.jpeg 700w"}}}}}},"pageContext":{"slug":"/development-isomorphic-spa-using-react/","previous":{"id":"c0949b5e-17ee-5f64-a021-bb347da92cd2","excerpt":"react-motion 을 활용하기 ㅁㅇㄹㅇㅁㄹ","frontmatter":{"title":"react-motion을 활용한 라이브러리 개발","date":"2018.11.04","tags":["react","css"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":1.9047619047619047,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABv0lEQVQoz32Ryy8DURTGb1VCgpWQWLERYcXKSsSC2FhKiIWtjT/ARsTChh3x1qqqVrwS1agSQoog2nmV6WjL9BXTdpiZZqbUo86wkFBuTu7iu+d3z/nOQWiR/CdyTGr8FjVf4n+wkURzGNJhGiPxla3eBgLNupEe/xPWqCSRZyK7T0Jdx6EiMwXZWhB1WMUG3XsRbd4LIAOO/uoWzePj3sQKK4zSiYuE0rp/C2Q/zp3HlUGCc8bkLmcQZS9rIMo36O2oVGBUm6y3+xzR5HFM1vkfSleu0MRli8NvuRNQ9rIGvM7m2wpLUD8XnE+5hkhOeXtv2fGjGRd8XW1lNkNSFjjXRAFTYqag57K16wKLp899fy0+gf+wnG50+LUmsu3gbtzL/4TVeeqx/EWywxkMyWl7JAmGxfTrQuBxkuFtEUl5fbOGRfIxdRqX0e85Ne0G4GHMmzDfCjCbZVboPGRBr7IyaMY9zfADBLceFEeu4uiH1Ror4+KVBkcAfFau0VzqRed7KFyiLnklk8kMe+LFFg8tPtmjkkaPfcPgBJbRcxYZpmIw4TzYrZG4kZ7bj9ha203m8/iSz7CLVVZQDc9hH+Moiw+QqmLTAAAAAElFTkSuQmCC","sizes":"(max-width: 800px) 100vw, 800px","src":"/static/59ac4691bf4c0a7068c82c86dd411f6e/f2687/react-motion.png","srcSet":"/static/59ac4691bf4c0a7068c82c86dd411f6e/72352/react-motion.png 200w,\n/static/59ac4691bf4c0a7068c82c86dd411f6e/34595/react-motion.png 400w,\n/static/59ac4691bf4c0a7068c82c86dd411f6e/f2687/react-motion.png 800w,\n/static/59ac4691bf4c0a7068c82c86dd411f6e/1e56d/react-motion.png 1200w"}}}},"fields":{"slug":"/development-libraries-using-react-motion/"}},"next":null}}