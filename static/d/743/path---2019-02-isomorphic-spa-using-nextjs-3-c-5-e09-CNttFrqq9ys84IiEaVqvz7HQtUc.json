{"data":{"site":{"siteMetadata":{"title":"pjb0811.github.io","author":"Jeongbin Park","description":"프론트엔드 웹 개발 기술 블로그","siteUrl":"https://pjb0811.github.io"}},"markdownRemark":{"id":"57e6e0e3-6d6c-56f8-9768-86dc3e8774db","excerpt":"이번 글은 React 기반의 프레임워크인  의 사용법을 간단히 정리해보려 한다.  의 간단한 환경설정부터 라우팅 처리, 전역 데이터 설정 및 서버 사이드 렌더링에 필요한 설정 등에 대한 내용을 정리하고자 한다. next.js…","html":"<blockquote>\n<p>이번 글은 React 기반의 프레임워크인 <code class=\"language-text\">Next.js</code>의 사용법을 간단히 정리해보려 한다. <code class=\"language-text\">Next.js</code>의 간단한 환경설정부터 라우팅 처리, 전역 데이터 설정 및 서버 사이드 렌더링에 필요한 설정 등에 대한 내용을 정리하고자 한다.</p>\n</blockquote>\n<h2>next.js</h2>\n<p><code class=\"language-text\">Next.js</code>는 보다 쉽게 서버 측 렌더링을 가능하게 해주는 매우 인기있는 <code class=\"language-text\">Node.js</code> 프레임 워크이며 여러가지 놀라운 기능들을 제공한다. 특히 서버 렌더링의 경우 이 전에 <code class=\"language-text\">create-react-app</code> 환경에서 작업했듯이 실제 구현하기 위해서는 다소 복잡한 과정을 거치게 되는데 <code class=\"language-text\">Next.js</code> 를 활용하게 되면 보다 쉽게 서버 렌더링 환경을 구성할 수 있다. 이번 글에서는 내가 <code class=\"language-text\">Next.js</code>를 활용하면서 이해했던 내용들에 대해 간략히 정리하려고 한다. 그외에도 여러가지 많은 기능을 제공하는데 관련된 내용은 <a href=\"https://nextjs.org/docs\"><code class=\"language-text\">Docs</code></a>를 참고하면 될 것 같다(사실 직접 사용하면서 Docs의 내용의 많이 참고했고 이 글 역시 Docs에 정리된 내용과 별반 다르지 않다).</p>\n<h2>Setup</h2>\n<p>기본 설정의 경우 react로 구성된 프로젝트에 <code class=\"language-text\">next</code> 프레임워크를 패키지로 설치해주면 되며 명령어 설정 및 해당 프레임워크를 맞춰 디렉토리 구조와 환경설정 파일을 구성해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">yarn add next</code></pre></div>\n<p>설치 후 내장된 라우팅 기능을 활용하기 위해 관련 컴포넌트는 <code class=\"language-text\">pages</code> 폴더에 설정이 필요하며 <code class=\"language-text\">webpack</code> 관련 설정은 루트 영역에 <code class=\"language-text\">next.config.js</code> 파일을 생성 후 설정해주면 된다.</p>\n<p>이처럼 복잡한 과정은 아니지만 <code class=\"language-text\">Next.js</code>의 사용법에 따라 기본적으로 필요한 설정들이 있는데, 나의 경우 <code class=\"language-text\">CRA</code>처럼 이러한 과정들을 쉽게 설정해주는 <code class=\"language-text\">create-next-app</code>이라는 보일러플레이트를 사용하여 개발을 진행했다. 해당 보일러플레이트를 사용하지 않아도 되지만 프로젝트 시작 시 필요한 기본설정을 제공하기 때문에 사용법을 간단히 정리했다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g create-next-app</code></pre></div>\n<p>해당 라이브러리의 경우 터미널 환경에서 명령어 실행을 위해 전역으로 설치해주면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">create-next-app cna-sample</code></pre></div>\n<p>설치가 완료되면 프로젝트를 생성할 경로로 이동한 후 위와 같이 <code class=\"language-text\">create-next-app</code>이라는 명령어를 통해 프로젝트를 생성하면 된다. 위와 같이 명령어를 실행하면 해당 경로에 <code class=\"language-text\">cna-sample</code>이라는 프로젝트 디렉토리가 생성되는 것을 확인할 수 있다. 생성된 프로젝트는 <code class=\"language-text\">Next.js</code> 환경에 맞게 디렉토리 구조 및 기타 설정에 필요한 파일들이 기본적으로 구성된다.</p>\n<ul>\n<li><code class=\"language-text\">package.json</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">// ...\n<span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next start\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n// ...</code></pre></div>\n<p><code class=\"language-text\">package.json</code> 파일에 기본적으로 설정되는 프로젝트 명령어이며 각 명령어 순으로 개발 서버 실행, 빌드, 운영서버 실행 시 사용된다. 각 명령어는 기호에 맞게 수정해주면 된다.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-7cf00.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 81.48148148148148%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABJ0AAASdAHeZh94AAAB5klEQVQ4y5VUyXLiQAzt//8RvoADJwo4caCK+2QykyF4jAGvvdrufpGagbCYpEZVr0S3W9LThijLCkpp9N5HdF2Pvvc45CV+/t7izzbD2/uOkOJt8z2EtQatM9Ba4nDMsctS7A971E0FqSQaWUMyKKjS5inkPwhnFDpbwZoampm6Gp2TsLqiQAqtpbMtiXmLEAI8ZTGEEE4QtgN0i4sEPBd2OAS2kjbAtAHCx6iBX1898k+NH52dhH2wG3HP4H/l3kbcR9NaI8syNE0Tf0spo2YopVAURdR1XcMY81AKcR8pTVOMRiNMJhMsl0ssFgtMp1Os12usVivMZjOMx2PM53MkSfLAUgzVxFqLqqoiCylVZOKci8yYKd+zHmqUiD0KV6Bz27bRKTtxro3nvu+j5ruTbm/sLgxBHaUeXRC8v0ohXOC9vxmTEz7tzvMoSt3jb021I2QNsetPRsxgLwOSimbMneuMGFAZ/gbs6D3bFvozqNgXEi/vOeGI121Oq6bgKF1Oa5NVeNkWSPcldTen2jUxdakMfiU5XpMCPzZH7HIJQzWNNTSaCi1pb+sSqqnJkbvUytJ+G9VA0S6fx6TrOlpT2n26U7TvDP4v4PccTNzP8rlOTP+r9bu9w+0cDq3S0Eg8+3YtHxIu3pwkXmHPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"next-start\"\n        title=\"\"\n        src=\"/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-fb8a0.png\"\n        srcset=\"/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-1a291.png 148w,\n/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-2bc4a.png 295w,\n/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-fb8a0.png 590w,\n/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-526de.png 885w,\n/static/next-start-91bc6333bf1da3f59aa27f92eebd8272-7cf00.png 945w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p>개발 서버를 실행하면 기본적으로 제공된 컴포넌트로 구성된 화면을 확인할 수 있다. 그럼 이제 <code class=\"language-text\">Next.js</code>에서 제공하는 몇가지 기능들을 정리해보자.</p>\n<h2>Code Splitiing</h2>\n<p>코드 스플리팅의 경우 <code class=\"language-text\">import</code>로 선언된 모든 컴포넌트가 번들로 제공되며 별다른 설정을 추가하지 않아도 페이지 요청 시 불필요한 코드를 로드하지 않는다.</p>\n<h2>CSS</h2>\n<p>CSS의 경우 <code class=\"language-text\">styled-jsx</code>를 기본 번들로 제공하며 렌더링 시 <code class=\"language-text\">style</code> 요소를 통해 스타일 설정이 가능하다. 다만 <code class=\"language-text\">styled-components</code>, <code class=\"language-text\">material-ui</code>, <code class=\"language-text\">ant-design</code>과 같은 다른 CSS 프레임워크를 사용하는 경우 각 페이지를 감싸는 <code class=\"language-text\">/pages/_document.js</code> 컴포넌트의 재정의를 통한 스타일 설정이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">HelloWorld</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      Hello world\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>scoped<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>style jsx<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`\n        p {\n          color: blue;\n        }\n        div {\n          background: red;\n        }\n        @media (max-width: 600px) {\n          div {\n            background: blue;\n          }\n        }\n      `</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>style global jsx<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`\n        body {\n          background: black;\n        }\n      `</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HelloWorld</code></pre></div>\n<h2>Static Resource</h2>\n<p>정적 리소스의 경우 프로젝트 루트 경로에 <code class=\"language-text\">static</code> 폴더를 통해 접근해야 한다. 그리고 코드에서는 <code class=\"language-text\">/static</code> 경로 내 파일을 참조해야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">MyImage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>img src<span class=\"token operator\">=</span><span class=\"token string\">\"/static/my-image.png\"</span> alt<span class=\"token operator\">=</span><span class=\"token string\">\"my image\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyImage</code></pre></div>\n<h2>Head</h2>\n<p><code class=\"language-text\">&lt;head&gt;</code> 요소에 필요한 태그를 추가하는 경우 <code class=\"language-text\">next/head</code> 컴포넌트를 통한 설정이 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Head <span class=\"token keyword\">from</span> <span class=\"token string\">'next/head'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">IndexPage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>title<span class=\"token operator\">></span>My page title<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>title<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>meta name<span class=\"token operator\">=</span><span class=\"token string\">\"viewport\"</span> content<span class=\"token operator\">=</span><span class=\"token string\">\"initial-scale=1.0, width=device-width\"</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Hello world<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> IndexPage</code></pre></div>\n<h2>Fetching Data</h2>\n<p>페이지 요청 시 초기 데이터가 필요한 경우 <code class=\"language-text\">getInitialProps</code>라는 비동기 정적 메소드를 사용해야 한다. 또한 초기 페이지 요청 시 <code class=\"language-text\">getInitialProps</code>는 서버에서만 실행되며 <code class=\"language-text\">Link</code> 컴포넌트를 통해 다른 페이지로 이동하거나 라우팅 API를 사용할 때는 클라이언트에서 실행된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">HelloUA</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">React<span class=\"token punctuation\">.</span>Component</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> req <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> userAgent <span class=\"token operator\">=</span> req <span class=\"token operator\">?</span> req<span class=\"token punctuation\">.</span>headers<span class=\"token punctuation\">[</span><span class=\"token string\">'user-agent'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">:</span> navigator<span class=\"token punctuation\">.</span>userAgent\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> userAgent <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>Hello World <span class=\"token punctuation\">{</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props<span class=\"token punctuation\">.</span>userAgent<span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> HelloUA</code></pre></div>\n<h2>Custom Server</h2>\n<p>서버 실행의 경우 기본적으로 <code class=\"language-text\">Next.js</code>에서 제공하는 서버를 사용할 수 있지만 사용자에 따라 추가적인 서버 설정이 필요한 경우 직접 서버 환경을 구성할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"dev\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"node server.js\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"build\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"next build\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"start\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"NODE_ENV=production node server.js\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>직접 정의한 사용자 정의 서버를 사용하는 경우 스크립트 명령어를 수정하도록 하자.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'http'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> parse <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'url'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> next <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> dev <span class=\"token operator\">=</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">NODE_ENV</span> <span class=\"token operator\">!==</span> <span class=\"token string\">'production'</span>\n<span class=\"token keyword\">const</span> app <span class=\"token operator\">=</span> <span class=\"token function\">next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> dev <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> handle <span class=\"token operator\">=</span> app<span class=\"token punctuation\">.</span><span class=\"token function\">getRequestHandler</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\napp<span class=\"token punctuation\">.</span><span class=\"token function\">prepare</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">createServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// Be sure to pass `true` as the second argument to `url.parse`.</span>\n    <span class=\"token comment\">// This tells it to parse the query portion of the URL.</span>\n    <span class=\"token keyword\">const</span> parsedUrl <span class=\"token operator\">=</span> <span class=\"token function\">parse</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">.</span>url<span class=\"token punctuation\">,</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> pathname<span class=\"token punctuation\">,</span> query <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> parsedUrl\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">'/a'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      app<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> <span class=\"token string\">'/b'</span><span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>pathname <span class=\"token operator\">===</span> <span class=\"token string\">'/b'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      app<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> <span class=\"token string\">'/a'</span><span class=\"token punctuation\">,</span> query<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">handle</span><span class=\"token punctuation\">(</span>req<span class=\"token punctuation\">,</span> res<span class=\"token punctuation\">,</span> parsedUrl<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token number\">3000</span><span class=\"token punctuation\">,</span> err <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token keyword\">throw</span> err\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">'> Ready on http://localhost:3000'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>사용자 정의 서버를 구성한 코드이며 직접 구현한 서버를 통해 필요한 기능을 추가하거나 라우팅 정보를 재정의할 수 있다.</p>\n<h2>Routing</h2>\n<p><code class=\"language-text\">Next.js</code> 환경에서는 기본적으로 <code class=\"language-text\">pages</code>에 구현된 컴포넌트 파일명에 따라 라우팅 주소가 설정된다. <code class=\"language-text\">/</code> 경로는 <code class=\"language-text\">pages/index.js</code> 파일로 연결되며 그 외에 페이지 파일명에 따라 접근 가능한 페이지 주소가 설정된다. 추가된 파일명에 맞는 페이지는 <code class=\"language-text\">&lt;Link&gt;</code> 컴포넌트를 통해 접근할 수 있다.</p>\n<ul>\n<li><code class=\"language-text\">pages/index.js</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Link <span class=\"token keyword\">from</span> <span class=\"token string\">'next/link'</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">Home</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n      Click<span class=\"token punctuation\">{</span><span class=\"token string\">' '</span><span class=\"token punctuation\">}</span>\n      <span class=\"token operator\">&lt;</span>Link href<span class=\"token operator\">=</span><span class=\"token string\">\"/about\"</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>a<span class=\"token operator\">></span>here<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>a<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Link<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token string\">' '</span><span class=\"token punctuation\">}</span>\n      to read more\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Home</code></pre></div>\n<ul>\n<li><code class=\"language-text\">pages/about.js</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">About</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>p<span class=\"token operator\">></span>Welcome to About<span class=\"token operator\">!</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>p<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> About</code></pre></div>\n<h2>Custom <App></h2>\n<p><code class=\"language-text\">Next.js</code>는 내부적으로 <code class=\"language-text\">next/app</code> 컴포넌트를 통해 페이지를 초기하며 필요한 경우 직접 <code class=\"language-text\">next/app</code> 컴포넌트 설정을 통해 페이지 정보를 제어 할 수 있다. 재정의 하는 경우 <code class=\"language-text\">/pages/_app.js</code> 파일을 통해 <code class=\"language-text\">App</code>을 상속받는 컴포넌트의 재정의가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> App<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Container <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next/app'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyApp</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">App</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> ctx <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> pageProps <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>Component<span class=\"token punctuation\">.</span>getInitialProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      pageProps <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Component<span class=\"token punctuation\">.</span><span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> pageProps <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> Component<span class=\"token punctuation\">,</span> pageProps <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>props\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>Container<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Component <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span>pageProps<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Container<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyApp</code></pre></div>\n<h2>Custom <Document></h2>\n<p><code class=\"language-text\">pages</code> 경로의 설정된 페이지의 기본적인 마크업 구조는 <code class=\"language-text\">next/document</code> 컴포넌트의 통해 정의된다. 해당 컴포넌트의 경우 서버 측에서만 렌더링되며 초기 서버 측 렌더링에 대한 마크업을 변경하는 데 사용된다. 주로 앞서 언급한 <code class=\"language-text\">styled-components</code>와 같은 <code class=\"language-text\">css-in-js</code> 라이브러리의 서버 측 렌더링을 구현하는 경우 사용되며 <code class=\"language-text\">styled-jsx</code>의 경우 기본적으로 서버 렌더링 설정에 포함되어 있다. 기본 마크업을 재정의하려면 <code class=\"language-text\">/pages/\\_document.js</code> 파일을 통해 <code class=\"language-text\">Document</code> 클래스를 재정의 할 수있는 컴포넌트가 필요하다.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> Document<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> Head<span class=\"token punctuation\">,</span> Main<span class=\"token punctuation\">,</span> NextScript <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'next/document'</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">MyDocument</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">Document</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">static</span> <span class=\"token keyword\">async</span> <span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> initialProps <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> Document<span class=\"token punctuation\">.</span><span class=\"token function\">getInitialProps</span><span class=\"token punctuation\">(</span>ctx<span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>initialProps <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n      <span class=\"token operator\">&lt;</span>html<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>Head<span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>style<span class=\"token operator\">></span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token string\">`body { margin: 0 } /* custom! */`</span></span><span class=\"token punctuation\">}</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>style<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>Head<span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span>body className<span class=\"token operator\">=</span><span class=\"token string\">\"custom_class\"</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>Main <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n          <span class=\"token operator\">&lt;</span>NextScript <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>body<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>html<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> MyDocument</code></pre></div>\n<h2>글을 마치며</h2>\n<p>지금까지 <code class=\"language-text\">Next.js</code>의 간단한 사용법을 정리했는데 사실 지금까지 정리한 내용들은 <code class=\"language-text\">Next.js</code>에서 제공하는 <code class=\"language-text\">Docs</code>에서 제공하는 내용들을 일부 요약해서 정리한 내용이며 그 외에도 웹 검색을 통해 해당 프레임워크에 대한 사용법들을 쉅게 확인할 수 있다. 그래서인지 이번에 정리한 글 내용이 다른 포스트에 비해 다소 부족하다고 생각하지만 그래도 내 스스로 요긴하게 사용하고 있는 프레임워크의 사용법을 간단히라도 정리하고 싶었다. 매번 글을 쓰며 다짐하는 부분이지만 해당 프레임워크를 사용하면서 새롭게 배워가는 내용들이 생긴다면 글 내용을 업데이트 할 수 있도록 하자.</p>","frontmatter":{"title":"Next.js를 활용한 SPA 개발","date":"2019.03.01","tags":["react","javascript"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":3,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsSAAALEgHS3X78AAAAsklEQVQoz5WRQQqDMBBFf6xt6CaxrlwoahFDFi51oYLHymU8XI7SGbFdiBYy8AhMmMdnBsMw4Ejf9xjHEVmWIU1TaK2hlELbtpimafs/m2NOmyzrug7Hcs7BWrtJg4Q8tK4roiiKhRB34kE+JaUULK7rOkyYJMk3VE6YnTeJpfceTdOECTkBFyW80fMinnva2BgTvsNlWX7SY83zfCm7FHICXnxZltuF+dJFUaCqqr8y5gP2X0dUOS4MNAAAAABJRU5ErkJggg==","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/nextjs-4f30173effb21b5c989f7c791072a48b-178b9.png","srcSet":"/static/nextjs-4f30173effb21b5c989f7c791072a48b-cab61.png 300w,\n/static/nextjs-4f30173effb21b5c989f7c791072a48b-db2d3.png 600w,\n/static/nextjs-4f30173effb21b5c989f7c791072a48b-178b9.png 1200w,\n/static/nextjs-4f30173effb21b5c989f7c791072a48b-45d04.png 1800w"}}}}}},"pageContext":{"slug":"/2019/02/isomorphic-spa-using-nextjs/","previous":{"id":"249fd00c-c2ac-5d2d-8b61-25b676db4259","excerpt":"\r\n> 이 글은 react 환경에서 `drag & drop` 효과를 쉽게 사용할 수 있도록 도와주는 `react-dnd`라는 라이브러리를 사용하면서 배웠던 내용들을 정리했다. 이번 글 역시 스스로의 학습 내용을 정리하는 글이기 때문에 편한 말투로 작성했다.","frontmatter":{"title":"react-dnd를 활용한 라이브러리 개발","date":"2019.02.25","tags":["react","javascript"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":2.5,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAAsSAAALEgHS3X78AAAA6ElEQVQoz41SywrCMBDsZwvexbN/IIIInsSTggfxhXrwUEQt9UEpalWqYrBp0mRsrZVaqjiwbJjMZnfCKnhBSvnOwg+ZEkk+0kfnAApiiF+kiZNIu1OShcyTsK7eh8hhEp4I+UB3cwRsIj6aRvXvCYUICePEka2eka9fUGhcUeoRVIcEquEiU7FR7NyQq11Q7pPvluOEaXPMdwwDnaI1ddCeOxivKHSLoatRTDYumuodsy0DoSJ9wrjdxZ5htHah+VnzH9Et/uRUk2F55Nj4DvQDx3BNn42TUyq/Pvgf/LQsv6zLv+sT4AHdbG4AYlhQSgAAAABJRU5ErkJggg==","sizes":"(max-width: 750px) 100vw, 750px","src":"/static/react-dnd-39ddc62a87130b27fb68de17d8cd9cb2-6794e.png","srcSet":"/static/react-dnd-39ddc62a87130b27fb68de17d8cd9cb2-3bed0.png 200w,\n/static/react-dnd-39ddc62a87130b27fb68de17d8cd9cb2-575ff.png 400w,\n/static/react-dnd-39ddc62a87130b27fb68de17d8cd9cb2-6794e.png 750w"}}}},"fields":{"slug":"/2019/02/library-using-react-dnd/"}},"next":{"id":"8924c9b8-aafc-5932-b926-cd718a04e821","excerpt":"업데이트 중…","frontmatter":{"title":"Gatsby.js 를 활용한 블로그 개발","date":"2019.03.01","tags":["react","javascript"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":3.8,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABKklEQVQY02N4/+rLmoknZpXvXth44M7FF//////39x+Q/PXr19+/f//9+wchQeL//v0CAyDjz58/QHGGNROOT87fXu61pC12XW3gitdPPwLVHT92vKioaP369f/B4MOHD9evXwcyNm3atGPHDiADqBNIMnQmbVjQsD9SaUKF95LmqDWnd90Fiubm5N2/f3/WrFlTp07t7e2tra1NS0ubOXNmT09PYWFhX1/fihUrli9fzjCzfPeRjTfm1uzrSdu8ovvozbNPgZo7Ojq6u7sTEhKSkpKqqqqysrKABhUXF4eGhpaWlra1tSUmJra2tjLcPPN0ccuhxS0H51Tt3Tr3HMSd375927x586NHj758+XLo0KGnT5++fv0a6PIHDx4cO3bs5cuXQP1AWQDMzduEUENzHQAAAABJRU5ErkJggg==","sizes":"(max-width: 437px) 100vw, 437px","src":"/static/gatsbyjs-be2199a026e39ba85d6bdd6c43643812-a6a79.png","srcSet":"/static/gatsbyjs-be2199a026e39ba85d6bdd6c43643812-324cd.png 200w,\n/static/gatsbyjs-be2199a026e39ba85d6bdd6c43643812-628ed.png 400w,\n/static/gatsbyjs-be2199a026e39ba85d6bdd6c43643812-a6a79.png 437w"}}}},"fields":{"slug":"/2019/03/blog-site-using-gatsbyjs/"}}}}