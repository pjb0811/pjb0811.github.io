{"data":{"site":{"siteMetadata":{"title":"pjb0811.github.io","author":"Jeongbin Park"}},"markdownRemark":{"id":"ff6d5f54-7feb-596a-b35b-710bed2cd47a","excerpt":"react 를 활용한 isomorphic SPA 개발에 대한 내용을 정리한 글이다. 이 번 글은 코드 스플리팅에 관한 내용이다. 이 번 포스팅을 포함한 SPA…","html":"<blockquote>\n<p>react 를 활용한 isomorphic SPA 개발에 대한 내용을 정리한 글이다. 이 번 글은 코드 스플리팅에 관한 내용이다. 이 번 포스팅을 포함한 SPA와 관련된 글 내용은 정리하는데 오래 걸리지 않는 내용이지만 다른 프로젝트에 대한 내용을 준비 중이라 글 작성이 늦어지는 것 같다. 최대한 빨리 정리해보도록 하자. 앞서 작성한 글대로 의식의 흐름대로 정리하는 내용이라 부족한 부분도 있을꺼 같은데, 그건 그때 그때 정리하면서 업데이트하려고 한다. 잘 모르는 부분은 모른다고 남겨놓자. 다른 사람에게 설명하기 보다는 스스로의 학습 내용을 정리하는 글이기 때문에 편한 말투로 작성했다.</p>\n</blockquote>\n<p>우선 코드 스플리팅에 대해 간단히 정리하고 넘어가도록 하자. 앞서 설명한 대로 SPA 환경에서 페이지 호출 시 해당 앱과 관련된 모든 리소스를 호출하게 된다. 이는 페이지 호출 시 해당 라우팅과 관련없는 페이지의 리소스도 요청한다는 의미가 된다. 앱 규모가 작으면 상관없겠지만 규모가 큰 앱의 경우 불필요한 리소스 요청으로 인해 페이지 로딩 속도에 영향을 줄 수 있다.</p>\n<p>코드 스플리팅은 페이지 요청 시 사용자가 요청한 라우팅 페이지와 관련된 코드만 분리해서 요청하도록 하는 방법으로 이해하면 될 것 같다.</p>\n<p>해당 기법의 경우 특정 라이브러리의 도움 없이 구현할 수 있지만 라이브러리를 활용하도록 하자. 기본 문법을 활용한 코드 스플리팅 방법은 충분히 학습한 뒤 다시 정리해보도록 하자. React 개발 환경에서 코드 스플리팅을 지원해주는 여러가지 라이브러리가 있는데 그 중에서 <code class=\"language-text\">react-loadable</code>을 활용하도록 하자.</p>\n<h2>react-loadable</h2>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/7c2a1/react-loadable.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 25.674157303370787%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQY0y2JvU7CUACF+wgOjs46OEFMdJCFEXVx0ZgQF2N8BycWn4BXQOtPFJRQMVaEGKUDRFMsLVBvyaV/oT8UuIAt9Spg8uXkfOcQ/XMwymvoDvZL7WHZGJwBRAL0pqOK6cL+8EEege7gRfOedRd0UUEdpCHiTFdwUAIQyhwpLpDiQQ4c5mEgJe4/gVBaibNKrGQnGl+7j/W1pBym1HWqFkqp4SyYPwUxpndSqW3fE3Iw2dyglB1aimTg4hWM0spx0SrA3lFRjeaamxl+mZRXb8HKNR+8bAVuwNKFGslqW9nWHk3wDacu2OyrxnNWre6I76bUQnL7W6x2BEZnmTYvdaucLXB2U0Xch8F92kLZYBm9yujE+AeP8QR/mn/qTZktHv5/Z+pibHnY8XHHn/RfeADxWR3MQRYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <img\n        class=\"gatsby-resp-image-image\"\n        style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n        alt=\"react-loadable\"\n        title=\"\"\n        src=\"/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/fb8a0/react-loadable.png\"\n        srcset=\"/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/1a291/react-loadable.png 148w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/2bc4a/react-loadable.png 295w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/fb8a0/react-loadable.png 590w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/526de/react-loadable.png 885w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/fa2eb/react-loadable.png 1180w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/08f6a/react-loadable.png 1770w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/7c2a1/react-loadable.png 1780w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n      />\n    </span>\n  </span>\n  \n  </a>\n    </p>\n<p><code class=\"language-text\">react-loadable</code> 은 앞서 설명한 코드 스플리팅 구현을 쉽게 도와주는 라이브러리라 보면 된다. 컴포넌트 및 라우터 기반의 스플리팅을 제공하며 클라이언트 및 서버 사이드 렌더링 환경에 대한 구현 기능도 제공한다. 우선 클라이언트 영역 내 코드 스플리팅 방법에 대해 알아보자.</p>\n<h2>Client</h2>\n<ul>\n<li><code class=\"language-text\">src/lib/routes.js</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> loadData <span class=\"token keyword\">from</span> <span class=\"token string\">'./loadData'</span>\n<span class=\"token keyword\">import</span> Loadable <span class=\"token keyword\">from</span> <span class=\"token string\">'react-loadable'</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">loading</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>loading<span class=\"token operator\">...</span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> Routes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span>\n    exact<span class=\"token punctuation\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/Home'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/about'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/About'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/posts/:id'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/Posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    loadData<span class=\"token punctuation\">:</span> <span class=\"token keyword\">async</span> path <span class=\"token operator\">=></span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadData</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/posts'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/Posts'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    loadData<span class=\"token punctuation\">:</span> <span class=\"token keyword\">async</span> path <span class=\"token operator\">=></span> <span class=\"token keyword\">await</span> <span class=\"token function\">loadData</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'/post'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/Redirect'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">{</span>\n    path<span class=\"token punctuation\">:</span> <span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>\n    component<span class=\"token punctuation\">:</span> <span class=\"token function\">Loadable</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      loader<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">import</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../components/NotFound'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n      loading<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">]</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> Routes</code></pre></div>\n<p>우선 라우팅 컴포넌트를 호출하는 코드를 수정하자. 기존에는 기본적인 import 문법으로 컴포넌트를 호출하여 <code class=\"language-text\">react-router-dom</code> 에서 제공하는 <code class=\"language-text\">Route</code> 컴포넌트의 매개변수로 라우팅 컴포넌트를 넘겨주었다.</p>\n<h3>부록 - 나중에 정리할 일</h3>\n<ul>\n<li><code class=\"language-text\">src/index.js</code></li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">'react'</span>\n<span class=\"token keyword\">import</span> ReactDOM <span class=\"token keyword\">from</span> <span class=\"token string\">'react-dom'</span>\n<span class=\"token keyword\">import</span> App <span class=\"token keyword\">from</span> <span class=\"token string\">'./App'</span>\n<span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> serviceWorker <span class=\"token keyword\">from</span> <span class=\"token string\">'./serviceWorker'</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> BrowserRouter <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'react-router-dom'</span>\n<span class=\"token keyword\">import</span> Loadable <span class=\"token keyword\">from</span> <span class=\"token string\">'react-loadable'</span>\n\nLoadable<span class=\"token punctuation\">.</span><span class=\"token function\">preloadReady</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n    <span class=\"token operator\">&lt;</span>BrowserRouter<span class=\"token operator\">></span>\n      <span class=\"token operator\">&lt;</span>App <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n    <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>BrowserRouter<span class=\"token operator\">></span><span class=\"token punctuation\">,</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">'root'</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>우선 <code class=\"language-text\">src/index.js</code></p>\n<h2>Server</h2>\n<h3>부록 - 나중에 정리할 일</h3>\n<h2>다음 과제</h2>\n<p>지금까지 Isomorphic SPA 의 코트 스플리팅 구현에 대한 내용을 정리했다. 다음은 비동기 데이터에 대한 SSR설정에 대해 정리해 보도록 하자.</p>","frontmatter":{"title":"React를 활용한 isomorphic SPA 개발하기 - 3부","date":"2018.12.24","tags":["react"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":3.894967177242888,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsSAAALEgHS3X78AAABMUlEQVQY0y2JvU7CUACF+wgOjs46OEFMdJCFEXVx0ZgQF2N8BycWn4BXQOtPFJRQMVaEGKUDRFMsLVBvyaV/oT8UuIAt9Spg8uXkfOcQ/XMwymvoDvZL7WHZGJwBRAL0pqOK6cL+8EEege7gRfOedRd0UUEdpCHiTFdwUAIQyhwpLpDiQQ4c5mEgJe4/gVBaibNKrGQnGl+7j/W1pBym1HWqFkqp4SyYPwUxpndSqW3fE3Iw2dyglB1aimTg4hWM0spx0SrA3lFRjeaamxl+mZRXb8HKNR+8bAVuwNKFGslqW9nWHk3wDacu2OyrxnNWre6I76bUQnL7W6x2BEZnmTYvdaucLXB2U0Xch8F92kLZYBm9yujE+AeP8QR/mn/qTZktHv5/Z+pibHnY8XHHn/RfeADxWR3MQRYAAAAASUVORK5CYII=","sizes":"(max-width: 1200px) 100vw, 1200px","src":"/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/7b279/react-loadable.png","srcSet":"/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/e6e4c/react-loadable.png 300w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/15ea4/react-loadable.png 600w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/7b279/react-loadable.png 1200w,\n/static/8fd75a9f9cfdfeeaa6be9a38e0299da3/a6488/react-loadable.png 1780w"}}}}}},"pageContext":{"slug":"/development-isomorphic-spa-using-react-part3/","previous":{"id":"19caa125-e0d0-5c52-b47e-b063e0dde8cc","excerpt":"제목 2","frontmatter":{"title":"TypeScript를 활용한 JQuery 프로젝트 리팩토링","date":"2018.12.19","tags":["javascript","typescript"],"translation":null,"mainImage":{"childImageSharp":{"sizes":{"aspectRatio":4.644444444444445,"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsSAAALEgHS3X78AAAAu0lEQVQI12P4Dwf//nx/Nefr08bvz5t/vJ7w+/dnoNiWa29spl7wnnvZavL5DVfeAEX+/PsH18EA0QfC/35/epD19rrj80su725GnHv6Yv+DHz37HzLk7JVsOs6Qt2/ioSdAZb//YtP89+/vXy8KLh9wntBuc2xL+NwLj+LXPm3adV+57dSck88z195adu4VTpuBmn++qNiw2GP2RI8V82P+//8AFJx05Ilg7dGklTfz1t8+dBck8hdJMwCufMceRlNXxQAAAABJRU5ErkJggg==","sizes":"(max-width: 627px) 100vw, 627px","src":"/static/7efe42f8fd8abc98b571ad70a37be453/cbe3e/refactoring-ts.png","srcSet":"/static/7efe42f8fd8abc98b571ad70a37be453/652e8/refactoring-ts.png 200w,\n/static/7efe42f8fd8abc98b571ad70a37be453/d1d17/refactoring-ts.png 400w,\n/static/7efe42f8fd8abc98b571ad70a37be453/cbe3e/refactoring-ts.png 627w"}}}},"fields":{"slug":"/jquery-project-refactoring-using-typescript/"}},"next":null}}