<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/1.efbeb78c60f66d75c538.css">@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/static/roboto-latin-100-987b84570ea69ee660455b8d5e91f5f1.woff2) format("woff2"),url(/static/roboto-latin-100-e9dbbe8a693dd275c16d32feb101f1c1.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/static/roboto-latin-100italic-6232f43d15b0e7a0bf0fe82e295bdd06.woff2) format("woff2"),url(/static/roboto-latin-100italic-d704bb3d579b7d5e40880c75705c8a71.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/static/roboto-latin-300-55536c8e9e9a532651e3cf374f290ea3.woff2) format("woff2"),url(/static/roboto-latin-300-a1471d1d6431c893582a5f6a250db3f9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/static/roboto-latin-300italic-d69924b98acd849cdeba9fbff3f88ea6.woff2) format("woff2"),url(/static/roboto-latin-300italic-210a7c781f5a354a0e4985656ab456d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/static/roboto-latin-400-5d4aeb4e5f5ef754e307d7ffaef688bd.woff2) format("woff2"),url(/static/roboto-latin-400-bafb105baeb22d965c70fe52ba6b49d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/static/roboto-latin-400italic-d8bcbe724fd6f4ba44d0ee6a2675890f.woff2) format("woff2"),url(/static/roboto-latin-400italic-9680d5a0c32d2fd084e07bbc4c8b2923.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/static/roboto-latin-500-285467176f7fe6bb6a9c6873b3dad2cc.woff2) format("woff2"),url(/static/roboto-latin-500-de8b7431b74642e830af4d4f4b513ec9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/static/roboto-latin-500italic-510dec37fa69fba39593e01a469ee018.woff2) format("woff2"),url(/static/roboto-latin-500italic-ffcc050b2d92d4b14a4fcb527ee0bcc8.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/static/roboto-latin-700-037d830416495def72b7881024c14b7b.woff2) format("woff2"),url(/static/roboto-latin-700-cf6613d1adf490972c557a8e318e0868.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/static/roboto-latin-700italic-010c1aeee3c6d1cbb1d5761d80353823.woff2) format("woff2"),url(/static/roboto-latin-700italic-846d1890aee87fde5d8ced8eba360c3a.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/static/roboto-latin-900-19b7a0adfdd4f808b53af7e2ce2ad4e5.woff2) format("woff2"),url(/static/roboto-latin-900-8c2ade503b34e31430d6c98aa29a52a3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/static/roboto-latin-900italic-7b770d6c53423deb1a8e49d3c9175184.woff2) format("woff2"),url(/static/roboto-latin-900italic-bc833e725c137257c2c42a789845d82f.woff) format("woff")}</style><style data-href="/12.ad898c44026f788f7d59.css">@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format("woff")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .octicon{display:inline-block;vertical-align:text-top;fill:currentColor}.markdown-body a{background-color:transparent}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:content-box;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px;font-weight:600}.markdown-body h2{font-size:24px;font-weight:600}.markdown-body h3{font-size:20px;font-weight:600}.markdown-body h4{font-size:16px;font-weight:600}.markdown-body h5{font-size:14px;font-weight:600}.markdown-body h6{font-size:12px;font-weight:600}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body .octicon{vertical-align:text-bottom}.markdown-body .pl-0{padding-left:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd{font-size:11px;border:1px solid #c6cbd1;border-bottom-color:#959da5;box-shadow:inset 0 -1px 0 #959da5}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-bottom-color:#c6cbd1;border-radius:3px;box-shadow:inset 0 -1px 0 #c6cbd1}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body hr{border-bottom-color:#eee}</style><meta name="generator" content="Gatsby 2.0.22"/><style type="text/css" id="jss-server-side">.jss29 {
  background-color: #fff;
}
.jss30 {
  border-radius: 4px;
}
.jss31 {
  box-shadow: none;
}
.jss32 {
  box-shadow: 0px 1px 3px 0px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 2px 1px -1px rgba(0,0,0,0.12);
}
.jss33 {
  box-shadow: 0px 1px 5px 0px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 3px 1px -2px rgba(0,0,0,0.12);
}
.jss34 {
  box-shadow: 0px 1px 8px 0px rgba(0,0,0,0.2),0px 3px 4px 0px rgba(0,0,0,0.14),0px 3px 3px -2px rgba(0,0,0,0.12);
}
.jss35 {
  box-shadow: 0px 2px 4px -1px rgba(0,0,0,0.2),0px 4px 5px 0px rgba(0,0,0,0.14),0px 1px 10px 0px rgba(0,0,0,0.12);
}
.jss36 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 1px 14px 0px rgba(0,0,0,0.12);
}
.jss37 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
}
.jss38 {
  box-shadow: 0px 4px 5px -2px rgba(0,0,0,0.2),0px 7px 10px 1px rgba(0,0,0,0.14),0px 2px 16px 1px rgba(0,0,0,0.12);
}
.jss39 {
  box-shadow: 0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);
}
.jss40 {
  box-shadow: 0px 5px 6px -3px rgba(0,0,0,0.2),0px 9px 12px 1px rgba(0,0,0,0.14),0px 3px 16px 2px rgba(0,0,0,0.12);
}
.jss41 {
  box-shadow: 0px 6px 6px -3px rgba(0,0,0,0.2),0px 10px 14px 1px rgba(0,0,0,0.14),0px 4px 18px 3px rgba(0,0,0,0.12);
}
.jss42 {
  box-shadow: 0px 6px 7px -4px rgba(0,0,0,0.2),0px 11px 15px 1px rgba(0,0,0,0.14),0px 4px 20px 3px rgba(0,0,0,0.12);
}
.jss43 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);
}
.jss44 {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 13px 19px 2px rgba(0,0,0,0.14),0px 5px 24px 4px rgba(0,0,0,0.12);
}
.jss45 {
  box-shadow: 0px 7px 9px -4px rgba(0,0,0,0.2),0px 14px 21px 2px rgba(0,0,0,0.14),0px 5px 26px 4px rgba(0,0,0,0.12);
}
.jss46 {
  box-shadow: 0px 8px 9px -5px rgba(0,0,0,0.2),0px 15px 22px 2px rgba(0,0,0,0.14),0px 6px 28px 5px rgba(0,0,0,0.12);
}
.jss47 {
  box-shadow: 0px 8px 10px -5px rgba(0,0,0,0.2),0px 16px 24px 2px rgba(0,0,0,0.14),0px 6px 30px 5px rgba(0,0,0,0.12);
}
.jss48 {
  box-shadow: 0px 8px 11px -5px rgba(0,0,0,0.2),0px 17px 26px 2px rgba(0,0,0,0.14),0px 6px 32px 5px rgba(0,0,0,0.12);
}
.jss49 {
  box-shadow: 0px 9px 11px -5px rgba(0,0,0,0.2),0px 18px 28px 2px rgba(0,0,0,0.14),0px 7px 34px 6px rgba(0,0,0,0.12);
}
.jss50 {
  box-shadow: 0px 9px 12px -6px rgba(0,0,0,0.2),0px 19px 29px 2px rgba(0,0,0,0.14),0px 7px 36px 6px rgba(0,0,0,0.12);
}
.jss51 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 20px 31px 3px rgba(0,0,0,0.14),0px 8px 38px 7px rgba(0,0,0,0.12);
}
.jss52 {
  box-shadow: 0px 10px 13px -6px rgba(0,0,0,0.2),0px 21px 33px 3px rgba(0,0,0,0.14),0px 8px 40px 7px rgba(0,0,0,0.12);
}
.jss53 {
  box-shadow: 0px 10px 14px -6px rgba(0,0,0,0.2),0px 22px 35px 3px rgba(0,0,0,0.14),0px 8px 42px 7px rgba(0,0,0,0.12);
}
.jss54 {
  box-shadow: 0px 11px 14px -7px rgba(0,0,0,0.2),0px 23px 36px 3px rgba(0,0,0,0.14),0px 9px 44px 8px rgba(0,0,0,0.12);
}
.jss55 {
  box-shadow: 0px 11px 15px -7px rgba(0,0,0,0.2),0px 24px 38px 3px rgba(0,0,0,0.14),0px 9px 46px 8px rgba(0,0,0,0.12);
}
.jss20 {
  width: 100%;
  display: flex;
  z-index: 1100;
  box-sizing: border-box;
  flex-shrink: 0;
  flex-direction: column;
}
.jss21 {
  top: 0;
  left: auto;
  right: 0;
  position: fixed;
}
.jss22 {
  top: 0;
  left: auto;
  right: 0;
  position: absolute;
}
.jss23 {
  top: 0;
  left: auto;
  right: 0;
  position: sticky;
}
.jss24 {
  position: static;
}
.jss25 {
  position: relative;
}
.jss26 {
  color: rgba(0, 0, 0, 0.87);
  background-color: #f5f5f5;
}
.jss27 {
  color: #fff;
  background-color: #448AFF;
}
.jss28 {
  color: rgba(0, 0, 0, 0.87);
  background-color: #EEEEEE;
}
.jss56 {
  display: flex;
  position: relative;
  align-items: center;
}
.jss57 {
  padding-left: 16px;
  padding-right: 16px;
}
@media (min-width:600px) {
  .jss57 {
    padding-left: 24px;
    padding-right: 24px;
  }
}
.jss58 {
  min-height: 56px;
}
@media (min-width:0px) and (orientation: landscape) {
  .jss58 {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .jss58 {
    min-height: 64px;
  }
}
.jss59 {
  min-height: 48px;
}
.jss78 {
  margin: 0;
  display: block;
}
.jss79 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 7rem;
  font-weight: 300;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.14286em;
  margin-left: -.04em;
  letter-spacing: -.04em;
}
.jss80 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 3.5rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.30357em;
  margin-left: -.02em;
  letter-spacing: -.02em;
}
.jss81 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 2.8125rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.13333em;
  margin-left: -.02em;
}
.jss82 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 2.125rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.20588em;
}
.jss83 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.5rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.35417em;
}
.jss84 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.3125rem;
  font-weight: 500;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.16667em;
}
.jss85 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.5em;
}
.jss86 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.01071em;
}
.jss87 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.00938em;
}
.jss88 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.66;
  letter-spacing: 0.03333em;
}
.jss89 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.75;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
}
.jss90 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 6rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1;
  letter-spacing: -0.01562em;
}
.jss91 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 3.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1;
  letter-spacing: -0.00833em;
}
.jss92 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 3rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.04;
  letter-spacing: 0em;
}
.jss93 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 2.125rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.17;
  letter-spacing: 0.00735em;
}
.jss94 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.5rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.33;
  letter-spacing: 0em;
}
.jss95 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.25rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.6;
  letter-spacing: 0.0075em;
}
.jss96 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.75;
  letter-spacing: 0.00938em;
}
.jss97 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.57;
  letter-spacing: 0.00714em;
}
.jss98 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 2.66;
  letter-spacing: 0.08333em;
  text-transform: uppercase;
}
.jss99 {
  width: 1px;
  height: 1px;
  position: absolute;
  overflow: hidden;
}
.jss100 {
  text-align: left;
}
.jss101 {
  text-align: center;
}
.jss102 {
  text-align: right;
}
.jss103 {
  text-align: justify;
}
.jss104 {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.jss105 {
  margin-bottom: 0.35em;
}
.jss106 {
  margin-bottom: 16px;
}
.jss107 {
  color: inherit;
}
.jss108 {
  color: #448AFF;
}
.jss109 {
  color: #EEEEEE;
}
.jss110 {
  color: rgba(0, 0, 0, 0.87);
}
.jss111 {
  color: rgba(0, 0, 0, 0.54);
}
.jss112 {
  color: #f44336;
}
.jss113 {
  display: inline;
}
.jss66 {
  color: inherit;
  cursor: pointer;
  margin: 0;
  border: 0;
  display: inline-flex;
  padding: 0;
  outline: none;
  position: relative;
  user-select: none;
  align-items: center;
  border-radius: 0;
  vertical-align: middle;
  justify-content: center;
  -moz-appearance: none;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.jss66::-moz-focus-inner {
  border-style: none;
}
.jss66.jss67 {
  cursor: default;
  pointer-events: none;
}
.jss60 {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.5rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.jss60:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.jss60.jss64 {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss60:hover {
    background-color: transparent;
  }
}
.jss60:hover.jss64 {
  background-color: transparent;
}
.jss61 {
  color: inherit;
}
.jss62 {
  color: #448AFF;
}
.jss62:hover {
  background-color: rgba(68, 138, 255, 0.08);
}
@media (hover: none) {
  .jss62:hover {
    background-color: transparent;
  }
}
.jss63 {
  color: #EEEEEE;
}
.jss63:hover {
  background-color: rgba(238, 238, 238, 0.08);
}
@media (hover: none) {
  .jss63:hover {
    background-color: transparent;
  }
}
.jss65 {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
.jss69 {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 24px;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  user-select: none;
  flex-shrink: 0;
}
.jss70 {
  color: #448AFF;
}
.jss71 {
  color: #EEEEEE;
}
.jss72 {
  color: rgba(0, 0, 0, 0.54);
}
.jss73 {
  color: #f44336;
}
.jss74 {
  color: rgba(0, 0, 0, 0.26);
}
.jss75 {
  font-size: inherit;
}
.jss76 {
  font-size: 20px;
}
.jss77 {
  font-size: 35px;
}
.jss140 {
  width: 1em;
  height: 1em;
  overflow: hidden;
  font-size: 24px;
  user-select: none;
  flex-shrink: 0;
}
.jss141 {
  color: #448AFF;
}
.jss142 {
  color: #EEEEEE;
}
.jss143 {
  color: rgba(0, 0, 0, 0.54);
}
.jss144 {
  color: #f44336;
}
.jss145 {
  color: rgba(0, 0, 0, 0.26);
}
.jss146 {
  font-size: inherit;
}
.jss147 {
  font-size: 20px;
}
.jss148 {
  font-size: 36px;
}
.jss139 {
  display: none;
}
@media (min-width:600px) {
  .jss139 {
    display: flex;
  }
}
.jss118 {
  color: rgba(0, 0, 0, 0.87);
  cursor: text;
  display: inline-flex;
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.1875em;
  align-items: center;
}
.jss118.jss121 {
  color: rgba(0, 0, 0, 0.38);
  cursor: default;
}
.jss126 {
  padding: 6px 0 7px;
}
.jss127 {
  width: 100%;
}
.jss128 {
  font: inherit;
  width: 100%;
  color: currentColor;
  border: 0;
  margin: 0;
  padding: 6px 0 7px;
  display: block;
  min-width: 0;
  box-sizing: content-box;
  background: none;
  -webkit-tap-highlight-color: transparent;
}
.jss128::-webkit-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.jss128::-moz-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.jss128:-ms-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.jss128::-ms-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.jss128:focus {
  outline: 0;
}
.jss128:invalid {
  box-shadow: none;
}
.jss128::-webkit-search-decoration {
  -webkit-appearance: none;
}
.jss128.jss121 {
  opacity: 1;
}
label[data-shrink=false] + .jss119 .jss128::-webkit-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .jss119 .jss128::-moz-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .jss119 .jss128:-ms-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .jss119 .jss128::-ms-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .jss119 .jss128:focus::-webkit-input-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .jss119 .jss128:focus::-moz-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .jss119 .jss128:focus:-ms-input-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .jss119 .jss128:focus::-ms-input-placeholder {
  opacity: 0.42;
}
.jss129 {
  padding-top: 3px;
}
.jss130 {
  resize: none;
  padding: 0;
}
.jss131 {
  height: 1.1875em;
}
.jss132 {
  -moz-appearance: textfield;
  -webkit-appearance: textfield;
}
.jss135 {
  width: 100%;
  margin-top: 10px;
}
.jss136 {
  overflow: auto;
  max-height: 300px;
}
.jss137 {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
}
.jss138 {
  margin: 4px;
}
.jss114 {
  width: 100%;
  position: relative;
  margin-left: 0;
  margin-right: 16px;
  border-radius: 4px;
  background-color: rgba(255, 255, 255, 0.15);
}
.jss114:hover {
  background-color: rgba(255, 255, 255, 0.25);
}
@media (min-width:600px) {
  .jss114 {
    width: auto;
    margin-left: 24px;
  }
}
.jss115 {
  width: 72px;
  height: 100%;
  display: flex;
  position: absolute;
  align-items: center;
  pointer-events: none;
  justify-content: center;
}
.jss116 {
  color: inherit;
  width: 100%;
}
.jss117 {
  width: 100%;
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  padding-top: 8px;
  padding-left: 80px;
  padding-right: 8px;
  padding-bottom: 8px;
}
@media (min-width:960px) {
  .jss117 {
    width: 200px;
  }
}
.jss18 {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1300;
  position: fixed;
}
.jss19 {
  visibility: hidden;
}
.jss7 {
  flex: 0 0 auto;
}
.jss8 {
  top: 0;
  flex: 1 0 auto;
  height: 100%;
  display: flex;
  z-index: 1200;
  outline: none;
  position: fixed;
  overflow-y: auto;
  flex-direction: column;
  -webkit-overflow-scrolling: touch;
}
.jss9 {
  left: 0;
  right: auto;
}
.jss10 {
  left: auto;
  right: 0;
}
.jss11 {
  top: 0;
  left: 0;
  right: 0;
  bottom: auto;
  height: auto;
  max-height: 100%;
}
.jss12 {
  top: auto;
  left: 0;
  right: 0;
  bottom: 0;
  height: auto;
  max-height: 100%;
}
.jss13 {
  border-right: 1px solid rgba(0, 0, 0, 0.12);
}
.jss14 {
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
}
.jss15 {
  border-left: 1px solid rgba(0, 0, 0, 0.12);
}
.jss16 {
  border-top: 1px solid rgba(0, 0, 0, 0.12);
}
.jss1 {
  width: 100%;
}
.jss2 {
  flex-grow: 1;
}
.jss3 {
  min-height: 56px;
  margin-bottom: 10px;
}
@media (min-width:0px) and (orientation: landscape) {
  .jss3 {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .jss3 {
    min-height: 64px;
  }
}
.jss4 {
  margin-left: -12px;
  margin-right: 20px;
}
.jss5 {
  display: none;
}
@media (min-width:600px) {
  .jss5 {
    display: block;
  }
}
.jss157 {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  box-sizing: border-box;
}
.jss158 {
  margin: 0;
  box-sizing: border-box;
}
.jss159 {
  min-width: 0;
}
.jss160 {
  flex-direction: column;
}
.jss161 {
  flex-direction: column-reverse;
}
.jss162 {
  flex-direction: row-reverse;
}
.jss163 {
  flex-wrap: nowrap;
}
.jss164 {
  flex-wrap: wrap-reverse;
}
.jss165 {
  align-items: center;
}
.jss166 {
  align-items: flex-start;
}
.jss167 {
  align-items: flex-end;
}
.jss168 {
  align-items: baseline;
}
.jss169 {
  align-content: center;
}
.jss170 {
  align-content: flex-start;
}
.jss171 {
  align-content: flex-end;
}
.jss172 {
  align-content: space-between;
}
.jss173 {
  align-content: space-around;
}
.jss174 {
  justify-content: center;
}
.jss175 {
  justify-content: flex-end;
}
.jss176 {
  justify-content: space-between;
}
.jss177 {
  justify-content: space-around;
}
.jss178 {
  justify-content: space-evenly;
}
.jss179 {
  width: calc(100% + 8px);
  margin: -4px;
}
.jss179 > .jss158 {
  padding: 4px;
}
.jss180 {
  width: calc(100% + 16px);
  margin: -8px;
}
.jss180 > .jss158 {
  padding: 8px;
}
.jss181 {
  width: calc(100% + 24px);
  margin: -12px;
}
.jss181 > .jss158 {
  padding: 12px;
}
.jss182 {
  width: calc(100% + 32px);
  margin: -16px;
}
.jss182 > .jss158 {
  padding: 16px;
}
.jss183 {
  width: calc(100% + 40px);
  margin: -20px;
}
.jss183 > .jss158 {
  padding: 20px;
}
.jss184 {
  flex-grow: 0;
  max-width: none;
  flex-basis: auto;
}
.jss185 {
  flex-grow: 1;
  max-width: 100%;
  flex-basis: 0;
}
.jss186 {
  flex-grow: 0;
  max-width: 8.333333%;
  flex-basis: 8.333333%;
}
.jss187 {
  flex-grow: 0;
  max-width: 16.666667%;
  flex-basis: 16.666667%;
}
.jss188 {
  flex-grow: 0;
  max-width: 25%;
  flex-basis: 25%;
}
.jss189 {
  flex-grow: 0;
  max-width: 33.333333%;
  flex-basis: 33.333333%;
}
.jss190 {
  flex-grow: 0;
  max-width: 41.666667%;
  flex-basis: 41.666667%;
}
.jss191 {
  flex-grow: 0;
  max-width: 50%;
  flex-basis: 50%;
}
.jss192 {
  flex-grow: 0;
  max-width: 58.333333%;
  flex-basis: 58.333333%;
}
.jss193 {
  flex-grow: 0;
  max-width: 66.666667%;
  flex-basis: 66.666667%;
}
.jss194 {
  flex-grow: 0;
  max-width: 75%;
  flex-basis: 75%;
}
.jss195 {
  flex-grow: 0;
  max-width: 83.333333%;
  flex-basis: 83.333333%;
}
.jss196 {
  flex-grow: 0;
  max-width: 91.666667%;
  flex-basis: 91.666667%;
}
.jss197 {
  flex-grow: 0;
  max-width: 100%;
  flex-basis: 100%;
}
@media (min-width:600px) {
  .jss198 {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .jss199 {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .jss200 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .jss201 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .jss202 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .jss203 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .jss204 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .jss205 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .jss206 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .jss207 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .jss208 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .jss209 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .jss210 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .jss211 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:960px) {
  .jss212 {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .jss213 {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .jss214 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .jss215 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .jss216 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .jss217 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .jss218 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .jss219 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .jss220 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .jss221 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .jss222 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .jss223 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .jss224 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .jss225 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:1280px) {
  .jss226 {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .jss227 {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .jss228 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .jss229 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .jss230 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .jss231 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .jss232 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .jss233 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .jss234 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .jss235 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .jss236 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .jss237 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .jss238 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .jss239 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:1920px) {
  .jss240 {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .jss241 {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .jss242 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .jss243 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .jss244 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .jss245 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .jss246 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .jss247 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .jss248 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .jss249 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .jss250 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .jss251 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .jss252 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .jss253 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
.jss286 {
  padding: 20px;
  background: #EEEEEE;
}
.jss287 {
  display: flex;
  justify-content: center;
}
.jss288 {
  width: 24px;
  height: 24px;
  margin-left: 10px;
  vertical-align: middle;
}
.jss289 {
  display: flex;
  align-items: center;
  justify-content: center;
}
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
body {
  margin: 0;
  background-color: #fafafa;
}
@media print {
  body {
    background-color: #fff;
  }
}
.jss154 {
  width: 100%;
  height: 400px;
  position: absolute;
}
.jss155 {
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  position: absolute;
  object-fit: cover;
  object-position: center center;
}
.jss156 {
  height: 300px;
}
.jss255 {
  color: rgba(0, 0, 0, 0.87);
  padding: 6px 16px;
  font-size: 0.875rem;
  min-width: 64px;
  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  box-sizing: border-box;
  font-weight: 500;
  line-height: 1.75;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  border-radius: 4px;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
}
.jss255:hover {
  text-decoration: none;
  background-color: rgba(0, 0, 0, 0.08);
}
.jss255.jss275 {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss255:hover {
    background-color: transparent;
  }
}
.jss255:hover.jss275 {
  background-color: transparent;
}
.jss256 {
  width: 100%;
  display: inherit;
  align-items: inherit;
  justify-content: inherit;
}
.jss257 {
  padding: 6px 8px;
}
.jss258 {
  color: #448AFF;
}
.jss258:hover {
  background-color: rgba(68, 138, 255, 0.08);
}
@media (hover: none) {
  .jss258:hover {
    background-color: transparent;
  }
}
.jss259 {
  color: #EEEEEE;
}
.jss259:hover {
  background-color: rgba(238, 238, 238, 0.08);
}
@media (hover: none) {
  .jss259:hover {
    background-color: transparent;
  }
}
.jss263 {
  border: 1px solid rgba(0, 0, 0, 0.23);
  padding: 5px 16px;
}
.jss263.jss275 {
  border: 1px solid rgba(0, 0, 0, 0.26);
}
.jss264 {
  color: #448AFF;
  border: 1px solid rgba(68, 138, 255, 0.5);
}
.jss264:hover {
  border: 1px solid #448AFF;
  background-color: rgba(68, 138, 255, 0.08);
}
@media (hover: none) {
  .jss264:hover {
    background-color: transparent;
  }
}
.jss265 {
  color: #EEEEEE;
  border: 1px solid rgba(238, 238, 238, 0.5);
}
.jss265:hover {
  border: 1px solid #EEEEEE;
  background-color: rgba(238, 238, 238, 0.08);
}
.jss265.jss275 {
  border: 1px solid rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .jss265:hover {
    background-color: transparent;
  }
}
.jss266 {
  color: rgba(0, 0, 0, 0.87);
  box-shadow: 0px 1px 5px 0px rgba(0,0,0,0.2),0px 2px 2px 0px rgba(0,0,0,0.14),0px 3px 1px -2px rgba(0,0,0,0.12);
  background-color: #e0e0e0;
}
.jss266.jss274 {
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
}
.jss266:active {
  box-shadow: 0px 5px 5px -3px rgba(0,0,0,0.2),0px 8px 10px 1px rgba(0,0,0,0.14),0px 3px 14px 2px rgba(0,0,0,0.12);
}
.jss266.jss275 {
  color: rgba(0, 0, 0, 0.26);
  box-shadow: none;
  background-color: rgba(0, 0, 0, 0.12);
}
.jss266:hover {
  background-color: #d5d5d5;
}
@media (hover: none) {
  .jss266:hover {
    background-color: #e0e0e0;
  }
}
.jss266:hover.jss275 {
  background-color: rgba(0, 0, 0, 0.12);
}
.jss267 {
  color: #fff;
  background-color: #448AFF;
}
.jss267:hover {
  background-color: rgb(47, 96, 178);
}
@media (hover: none) {
  .jss267:hover {
    background-color: #448AFF;
  }
}
.jss268 {
  color: rgba(0, 0, 0, 0.87);
  background-color: #EEEEEE;
}
.jss268:hover {
  background-color: rgb(166, 166, 166);
}
@media (hover: none) {
  .jss268:hover {
    background-color: #EEEEEE;
  }
}
.jss272 {
  width: 56px;
  height: 56px;
  padding: 0;
  min-width: 0;
  box-shadow: 0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12);
  border-radius: 50%;
}
.jss272:active {
  box-shadow: 0px 7px 8px -4px rgba(0,0,0,0.2),0px 12px 17px 2px rgba(0,0,0,0.14),0px 5px 22px 4px rgba(0,0,0,0.12);
}
.jss273 {
  width: auto;
  height: 48px;
  padding: 0 16px;
  min-width: 48px;
  border-radius: 24px;
}
.jss276 {
  color: inherit;
  border-color: currentColor;
}
.jss277 {
  width: 40px;
  height: 40px;
}
.jss278 {
  padding: 4px 8px;
  min-width: 64px;
  font-size: 0.8125rem;
}
.jss279 {
  padding: 8px 24px;
  font-size: 0.9375rem;
}
.jss280 {
  width: 100%;
}
.jss283 {
  margin-right: 8px;
}
.jss284 {
  margin-left: 8px;
}
.jss285 {
  width: 100px;
}
.jss282 {
  padding: 20px;
}
.jss254 {
  margin-bottom: 20px;
}
.jss281 {
  margin: 16px 0;
  padding: 8px;
  background: #EEEEEE;
}
.jss149 {
  margin: 20px auto;
}
@media (min-width:600px) {
  .jss149 {
    width: 600px;
  }
}
@media (min-width:960px) {
  .jss149 {
    width: 960px;
  }
}
.jss150 {
  width: 100%;
  margin: 0;
}
.jss151 {
  display: flex;
  flex-wrap: wrap;
  margin-bottom: 8px;
  justify-content: flex-start;
}
.jss152 {
  margin: 8px;
}
.jss153 {
  padding: 32px;
  padding-left: 16px;
  padding-right: 16px;
}
@media (min-width:600px) {
  .jss153 {
    padding-left: 24px;
    padding-right: 24px;
  }
}</style><link rel="alternate" type="application/rss+xml" title="pjb0811.github.io" href="/rss.xml"/><link rel="shortcut icon" href="/image/logo-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#448AFF"/><title data-react-helmet="true">socket.io 를 활용한 채팅 앱 개발</title><link data-react-helmet="true" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" media="all"/><meta data-react-helmet="true" name="description" content="이번 글은 react 환경에서  를 활용한 채팅 앱 개발 과정에 대한 내용을 정리하려고 한다.  의 간단한 소개 및  를 활용한 채팅 앱 개발을 하면서 학습했던 내용들을 간단히 정리하려 한다. socket.io…"/><meta data-react-helmet="true" name="image" content="https://pjb0811.github.io/static/socket.io-1a668bd8490ac1a7fd803a750c44149d-0fcce.jpg"/><meta data-react-helmet="true" name="og:url" content="https://pjb0811.github.io/2019/03/chat-app-using-socket.io/"/><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" name="og:title" content="socket.io 를 활용한 채팅 앱 개발"/><meta data-react-helmet="true" name="og:description" content="이번 글은 react 환경에서  를 활용한 채팅 앱 개발 과정에 대한 내용을 정리하려고 한다.  의 간단한 소개 및  를 활용한 채팅 앱 개발을 하면서 학습했던 내용들을 간단히 정리하려 한다. socket.io…"/><meta data-react-helmet="true" name="og:image" content="https://pjb0811.github.io/static/socket.io-1a668bd8490ac1a7fd803a750c44149d-0fcce.jpg"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;height:100%;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";height:100%;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;width:100%;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:inherit;text-decoration:none;}a:hover,a:active{text-decoration:underline;}#___gatsby{height:100%;}#___gatsby>div{height:100%;}a:hover{text-decoration:none;}a.icon{display:inline-flex;;}.language-javascript .keyword{color:#d73a49;}.language-javascript .function{color:#6f42c1;}.language-javascript .number{color:#005cc5;}.language-javascript .boolean{color:#005cc5;}.language-typescript .keyword{color:#d73a49;}.language-typescript .function{color:#6f42c1;}.language-typescript .number{color:#005cc5;}.language-typescript .boolean{color:#005cc5;}.language-json .boolean{color:#005cc5;}figcaption{text-align:center;font-size:14px;}img[src*=".gif"]{display:block;margin:0 auto;}</style><link as="script" rel="preload" href="/component---src-components-pages-blog-post-jsx-013a24c4cedcfe488718.js"/><link as="script" rel="preload" href="/app-40c16a4b182bc5eccdc8.js"/><link as="script" rel="preload" href="/0-ed4a268c130d8b842148.js"/><link as="script" rel="preload" href="/12-3fbb8ef08e6edcdbe876.js"/><link as="script" rel="preload" href="/1-9012b18bbf7c4801a02a.js"/><link as="script" rel="preload" href="/webpack-runtime-cb1c6b21ac8bd64ad6e1.js"/><link rel="preload" href="/static/d/890/path---2019-03-chat-app-using-socket-io-802-f3d-rNK7XMdFUdMjWPn9cSkxBgahY.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div classes="jss1"><header class="jss29 jss35 jss20 jss21 jss27 mui-fixed"><div class="jss56 jss58 jss57"><button class="jss66 jss60 jss61 jss4" tabindex="0" type="button" aria-label="Menu"><span class="jss65"><svg class="jss69" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button><a class="jss78 jss95 jss107 jss5" href="/">pjb0811.github.io</a><div class="jss2"></div><div class="jss114"><div class="jss115"><svg class="jss69" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg></div><div class="jss118 jss116"><input type="text" class="jss128 jss117" placeholder="Search…"/></div></div><div class="jss139"><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="https://github.com/pjb0811" class="icon"><span class="material-icons jss140 fab fa-github" aria-hidden="true"></span></a></span></button><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="/tags" class="icon"><span class="material-icons jss140 fas fa-tag" aria-hidden="true"></span></a></span></button><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="/analysis" class="icon"><span class="material-icons jss140 fas fa-chart-bar" aria-hidden="true"></span></a></span></button></div></div></header></div><div class="jss3"></div><div class="jss154"><img src="/static/socket.io-1a668bd8490ac1a7fd803a750c44149d-0fcce.jpg" class="jss155" alt="socket.io 를 활용한 채팅 앱 개발"/></div><div class="jss156"></div><div class="jss149"><div class="jss157 jss181 jss150"><div class="jss158 jss197"><div class="jss29 jss32 jss30 jss153"><h3 class="jss78 jss92 jss254">socket.io 를 활용한 채팅 앱 개발</h3><h6 class="jss78 jss96 jss102">2019.03.04</h6><div class="jss151"><a class="jss66 jss255 jss257 jss258 jss260 jss261 jss152" tabindex="0" role="button" href="/tags/react"><span class="jss256">react</span></a><a class="jss66 jss255 jss257 jss258 jss260 jss261 jss152" tabindex="0" role="button" href="/tags/javascript"><span class="jss256">javascript</span></a></div><div class="markdown-body"><blockquote>
<p>이번 글은 react 환경에서 <code class="language-text">socket.io</code>를 활용한 채팅 앱 개발 과정에 대한 내용을 정리하려고 한다. <code class="language-text">socket.io</code>의 간단한 소개 및 <code class="language-text">Next.js</code>를 활용한 채팅 앱 개발을 하면서 학습했던 내용들을 간단히 정리하려 한다.</p>
</blockquote>
<h2>socket.io</h2>
<p><code class="language-text">socket.io</code>란 실시간으로 상호작용하는 웹 서비스를 만드는 기술인 <code class="language-text">WebSocket</code>을 쉽게 사용할 수 있게 해주는 라이브러리이다. <code class="language-text">WebSocket</code>은 사용자의 브라우저와 서버 사이의 동적인 양방향 연결 채널을 구성하는 HTML5 프로토콜이며 <code class="language-text">WebSocket API</code>를 통해 서버로 메시지를 보내고 요청 없이 응답을 받아오는 것이 가능하다.</p>
<p>HTTP는 클라이언트에 의해 초기화되기 때문에 서버가 변경사항을 클라이언트에게 알릴 수 있는 방법이 없지만 <code class="language-text">WebSocket</code>의 연결은 HTTP 통신과는 다르게 클라언트가 특정 주기를 가지고 Polling하지 않아도 변경된 사항을 시기 적절하게 전달할 수 있는 지속적이고 완전한 양방향 연결 스트림을 만들어 주는 기술이다. 하지만 일부 오래된 브라우저의 경우 지원하지 않으며 브라우저별로 지원하는 <code class="language-text">WebSocket</code> 버전도 다르다. 이러한 웹브라우저 환경에서 <code class="language-text">socket.io</code>는 JavaScript를 이용하여 브라우저 종류에 상관없이 실시간 웹 통신을 구현할 수 있도록 해줄 수 있다.</p>
<p>기본적으로 <code class="language-text">socket.io</code>를 사용하기 위해서는 서버와 클라이언트가 모두 필요하기 때문에 서버 측 구현을 위한 <code class="language-text">socket.io</code>와 클라이언트 측 구현을 위한 <code class="language-text">socket.io-client</code>를 사용해야 한다. <code class="language-text">socket.io-client</code>의 경우 기본적으로 <code class="language-text">socket.io</code> 패키지에 포함되어 있으며 독립적으로 패키지 설치 후 사용도 가능하다. 서버 구성 시에는 기본적으로 <code class="language-text">Node.js</code> 환경에서 실행 가능하며 다른 서버 환경에서의 구성도 지원가능하다.</p>
<p>그럼 이쯤에서 <code class="language-text">socket.io</code>에 대한 간단한 소개를 마치며 간단한 채팅 앱 개발 과정에 대한 내용을 정리보도록 하자. 모든 앱에서 구현된 컴포넌트를 일일히 설명하기에는 양이 많기 때문에 <code class="language-text">socket.io</code>를 활용한 일부 영역에 대한 코드로 요약해서 정리했다. <code class="language-text">socket.io</code>를 사용한 내용은 구현한 앱의 기능을 소개하면서 간단히 설명하도록 하자.</p>
<h2>기본 구조 설정</h2>
<p>기본적은 환경은 <code class="language-text">Next.js</code> 를 활용하였으며 전역 데이터 관리는 <code class="language-text">mobx</code>를 활용하였다. UI 구성시에는 <code class="language-text">material-ui</code>를 사용하였고 테스트 환경은 <code class="language-text">mocha</code>를 활용하였다.</p>
<p>디렉토리 구성의 경우 <a href="http://bradfrost.com/blog/post/atomic-web-design/">Atomic Design</a>를 참고하여 설계하였고 다음과 같은 구조로 설계하였다.</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">.
├── components              # 주요 컴포넌트 폴더
│   ├── atoms                 # 원자 단위로 설계한 컴포넌트 폴더
│   ├── molecules             # 분자 단위로 설계한 컴포넌트 폴더
│   ├── organisms             # 생물 단위로 설계한 컴포넌트 폴더
│   ├── templates             # 페이지 컴포넌트를 감싸는 템플릿 컴포넌트 폴더
│   └── wrappers              # HOC, Render Props등의 컴포넌트 폴더
├── lib                     # 특정 기능을 제공하는 함수 및 라이브러리 관련 폴더
├── mobx                    # 전역 상태 관리를 제공하는 클래스 폴더
├── pages                   # 라우팅 주소에 갖는 페이지 컴포넌트 폴더
├── static                  # 정적 리소스 관련 폴더
├── test                    # 단위 테스트 관련 폴더
│   └── components            # 컴포넌트 테스트 폴더
│       ├── atoms               # 원자 단위 컴포넌트 테스트 폴더
│       ├── molecules           # 분자 단위 컴포넌트 테스트 폴더
│       ├── organisms           # 생물 단위 컴포넌트 테스트 폴더
│       ├── pages               # 페이지 컴포넌트 테스트 폴더
│       ├── templates           # 템플릿 컴포넌트 테스트 폴더
│       └── wrappers            # 랩핑 컴포넌트 테스트 폴더
├── .babelrc                # babel 설정 파일
├── next.config.js          # nextjs 환경 설정 파일
└── package.json            # package 설정 파일</code></pre></div>
<p>기본적인 앱 구성은 앱 메인 접근 시 로그인 여부를 확인하며 로그인 시 채널 목록으로 이동하게 된다. 각 채널에 입장한 사용자간의 채팅이 가능하며 현재 채팅방에 입장하지 않은 사용자를 초대할 수 있도록 구현했다.</p>
<h2>공통 영역 및 로그아웃, 사용자 정보 업데이트, 초대하기</h2>
<h3>Client</h3>
<p>클라이언트 영역의 경우 전체 페이지 영역의 메인 레이아웃을 담당하는 공통 영역에 대한 컴포넌트를 구현하였고 <code class="language-text">HoC</code> 패턴을 통해 각각의 페이지 컴포넌트를 인자로 전달받아 레이아웃 컴포넌트를 재사용할 수 있도록 구현하였다. 해당 컴포넌트에서 <code class="language-text">mobx</code>로 관리되는 전역 데이터를 하위 컨포넌트에 주입하도록 설정했다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">withMain</span> <span class="token operator">=</span> Page <span class="token operator">=></span> <span class="token punctuation">{</span>
  @<span class="token function">inject</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">)</span>
  @observer
  <span class="token keyword">class</span> <span class="token class-name">MainWrapper</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token keyword">async</span> <span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span><span class="token punctuation">(</span>Page<span class="token punctuation">.</span>getInitialProps <span class="token operator">?</span> <span class="token keyword">await</span> Page<span class="token punctuation">.</span><span class="token function">getInitialProps</span><span class="token punctuation">(</span>ctx<span class="token punctuation">)</span> <span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
      <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> chat

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>user<span class="token punctuation">.</span>userId <span class="token operator">||</span> <span class="token operator">!</span>user<span class="token punctuation">.</span>socketId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Router<span class="token punctuation">.</span><span class="token function">pushRoute</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>socket<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          chat<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span> socketId<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
          document<span class="token punctuation">.</span>location<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> users <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
          chat<span class="token punctuation">.</span><span class="token function">setUsers</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>

        socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'inviteRoom'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
          chat<span class="token punctuation">.</span><span class="token function">setInvites</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">logout</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>chat
      socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">inviteRoom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> sender<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> room <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>chat
      socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'inviteRoom'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        sender<span class="token punctuation">,</span>
        receiver<span class="token punctuation">,</span>
        room<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">removeInvite</span> <span class="token operator">=</span> invite <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
      chat<span class="token punctuation">.</span><span class="token function">removeInvites</span><span class="token punctuation">(</span>invite<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function-variable function">moveRoom</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">,</span> room <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>chat

      socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span>type<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        user<span class="token punctuation">,</span>
        room<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> classes<span class="token punctuation">,</span> router<span class="token punctuation">,</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
      <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> users<span class="token punctuation">,</span> invites <span class="token punctuation">}</span> <span class="token operator">=</span> chat

      <span class="token keyword">return</span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Fragment<span class="token operator">></span>
          <span class="token operator">&lt;</span>Head<span class="token operator">></span>
            <span class="token operator">&lt;</span>title<span class="token operator">></span>chat app<span class="token operator">&lt;</span><span class="token operator">/</span>title<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>Head<span class="token operator">></span>
          <span class="token operator">&lt;</span>AppBar
            user<span class="token operator">=</span><span class="token punctuation">{</span>user<span class="token punctuation">}</span>
            users<span class="token operator">=</span><span class="token punctuation">{</span>users<span class="token punctuation">}</span>
            invites<span class="token operator">=</span><span class="token punctuation">{</span>invites<span class="token punctuation">}</span>
            classes<span class="token operator">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">}</span>
            room<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>room<span class="token punctuation">}</span>
            logout<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>logout<span class="token punctuation">}</span>
            inviteRoom<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>inviteRoom<span class="token punctuation">}</span>
            removeInvite<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>removeInvite<span class="token punctuation">}</span>
            moveRoom<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>moveRoom<span class="token punctuation">}</span>
          <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>div className<span class="token operator">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">.</span>root<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Page <span class="token punctuation">{</span><span class="token operator">...</span><span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">}</span> classes<span class="token operator">=</span><span class="token punctuation">{</span>classes<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">></span>
      <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token function">withStyles</span><span class="token punctuation">(</span>styles<span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'MainWrapper'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>MainWrapper<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>우선 컴포넌트 마운트 시 로그인 한 사용자 정보를 확인한 후 로그인 정보가 없는 경우 로그인 페이지로 이동하도록 구현했다. 이 후 사용자 정보가 확인되는 경우 수신된 소켓 정보에 따라 서버로부터 수신받는 이벤트를 처리해주도록 했다.</p>
<p>메인 레이아웃에 설정된 소켓 이벤트는 로그아웃, 전체 사용자 업데이트, 사용자 초대하기 기능이며 <code class="language-text">socket.io</code>에서 제공하는 <code class="language-text">on</code> 메서드를 통해 서버로부터 수신된 타입에 따라 클라이언트 측 함수를 실행하도록 구현했다.</p>
<p>서버로 송신이 필요한 이벤트의 경우 <code class="language-text">logout</code>, <code class="language-text">inviteRoom</code>, <code class="language-text">moveRoom</code> 함수를 통해 로그아웃, 사용자 초대, 채팅방 이동에 대한 정보를 <code class="language-text">socket.io</code>에서 제공하는 <code class="language-text">emit</code> 메서드를 통해 요청할 수 있도록 구현하였다.</p>
<p><img src="/logout-03df9c344c38e739985b0bd12703aa05.gif" alt="logout"></p>
<p><img src="/users-update-8df6afd866053d80a199bbab6ecb136e.gif" alt="users-update"></p>
<p><img src="/invite-user-2c13a8675261f99f065cbbc8b561fdfa.gif" alt="invite-user"></p>
<p>해당 기능들의 경우 모든 사용자들이 공통적으로 제공되어야 하는 기능이기 때문에 메인 레이아웃 컴포넌트에서 구현하도록 했으며 로그아웃, 사용자 정보 갱신 및 사용자 초대하기에 대한 동작을 확인할 수 있다. 그럼 이제 해당 컴포넌트로 주입되는 전역 데이터를 관리하기 위해 <code class="language-text">mobx</code>로 구현된 코드를 확인해보자.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Chat</span> <span class="token punctuation">{</span>
  @observable
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    socket<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
    user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      userId<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
      socketId<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    invites<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    users<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token function">constructor</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> props <span class="token operator">?</span> props<span class="token punctuation">.</span>state <span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state
  <span class="token punctuation">}</span>

  @action
  connect <span class="token operator">=</span> <span class="token punctuation">(</span>namespace <span class="token operator">=</span> <span class="token string">'/'</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>socket <span class="token operator">=</span> <span class="token function">io</span><span class="token punctuation">(</span>namespace<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @action
  <span class="token function-variable function">disconnect</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">disconnect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @action
  <span class="token function-variable function">setUser</span> <span class="token operator">=</span> user <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>user <span class="token operator">=</span> user
  <span class="token punctuation">}</span>

  @action
  <span class="token function-variable function">setUsers</span> <span class="token operator">=</span> users <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>users <span class="token operator">=</span> users
  <span class="token punctuation">}</span>

  @action
  <span class="token function-variable function">setInvites</span> <span class="token operator">=</span> invite <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>invite<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>
      <span class="token punctuation">(</span>currInvite<span class="token punctuation">,</span> i<span class="token punctuation">,</span> self<span class="token punctuation">)</span> <span class="token operator">=></span>
        i <span class="token operator">===</span> self<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>selfInvite <span class="token operator">=></span> selfInvite<span class="token punctuation">.</span>time <span class="token operator">===</span> currInvite<span class="token punctuation">.</span>time<span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @action
  <span class="token function-variable function">removeInvites</span> <span class="token operator">=</span> invite <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> index <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites<span class="token punctuation">.</span><span class="token function">findIndex</span><span class="token punctuation">(</span>
      currInvite <span class="token operator">=></span>
        currInvite<span class="token punctuation">.</span>time <span class="token operator">===</span> invite<span class="token punctuation">.</span>time <span class="token operator">&amp;&amp;</span>
        currInvite<span class="token punctuation">.</span>sender<span class="token punctuation">.</span>socketId <span class="token operator">===</span> invite<span class="token punctuation">.</span>sender<span class="token punctuation">.</span>socketId
    <span class="token punctuation">)</span>

    <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites<span class="token punctuation">.</span><span class="token function">splice</span><span class="token punctuation">(</span>index<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @computed <span class="token keyword">get</span> <span class="token function">socket</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>socket
  <span class="token punctuation">}</span>

  @computed <span class="token keyword">get</span> <span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toJS</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>user<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @computed <span class="token keyword">get</span> <span class="token function">users</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toJS</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>users<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  @computed <span class="token keyword">get</span> <span class="token function">invites</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">toJS</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>invites<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">mobx</code>에서 구현한 <code class="language-text">Chat</code> 클래스의 코드 내용이다. 전역 상태값으로는 소켓 객체와 현재 사용자 정보, 초대 목록, 전체 사용자 정보를 가지는 객체로 구성되어 있으며 <code class="language-text">action decorator</code>로 설정된 함수를 통해 전역 상태 객체를 갱신하도록 구현했다. 소켓 접속 및 해제와 현재/전체 사용자 업데이트 및 초대 목록 정보를 갱신할 수 있도록 구현했다. 또한 <code class="language-text">computed decorator</code>를 통해 소켓 정보 및 현재/전체 사용자, 초대 목록 정보를 반환받을 수 있도록 구현했다.</p>
<h3>Server</h3>
<p>서버 영역의 경우 <code class="language-text">Next.js</code> 환경에서 <code class="language-text">socket.io</code>에 대한 설정이 필요하기 때문에 <code class="language-text">express</code>를 활용하여 서버 구성을 재정의하였다. 이 후 <code class="language-text">express</code>를 통한 서버 실행 시 해당 서버를 통해 새로운 소켓 서버를 생성해주었다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>express<span class="token punctuation">)</span>
<span class="token keyword">const</span> chatServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./chat'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> next <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'next'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> mobxReact <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'mobx-react'</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'../lib/routes'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">3000</span>
<span class="token keyword">const</span> env <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">NODE_ENV</span>
<span class="token keyword">const</span> dev <span class="token operator">=</span> env <span class="token operator">!==</span> <span class="token string">'production'</span>
<span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  dir<span class="token punctuation">:</span> <span class="token string">'.'</span><span class="token punctuation">,</span>
  dev<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> routeHandler <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">getRequestHandler</span><span class="token punctuation">(</span>app<span class="token punctuation">)</span>

<span class="token function">chatServer</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>

mobxReact<span class="token punctuation">.</span><span class="token function">useStaticRendering</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>

app
  <span class="token punctuation">.</span><span class="token function">prepare</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    express<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>routeHandler<span class="token punctuation">)</span>

    server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> err <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> err
      <span class="token punctuation">}</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`> Ready on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> [</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>env<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">]`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token keyword">catch</span><span class="token punctuation">(</span>err <span class="token operator">=></span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'An error occurred, unable to start the express'</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">express</code>와 <code class="language-text">next.js</code>를 활용하여 서버를 구현한 코드이다. 소켓 설정에 대한 파일은 따로 분리하여 구현하였고 클라이언트 측에서 설정한 <code class="language-text">mobx</code> 및 라우팅 설정을 활용하기 위한 코드로 구성되어있다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> <span class="token function-variable function">chatServer</span> <span class="token operator">=</span> server <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> io <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'socket.io'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>
  <span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  io<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'connection'</span><span class="token punctuation">,</span> socket <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// ...</span>
    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      users <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=></span> user<span class="token punctuation">.</span>socketId <span class="token operator">!==</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
      socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'logout'</span><span class="token punctuation">)</span>

      io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        users<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'disconnect'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      users <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>user <span class="token operator">=></span> user<span class="token punctuation">.</span>socketId <span class="token operator">!==</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'inviteRoom'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> sender<span class="token punctuation">,</span> receiver<span class="token punctuation">,</span> room <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> time <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      io<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>receiver<span class="token punctuation">.</span>socketId<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'inviteRoom'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        sender<span class="token punctuation">,</span>
        room<span class="token punctuation">,</span>
        time<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> chatServer</code></pre></div>
<p><code class="language-text">socket.io</code>를 활용한 채팅 서버의 구현 코드이다. 인자로 전달받은 서버 정보를 통해 소켓 서버를 생성했다. 소켓 연결 뒤 전체 사용자 목록을 저장할 배열 변수를 초기화하며 <code class="language-text">io.on(&#39;connection&#39;)</code> 함수를 통해 소켓에 접근한 사용자에 대한 이벤트를 처리하도록 구현했다.</p>
<p>우선 공통 영역에 설정된 로그아웃, 전체 사용자 정보 갱신, 사용자 초대하기 이벤트에 대한 내용만 정리했다. 각각의 이벤트 처리의 경우 <code class="language-text">socket.emit</code>, <code class="language-text">io.emit</code>, <code class="language-text">io.to(socketId).emit</code> 메서드를 활용했으며 순서대로 현재 사용자, 전체 사용자, 특정 사용자에 대한 클라이언트 측 이벤트를 송신하게 된다.</p>
<h2>로그인</h2>
<h3>Client</h3>
<p>로그인 화면의 경우 기본경로(<code class="language-text">/</code>) 접속 시에 나오는 화면이며, 소켓에 접속한 정보를 가지고 있지 않는 사용자에 대해 소켓 접속을 할 수 있도록 구현되어 있다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Connect</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    form<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      userId<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    chat<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> chat

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      chat<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
      Router<span class="token punctuation">.</span><span class="token function">pushRoute</span><span class="token punctuation">(</span><span class="token string">'/list'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> users <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      chat<span class="token punctuation">.</span><span class="token function">setUsers</span><span class="token punctuation">(</span>users<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">onConnect</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token punctuation">,</span> <span class="token punctuation">{</span> setErrors<span class="token punctuation">,</span> setSubmitting <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> socket <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props<span class="token punctuation">.</span>chat

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>socket <span class="token operator">||</span> socket<span class="token punctuation">.</span>io<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token string">'closed'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">setErrors</span><span class="token punctuation">(</span><span class="token punctuation">{</span> userId<span class="token punctuation">:</span> <span class="token string">'새로고침 후 다시 접속해주세요.'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">setSubmitting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span>
    <span class="token punctuation">}</span>

    socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        userId<span class="token punctuation">:</span> values<span class="token punctuation">.</span>userId<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Formik
        initialValues<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>form<span class="token punctuation">}</span>
        validationSchema<span class="token operator">=</span><span class="token punctuation">{</span>Yup<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          userId<span class="token punctuation">:</span> Yup<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'3글자 이상 입력해주세요'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'10글자 이하로 입력해주세요'</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token string">'ID를 입력해주세요'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        onSubmit<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>onConnect<span class="token punctuation">}</span>
        render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> submitForm<span class="token punctuation">,</span> isSubmitting <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>ConnectForm submitForm<span class="token operator">=</span><span class="token punctuation">{</span>submitForm<span class="token punctuation">}</span> isSubmitting<span class="token operator">=</span><span class="token punctuation">{</span>isSubmitting<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">/</span><span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Connect</code></pre></div>
<p>접속한 사용자에 대해 소켓 접속 정보를 설정할 수 있는 로그인 컴포넌트이다. 마운트 이후 사용자 정보와 전체 사용자 정보를 서버로부터 수신 받을 수 있도록 구현했다. 로그인 시에는 유효성 검증 확인 후 서버로 사용자 정보를 송신하도록 구현했다. 유효성 검증 로직의 경우 <code class="language-text">formik</code> 라이브러리를 활용하였고 검증 항목은 필수값, 최소길이, 최대길이 값으로 설정되어있다.</p>
<p><img src="/login-63b6cb9eaad1a623e710bd7e72f294a4.gif" alt="login"></p>
<p>로그인 동작에 대한 화면이며 유효성 검증을 완료한 후 채팅방 목록 페이지로 이동하는 것을 확인할 수 있다.</p>
<h3>Server</h3>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>

<span class="token keyword">let</span> users <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      userId<span class="token punctuation">:</span> user<span class="token punctuation">.</span>userId<span class="token punctuation">,</span>
      socketId<span class="token punctuation">:</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'login'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>user<span class="token punctuation">,</span>
      socketId<span class="token punctuation">:</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// ...</span></code></pre></div>
<p>서버 측에서 설정된 로그인 관련 소켓 이벤트의 경우 클라이인트 측으로부터 로그인 정보 수신 시 접속한 아이디 존재 여부 확인 후 전체 사용자 목록에 현재 사용자를 추가하도록 구현했다. 이 후 현재 사용자에게 사용자 아이디 및 소켓 아이디 정보를 클라이언트로 송신하며 전체 사용자에서 업데이트된 전체 사용자 정보를 송신하도록 구현했다.</p>
<h2>채널 입장 &#x26; 퇴장, 메시지 전송, 이미지 전송</h2>
<h3>Client</h3>
<p>로그인 이후 화면은 채팅방 목록으로 구성되어 있으며 채팅방 선택 시 해당 채팅방을 이동하도록 구현했으며 같은 채팅방에 있는 사용자 간 기본적인 메시지 채팅 및 이미지 업로드 기능을 통한 이미지 전송 기능으로 구현되어 있다. 클라이언트 측에서 소켓을 설정한 영역은 채팅 기능을 제공하는 컴포넌트에 설정하였고 해당 컴포넌트에서 채널 이동 및 메시지 전송에 대한 이벤트를 제어하도록 설정했다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Chat</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  state <span class="token operator">=</span> <span class="token punctuation">{</span>
    messages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  mounted <span class="token operator">=</span> <span class="token boolean">false</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> chat<span class="token punctuation">,</span> router <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    chat<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> socket<span class="token punctuation">,</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> chat

    <span class="token keyword">this</span><span class="token punctuation">.</span>mounted <span class="token operator">=</span> <span class="token boolean">true</span>

    socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      room<span class="token punctuation">:</span> router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>room<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'resetMessages'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">resetMessages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'updateUser'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>mounted<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        chat<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">componentWillUnmount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">const</span> <span class="token punctuation">{</span> socket<span class="token punctuation">,</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> chat

    <span class="token keyword">this</span><span class="token punctuation">.</span>mounted <span class="token operator">=</span> <span class="token boolean">false</span>

    socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      room<span class="token punctuation">:</span> router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>room<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">receiveMessage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> messages <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> newMessages <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state<span class="token punctuation">.</span>messages<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    newMessages<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>messages<span class="token punctuation">)</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      messages<span class="token punctuation">:</span> newMessages<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    scroll<span class="token punctuation">.</span><span class="token function">scrollToBottom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  sendMessage <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">,</span> message <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">,</span> images <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">const</span> <span class="token punctuation">{</span> socket<span class="token punctuation">,</span> user <span class="token punctuation">}</span> <span class="token operator">=</span> chat
    socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      room<span class="token punctuation">:</span> router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>room<span class="token punctuation">,</span>
      type<span class="token punctuation">,</span>
      message<span class="token punctuation">,</span>
      images<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function-variable function">resetMessages</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      messages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> router<span class="token punctuation">,</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    <span class="token keyword">const</span> myself <span class="token operator">=</span> chat<span class="token punctuation">.</span>user
    <span class="token keyword">const</span> <span class="token punctuation">{</span> messages <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>Fragment<span class="token operator">></span>
        <span class="token operator">&lt;</span>Typography variant<span class="token operator">=</span><span class="token string">"h3"</span> gutterBottom<span class="token operator">></span>
          <span class="token punctuation">{</span>router<span class="token punctuation">.</span>query<span class="token punctuation">.</span>room<span class="token punctuation">}</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Typography<span class="token operator">></span>
        <span class="token operator">&lt;</span>Messages messages<span class="token operator">=</span><span class="token punctuation">{</span>messages<span class="token punctuation">}</span> myself<span class="token operator">=</span><span class="token punctuation">{</span>myself<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>InputArea sendMessage<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>sendMessage<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>Fragment<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>컴포넌트 마운트 시에는 props로 전달받은 소켓 객체를 통해 서버 접속 여부를 확인하도록 구현되었다. 이 후 채팅방 입장 정보를 서버로 송신하며,
서버로 부터 전달받은 이벤트에 따라 채팅방 입장 및 퇴장, 채팅방 내 메시지 정보 삭제, 메시지 확인, 사용자 정보 업데이트 등에 대한 기능을 실행하도록했다.</p>
<p>마운트 해제 시에는 <code class="language-text">mounted</code>라는 프로퍼티를 통해 컴포넌트 언마운트 이후 상태 변경을 차단하도록 설정했으며, 언마운트 시 현재 사용자에 대한 채팅방 퇴장 이벤트를 서버로 송신하도록 했다.</p>
<p>또한 수신받은 이벤트에 따라 전달받은 메시지 정보를 state에 업데이트할 수 있도록 하기 위해 메시지 정보를 서버로 송/수신해주는 함수로 구현되어 있다.</p>
<p><img src="/join-leave-a080e2370a0c356388fd31b8306846d9.gif" alt="join-leave"></p>
<p><img src="/message-dafa416cb50941f8d5d98a89ea937201.gif" alt="message"></p>
<p><img src="/image-ba85fa16f657e66506e10ae3f71c1fc0.gif" alt="image"></p>
<p>현재 컴포넌트에 설정된 기능에 따라 채팅방 입장/퇴장 및 메시지 전송을 구현한 화면이다. 사용자가 채널에 입장/퇴장 시 화면 상단에 애니메이션을 활용하여 사용자의 아이디를 표시해주며 채팅 메시지 입력 시에는 해당 메시지롤 화면에 표시하도록 구현했다. 이미지 메시지의 경우 <code class="language-text">drag &amp; drop</code> 기능을 활용하여 메시지를 전달할 수 있도록 했다.</p>
<h3>Server</h3>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript">socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> room<span class="token punctuation">,</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  socket<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>room<span class="token punctuation">)</span>
  users <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>currentUser <span class="token operator">=></span> currentUser<span class="token punctuation">.</span>socketId <span class="token operator">!==</span> user<span class="token punctuation">.</span>socketId<span class="token punctuation">)</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      userId<span class="token punctuation">:</span> user<span class="token punctuation">.</span>userId<span class="token punctuation">,</span>
      socketId<span class="token punctuation">:</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      room<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updateUser'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token operator">...</span>user<span class="token punctuation">,</span>
      socketId<span class="token punctuation">:</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  io<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>room<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        <span class="token operator">...</span>user<span class="token punctuation">,</span>
        socketId<span class="token punctuation">:</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      type<span class="token punctuation">:</span> <span class="token string">'info'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">님이 입장했습니다.`</span></span><span class="token punctuation">,</span>
      images<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> room<span class="token punctuation">,</span> user<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message<span class="token punctuation">,</span> images <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  io<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>room<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      type<span class="token punctuation">,</span>
      message<span class="token punctuation">,</span>
      images<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> room<span class="token punctuation">,</span> user <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  users <span class="token operator">=</span> users<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>user <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>user<span class="token punctuation">.</span>socketId <span class="token operator">===</span> socket<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">.</span>room <span class="token operator">=</span> <span class="token string">''</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> user
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  io<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'updateUsers'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    users<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  io<span class="token punctuation">.</span><span class="token function">to</span><span class="token punctuation">(</span>room<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    messages<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      type<span class="token punctuation">:</span> <span class="token string">'info'</span><span class="token punctuation">,</span>
      message<span class="token punctuation">:</span> <span class="token template-string"><span class="token string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>user<span class="token punctuation">.</span>userId<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">님이 퇴장했습니다.`</span></span><span class="token punctuation">,</span>
      images<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'resetMessages'</span><span class="token punctuation">)</span>
  socket<span class="token punctuation">.</span><span class="token function">leave</span><span class="token punctuation">(</span>room<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>채팅방 입장/퇴장 및 채팅 메시지 전달에 대한 서버 측 소켓 구현 코드이다. 채널 입장에 대한 이벤트 송신 시에는 <code class="language-text">join</code> 메서드와 인자를 전달받은 <code class="language-text">room</code> 정보를 통해 채팅방에 입장하며, 새롭게 전달받은 소켓ID를 통해 전채 사용자 목록 내 현재 사용자 정보를 갱신하도록 구현했다. 이 후 현재 사용자와 전체 사용자에게 갱신된 사용자 정보를 전달할 수 있도록 클라이언트로 송신하는 이벤트를 호출하였다. 또한 현재 채널에 포함된 사용자에게 사용자가 입장했다는 메시지를 전달하는 클라이언트 송신 이벤트를 구현했다. 이후 채팅 메시지를 송신하는 경우 인자로 전달받은 채팅방 정보, 사용자 정보, 메시지 종류, 텍스트/이미지 메시지를 현재 채팅방 사용자에게 전달하도록 구현했다.</p>
<p>채팅방 퇴장 시에는 현재 사용자가 가지고 있는 채팅방 정보를 초기화한 후 전체 사용자에게 해당 정보를 송신하도록 했다. 이 후 퇴장하는 채팅방에 포함된 사용자에게 현재 사용자에 대한 퇴장 메시지를 전달하도록 구현했다. 현재 사용자에게는 채팅방 내 메시지 목록를 삭제한 뒤 <code class="language-text">leave</code> 메서드와 <code class="language-text">room</code> 정보를 통해 현재 채팅방에서 퇴장하도록 구현했다.</p>
<h2>테스트</h2>
<h3>Client</h3>
<p>테스트 환경의 경우 <code class="language-text">mocha</code>와 <code class="language-text">enzyme</code>을 이용하여 기본 환경을 구성했다. 각각의 컴포넌트에 대한 단위 테스트를 실행할 수 있도록 구현하였으며 <code class="language-text">BDD</code> 기반으로 구현하였다. <code class="language-text">Assertion</code> 라이브러리의 경우 <code class="language-text">chai</code>를 활용하였고 해당 라이브러리에서 제공하는 <code class="language-text">expect</code> 함수를 통해 코드를 검증할 수 있도록 했다.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">--require @babel/register
--file test/mocha.setup.js
--watch
test/**/*.test.js</code></pre></div>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> Enzyme <span class="token keyword">from</span> <span class="token string">'enzyme'</span>
<span class="token keyword">import</span> Adapter <span class="token keyword">from</span> <span class="token string">'enzyme-adapter-react-16'</span>
<span class="token keyword">import</span> <span class="token string">'jsdom-global/register'</span>

Enzyme<span class="token punctuation">.</span><span class="token function">configure</span><span class="token punctuation">(</span><span class="token punctuation">{</span> adapter<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Adapter</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>테스트 스크립트 실행 시 <code class="language-text">mocha</code> 옵션 설정을 통해 테스트 코드 실행 전 호출해야 할 파일을 설정하도록 했다. 실행 전 호출 파일에서는 <code class="language-text">enzyme</code> 활용 시 React의 버전 설정을 맞추기 위한 어뎁터를 설정해주었다. 구현한 테스트 코드 또한 앞서 설명한 코드들과 마찬가지로 모든 코드를 설명하기에는 양이 많기 때문에 구현된 테스트 코드 중 일부에 대한 내용만 간략히 설명하려고 한다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'&lt;ConnectForm />'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> initialValues <span class="token operator">=</span> <span class="token punctuation">{</span>
    userId<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> <span class="token function-variable function">onSubmit</span> <span class="token operator">=</span> <span class="token punctuation">(</span>values<span class="token punctuation">,</span> <span class="token punctuation">{</span> setSubmitting <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">setSubmitting</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Formik
      initialValues<span class="token operator">=</span><span class="token punctuation">{</span>initialValues<span class="token punctuation">}</span>
      validationSchema<span class="token operator">=</span><span class="token punctuation">{</span>Yup<span class="token punctuation">.</span><span class="token function">object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shape</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        userId<span class="token punctuation">:</span> Yup<span class="token punctuation">.</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">'3글자 이상 입력해주세요'</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">required</span><span class="token punctuation">(</span><span class="token string">'ID를 입력해주세요'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      onSubmit<span class="token operator">=</span><span class="token punctuation">{</span>onSubmit<span class="token punctuation">}</span>
      render<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">{</span> submitForm<span class="token punctuation">,</span> isSubmitting <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>ConnectForm submitForm<span class="token operator">=</span><span class="token punctuation">{</span>submitForm<span class="token punctuation">}</span> isSubmitting<span class="token operator">=</span><span class="token punctuation">{</span>isSubmitting<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span>
      <span class="token punctuation">)</span><span class="token punctuation">}</span>
    <span class="token operator">/</span><span class="token operator">></span>
  <span class="token punctuation">)</span>

  <span class="token keyword">const</span> input <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> button <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'button'</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'기본 props 전달 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>onSubmit<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>onSubmit<span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>initialValues<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>initialValues<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'id input 창 입력 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    input<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">'Hello'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'Hello'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'id 필수 입력 유효성 검사 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    input<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">''</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        userId<span class="token punctuation">:</span> <span class="token string">'ID를 입력해주세요'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'id 글자 길이 유효성 검사 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    input<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">'1'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>input<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>errors<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        userId<span class="token punctuation">:</span> <span class="token string">'3글자 이상 입력해주세요'</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'유효성 검사 실패시 접속 버튼 활성화 여부 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>button<span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'disabled'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'유효성 검사 성공 시 submit 이벤트 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    input<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">'change'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> target<span class="token punctuation">:</span> <span class="token punctuation">{</span> value<span class="token punctuation">:</span> <span class="token string">'success'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    button<span class="token punctuation">.</span><span class="token function">simulate</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isSubmitting<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>isSubmitting<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>기본적으로 테스트 시 구현한 부분은 특정 조건에 따른 props와 state의 값을 정상적으로 검증되는지에 대한 내용으로 구성되어 있다. 또 한 사용자의 이벤트 제어와 관련된 컴포넌트들의 경우 <code class="language-text">enzyme</code>에서 제공하는 <code class="language-text">simulate</code> 함수를 활용한 컴포넌트 테스트를 할 수 있도록 구현했다. 위 코드는 로그인 시 사용자 검증에 대한 컴포넌트로서 기본적인 컴포넌트 상태 정보와 사용자 제어 이벤트에 대한 시뮬레이션을 통해 유효성 및 UI 영역에 대한 테스트를 검증하도록 구현되어 았다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'&lt;AsyncImage />'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    image<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'test.js'</span><span class="token punctuation">,</span> type<span class="token punctuation">:</span> <span class="token string">'image'</span><span class="token punctuation">,</span> base64<span class="token punctuation">:</span> <span class="token string">'base64'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">let</span> file <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>AsyncImage <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token punctuation">{</span>props <span class="token operator">=></span> <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>base64<span class="token punctuation">}</span> alt<span class="token operator">=</span><span class="token punctuation">{</span>props<span class="token punctuation">.</span>name<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">}</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>AsyncImage<span class="token operator">></span>
  <span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'기본 props 전달 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>props<span class="token punctuation">.</span>image<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'이미지 파일 props 전달 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'test'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'./test.jpg'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'image/jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    wrapper<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> image<span class="token punctuation">:</span> file <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>deep<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'setImage() 실행 시 이미지 파일명 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    wrapper<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>image<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'.:test.jpg'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'shouldComponentUpdate 호출 시 반환값 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>
      wrapper<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">false</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>
      wrapper
        <span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> image<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token string">'test3'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>

    <span class="token function">expect</span><span class="token punctuation">(</span>
      wrapper<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">shouldComponentUpdate</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        image<span class="token punctuation">:</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> undefined <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span>be<span class="token punctuation">.</span><span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'componentDidUpdate 호출 후 이미지 파일명 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'test1'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'./test1.jpg'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      type<span class="token punctuation">:</span> <span class="token string">'image/jpg'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    wrapper<span class="token punctuation">.</span><span class="token function">setProps</span><span class="token punctuation">(</span><span class="token punctuation">{</span> image<span class="token punctuation">:</span> file <span class="token punctuation">}</span><span class="token punctuation">)</span>
    wrapper<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">componentDidUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>image<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'.:test1.jpg'</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'function as child props 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> childWrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>image<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>childWrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>alt<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'.:test1.jpg'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>앞선 코드에서 따로 설명하진 않았지만 이미지 파일에 대한 <code class="language-text">Drag &amp; Drop</code> 기능을 제공하는 컴포넌트에 대한 테스트 코드에 대한 내용이다. 컴포넌트에 대한 검증 시 <code class="language-text">File</code> 객체를 활용한 컴포넌트 호출 시 props로 전달받은 이미지 파일 정보가 정상적으로 state에 반영하는 지에 대해 테스트를 검증했다.</p>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'&lt;Chat />'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">initStore</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> router <span class="token operator">=</span> <span class="token punctuation">{</span> query<span class="token punctuation">:</span> <span class="token punctuation">{</span> room<span class="token punctuation">:</span> <span class="token string">'moon'</span> <span class="token punctuation">}</span> <span class="token punctuation">}</span>
  <span class="token keyword">const</span> props <span class="token operator">=</span> <span class="token punctuation">{</span>
    classes<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">const</span> user <span class="token operator">=</span> <span class="token punctuation">{</span>
    userId<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
    socketId<span class="token punctuation">:</span> <span class="token string">'user'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>

  store<span class="token punctuation">.</span>chat<span class="token punctuation">.</span><span class="token function">setUser</span><span class="token punctuation">(</span>user<span class="token punctuation">)</span>

  <span class="token keyword">const</span> wrapper <span class="token operator">=</span> <span class="token function">mount</span><span class="token punctuation">(</span>
    <span class="token function">shallow</span><span class="token punctuation">(</span><span class="token function">shallow</span><span class="token punctuation">(</span><span class="token operator">&lt;</span>Chat router<span class="token operator">=</span><span class="token punctuation">{</span>router<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>store<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span> <span class="token operator">/</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span>
      <span class="token number">0</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  <span class="token keyword">const</span> wrappedComponent <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">childAt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">childAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> <span class="token punctuation">{</span> chat <span class="token punctuation">}</span> <span class="token operator">=</span> wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  wrapper<span class="token punctuation">.</span><span class="token function">setState</span><span class="token punctuation">(</span><span class="token punctuation">{</span> messages<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

  chat<span class="token punctuation">.</span><span class="token function">connect</span><span class="token punctuation">(</span><span class="token string">'http://localhost:9002'</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'props 확인'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>wrapper<span class="token punctuation">.</span><span class="token function">props</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>router<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>router<span class="token punctuation">)</span>
    <span class="token function">expect</span><span class="token punctuation">(</span>chat<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span>store<span class="token punctuation">.</span>chat<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'사용자 채널 입장 시 동작 확인 및 receiveMessage() 호출 시 상태 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    chat<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      wrappedComponent<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrappedComponent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>messages<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    chat<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'join'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      room<span class="token punctuation">:</span> <span class="token string">'moon'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'sendMessage() 호출 시 chat socket 동작 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    wrappedComponent
      <span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token punctuation">:</span> <span class="token string">'text'</span><span class="token punctuation">,</span> message<span class="token punctuation">:</span> <span class="token string">'test입니다'</span><span class="token punctuation">,</span> images<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    chat<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'chat'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> messages <span class="token punctuation">}</span> <span class="token operator">=</span> data
      <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> messages
      wrappedComponent<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'test입니다'</span><span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrappedComponent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>messages<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'leave socket 동작 확인 및 receiveMessage() 호출 시 동작 상태 확인'</span><span class="token punctuation">,</span> done <span class="token operator">=></span> <span class="token punctuation">{</span>
    chat<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">emit</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      user<span class="token punctuation">,</span>
      room<span class="token punctuation">:</span> <span class="token string">'moon'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    chat<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'leave'</span><span class="token punctuation">,</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> messages <span class="token punctuation">}</span> <span class="token operator">=</span> data
      <span class="token keyword">const</span> <span class="token punctuation">{</span> user<span class="token punctuation">,</span> type<span class="token punctuation">,</span> message <span class="token punctuation">}</span> <span class="token operator">=</span> messages
      <span class="token function">expect</span><span class="token punctuation">(</span>user<span class="token punctuation">.</span>userId<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>type<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'info'</span><span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token string">'user님이 퇴장했습니다.'</span><span class="token punctuation">)</span>
      wrappedComponent<span class="token punctuation">.</span><span class="token function">instance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">receiveMessage</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>wrappedComponent<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>messages<span class="token punctuation">.</span>length<span class="token punctuation">)</span><span class="token punctuation">.</span>to<span class="token punctuation">.</span><span class="token function">equal</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
      <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>소켓 연동과 관련된 컴포넌트의 경우 소켓 전용 테스트 서버를 통해 소켓 송/수신 컴포넌트를 테스트할 수 있도록 구현했다. 위 코드는 채팅방 접속 관련된 컴포넌트의 테스트 코드이며 테스트 실행 시 소켓 전용 테스트 서버 실행 후 임의의 사용자를 생성한 뒤 채널 입장/퇴장 및 채팅 메시지에 대한 테스트를 실행하고 있다.</p>
<h3>Server</h3>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'express'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'http'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">createServer</span><span class="token punctuation">(</span>express<span class="token punctuation">)</span>
<span class="token keyword">const</span> chatServer <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./chat'</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> port <span class="token operator">=</span> <span class="token function">parseInt</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PORT</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token number">3000</span>
<span class="token function">chatServer</span><span class="token punctuation">(</span>server<span class="token punctuation">)</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span>port<span class="token punctuation">,</span> err <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">throw</span> err
  <span class="token punctuation">}</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`> Ready on port </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>port<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>소켓 연동과 관련한 테스트 서버의 경우 기존에 사용했던 소켓 서버를 활용하여 구현했다.</p>
<h2>글을 마치며</h2>
<p>지금까지 Next.js 와 socket.io를 활용한 채팅 앱에 대한 구현 내용들을 정리했다. 구현한 앱의 경우 아직 부족한 부분도 많고 더 추가하고 싶은 기능들이 많다. </p>
<p>몇 가지 정리하자면 </p>
<ul>
<li>Storybook 또는 Selenium을 활용한 UI 및 통합 테스트 환경 구현</li>
<li>typescript를 활용한 리팩토링</li>
<li>컴포넌트 퍼포먼스 개선 및 최적화</li>
<li>사용자간 1대 1 채팅창 기능 구현 등 부족하다고 생각되는 서비스 추가</li>
<li>firebase 를 활용한 배포 기능 추가
등이 있으며 이 외에도 성능 개선과 관련하여 여러가지 시도를 해볼 수 있도록 하고 싶다. </li>
</ul>
<p>사실 얼마전부터 개인적인 사정으로 인해 블로그 정리뿐만 아니라 개인적인 개발공부에 소홀히 했던 것 같다. 현재 글도 굉장히 오랫만에 쓰는 것 같아 많이 정리가 안되어 있다. 하지만 이제 어느정도 개인적이나 업무적으로 여유가 생겼기 때문에 앞서 다 하지 못한 개발 공부 및 블로그 글 작성에 대한 시간을 꾸준히 가질 수 있도록 하자.</p></div></div></div><div class="jss158 jss197"><div class="jss29 jss32 jss30 jss153"><div id="disqus_thread"></div></div></div><div class="jss157 jss165 jss177 jss282"><a class="jss66 jss255 jss266 jss267 jss269 jss270" tabindex="0" role="button" href="/2019/03/isomorphic-spa-using-nextjs/"><span class="jss256"><span class="material-icons jss140 fas fa-arrow-left jss283" aria-hidden="true"></span><span class="jss78 jss89 jss107 jss104 jss285">Next.js를 활용한 SPA 개발</span></span></a><a class="jss66 jss255 jss266 jss267 jss269 jss270" tabindex="0" role="button" href="/2019/03/blog-site-using-gatsbyjs/"><span class="jss256"><span class="jss78 jss89 jss107 jss104 jss285">Gatsby.js 를 활용한 블로그 개발</span><span class="material-icons jss140 fas fa-arrow-right jss284" aria-hidden="true"></span></span></a></div></div></div><div class="jss286"><div class="jss158 jss197"><h6 class="jss78 jss97 jss107 jss101">Copyright © 2018. pjb0811 All rights reserved.</h6><div class="jss287"><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="https://github.com/pjb0811" class="icon"><span class="material-icons jss140 jss147 fab fa-github" aria-hidden="true"></span></a></span></button><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="mailto:pjb0811@gmail.com" class="icon"><span class="material-icons jss140 jss147 far fa-envelope" aria-hidden="true"></span></a></span></button><button class="jss66 jss60 jss61" tabindex="0" type="button"><span class="jss65"><a href="/rss.xml" class="icon"><span class="material-icons jss140 jss147 fas fa-rss" aria-hidden="true"></span></a></span></button></div><h6 class="jss78 jss97 jss107 jss101 jss289">Powered by<!-- --> <a href="https://www.gatsbyjs.org/"><img src="/static/gatsby-4a9773549091c227cd2eb82ccd9c5e3a.png" alt="gatsby" class="jss288"/></a></h6></div></div></div></div><script>
  window.excludeGAPaths=[/^(?:\/)$/,/^(?:\/tags)$/,/^(?:\/tags\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/tags\/(?:(?!(?:\/|^)\.).)*?\/)$/,/^(?:\/analysis)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-79751268-3', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-pages-blog-post-jsx","jsonName":"2019-03-chat-app-using-socket-io-802","path":"/2019/03/chat-app-using-socket.io/"};window.dataPath="890/path---2019-03-chat-app-using-socket-io-802-f3d-rNK7XMdFUdMjWPn9cSkxBgahY";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-40c16a4b182bc5eccdc8.js"],"component---src-components-pages-index-jsx":["/component---src-components-pages-index-jsx-d6a79ec2e1d0316300e3.js"],"component---src-components-pages-blog-post-jsx":["/component---src-components-pages-blog-post-jsx-013a24c4cedcfe488718.js"],"component---src-components-pages-tags-jsx":["/component---src-components-pages-tags-jsx-d74b12368e339ee869d1.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-be6785eb1486c3822fae.js"],"component---src-pages-analysis-jsx":["/component---src-pages-analysis-jsx-7254d2d1ba54c5a868fd.js"],"component---src-pages-tags-jsx":["/component---src-pages-tags-jsx-c462854e177cd713d652.js"]};/*]]>*/</script><script src="/webpack-runtime-cb1c6b21ac8bd64ad6e1.js" async=""></script><script src="/1-9012b18bbf7c4801a02a.js" async=""></script><script src="/12-3fbb8ef08e6edcdbe876.js" async=""></script><script src="/0-ed4a268c130d8b842148.js" async=""></script><script src="/app-40c16a4b182bc5eccdc8.js" async=""></script><script src="/component---src-components-pages-blog-post-jsx-013a24c4cedcfe488718.js" async=""></script></body></html>