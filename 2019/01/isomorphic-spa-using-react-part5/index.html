<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/1.efbeb78c60f66d75c538.css">@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:100;src:local("Roboto Thin "),local("Roboto-Thin"),url(/static/roboto-latin-100-987b84570ea69ee660455b8d5e91f5f1.woff2) format("woff2"),url(/static/roboto-latin-100-e9dbbe8a693dd275c16d32feb101f1c1.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:100;src:local("Roboto Thin italic"),local("Roboto-Thinitalic"),url(/static/roboto-latin-100italic-6232f43d15b0e7a0bf0fe82e295bdd06.woff2) format("woff2"),url(/static/roboto-latin-100italic-d704bb3d579b7d5e40880c75705c8a71.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:300;src:local("Roboto Light "),local("Roboto-Light"),url(/static/roboto-latin-300-55536c8e9e9a532651e3cf374f290ea3.woff2) format("woff2"),url(/static/roboto-latin-300-a1471d1d6431c893582a5f6a250db3f9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:300;src:local("Roboto Light italic"),local("Roboto-Lightitalic"),url(/static/roboto-latin-300italic-d69924b98acd849cdeba9fbff3f88ea6.woff2) format("woff2"),url(/static/roboto-latin-300italic-210a7c781f5a354a0e4985656ab456d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:400;src:local("Roboto Regular "),local("Roboto-Regular"),url(/static/roboto-latin-400-5d4aeb4e5f5ef754e307d7ffaef688bd.woff2) format("woff2"),url(/static/roboto-latin-400-bafb105baeb22d965c70fe52ba6b49d9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:400;src:local("Roboto Regular italic"),local("Roboto-Regularitalic"),url(/static/roboto-latin-400italic-d8bcbe724fd6f4ba44d0ee6a2675890f.woff2) format("woff2"),url(/static/roboto-latin-400italic-9680d5a0c32d2fd084e07bbc4c8b2923.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:500;src:local("Roboto Medium "),local("Roboto-Medium"),url(/static/roboto-latin-500-285467176f7fe6bb6a9c6873b3dad2cc.woff2) format("woff2"),url(/static/roboto-latin-500-de8b7431b74642e830af4d4f4b513ec9.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:500;src:local("Roboto Medium italic"),local("Roboto-Mediumitalic"),url(/static/roboto-latin-500italic-510dec37fa69fba39593e01a469ee018.woff2) format("woff2"),url(/static/roboto-latin-500italic-ffcc050b2d92d4b14a4fcb527ee0bcc8.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:700;src:local("Roboto Bold "),local("Roboto-Bold"),url(/static/roboto-latin-700-037d830416495def72b7881024c14b7b.woff2) format("woff2"),url(/static/roboto-latin-700-cf6613d1adf490972c557a8e318e0868.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:700;src:local("Roboto Bold italic"),local("Roboto-Bolditalic"),url(/static/roboto-latin-700italic-010c1aeee3c6d1cbb1d5761d80353823.woff2) format("woff2"),url(/static/roboto-latin-700italic-846d1890aee87fde5d8ced8eba360c3a.woff) format("woff")}@font-face{font-family:Roboto;font-style:normal;font-display:swap;font-weight:900;src:local("Roboto Black "),local("Roboto-Black"),url(/static/roboto-latin-900-19b7a0adfdd4f808b53af7e2ce2ad4e5.woff2) format("woff2"),url(/static/roboto-latin-900-8c2ade503b34e31430d6c98aa29a52a3.woff) format("woff")}@font-face{font-family:Roboto;font-style:italic;font-display:swap;font-weight:900;src:local("Roboto Black italic"),local("Roboto-Blackitalic"),url(/static/roboto-latin-900italic-7b770d6c53423deb1a8e49d3c9175184.woff2) format("woff2"),url(/static/roboto-latin-900italic-bc833e725c137257c2c42a789845d82f.woff) format("woff")}</style><style data-href="/12.ad898c44026f788f7d59.css">@font-face{font-family:octicons-link;src:url(data:font/woff;charset=utf-8;base64,d09GRgABAAAAAAZwABAAAAAACFQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABEU0lHAAAGaAAAAAgAAAAIAAAAAUdTVUIAAAZcAAAACgAAAAoAAQAAT1MvMgAAAyQAAABJAAAAYFYEU3RjbWFwAAADcAAAAEUAAACAAJThvmN2dCAAAATkAAAABAAAAAQAAAAAZnBnbQAAA7gAAACyAAABCUM+8IhnYXNwAAAGTAAAABAAAAAQABoAI2dseWYAAAFsAAABPAAAAZwcEq9taGVhZAAAAsgAAAA0AAAANgh4a91oaGVhAAADCAAAABoAAAAkCA8DRGhtdHgAAAL8AAAADAAAAAwGAACfbG9jYQAAAsAAAAAIAAAACABiATBtYXhwAAACqAAAABgAAAAgAA8ASm5hbWUAAAToAAABQgAAAlXu73sOcG9zdAAABiwAAAAeAAAAME3QpOBwcmVwAAAEbAAAAHYAAAB/aFGpk3jaTY6xa8JAGMW/O62BDi0tJLYQincXEypYIiGJjSgHniQ6umTsUEyLm5BV6NDBP8Tpts6F0v+k/0an2i+itHDw3v2+9+DBKTzsJNnWJNTgHEy4BgG3EMI9DCEDOGEXzDADU5hBKMIgNPZqoD3SilVaXZCER3/I7AtxEJLtzzuZfI+VVkprxTlXShWKb3TBecG11rwoNlmmn1P2WYcJczl32etSpKnziC7lQyWe1smVPy/Lt7Kc+0vWY/gAgIIEqAN9we0pwKXreiMasxvabDQMM4riO+qxM2ogwDGOZTXxwxDiycQIcoYFBLj5K3EIaSctAq2kTYiw+ymhce7vwM9jSqO8JyVd5RH9gyTt2+J/yUmYlIR0s04n6+7Vm1ozezUeLEaUjhaDSuXHwVRgvLJn1tQ7xiuVv/ocTRF42mNgZGBgYGbwZOBiAAFGJBIMAAizAFoAAABiAGIAznjaY2BkYGAA4in8zwXi+W2+MjCzMIDApSwvXzC97Z4Ig8N/BxYGZgcgl52BCSQKAA3jCV8CAABfAAAAAAQAAEB42mNgZGBg4f3vACQZQABIMjKgAmYAKEgBXgAAeNpjYGY6wTiBgZWBg2kmUxoDA4MPhGZMYzBi1AHygVLYQUCaawqDA4PChxhmh/8ODDEsvAwHgMKMIDnGL0x7gJQCAwMAJd4MFwAAAHjaY2BgYGaA4DAGRgYQkAHyGMF8NgYrIM3JIAGVYYDT+AEjAwuDFpBmA9KMDEwMCh9i/v8H8sH0/4dQc1iAmAkALaUKLgAAAHjaTY9LDsIgEIbtgqHUPpDi3gPoBVyRTmTddOmqTXThEXqrob2gQ1FjwpDvfwCBdmdXC5AVKFu3e5MfNFJ29KTQT48Ob9/lqYwOGZxeUelN2U2R6+cArgtCJpauW7UQBqnFkUsjAY/kOU1cP+DAgvxwn1chZDwUbd6CFimGXwzwF6tPbFIcjEl+vvmM/byA48e6tWrKArm4ZJlCbdsrxksL1AwWn/yBSJKpYbq8AXaaTb8AAHja28jAwOC00ZrBeQNDQOWO//sdBBgYGRiYWYAEELEwMTE4uzo5Zzo5b2BxdnFOcALxNjA6b2ByTswC8jYwg0VlNuoCTWAMqNzMzsoK1rEhNqByEyerg5PMJlYuVueETKcd/89uBpnpvIEVomeHLoMsAAe1Id4AAAAAAAB42oWQT07CQBTGv0JBhagk7HQzKxca2sJCE1hDt4QF+9JOS0nbaaYDCQfwCJ7Au3AHj+LO13FMmm6cl7785vven0kBjHCBhfpYuNa5Ph1c0e2Xu3jEvWG7UdPDLZ4N92nOm+EBXuAbHmIMSRMs+4aUEd4Nd3CHD8NdvOLTsA2GL8M9PODbcL+hD7C1xoaHeLJSEao0FEW14ckxC+TU8TxvsY6X0eLPmRhry2WVioLpkrbp84LLQPGI7c6sOiUzpWIWS5GzlSgUzzLBSikOPFTOXqly7rqx0Z1Q5BAIoZBSFihQYQOOBEdkCOgXTOHA07HAGjGWiIjaPZNW13/+lm6S9FT7rLHFJ6fQbkATOG1j2OFMucKJJsxIVfQORl+9Jyda6Sl1dUYhSCm1dyClfoeDve4qMYdLEbfqHf3O/AdDumsjAAB42mNgYoAAZQYjBmyAGYQZmdhL8zLdDEydARfoAqIAAAABAAMABwAKABMAB///AA8AAQAAAAAAAAAAAAAAAAABAAAAAA==) format("woff")}.markdown-body{-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%;color:#24292e;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Helvetica,Arial,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol;font-size:16px;line-height:1.5;word-wrap:break-word}.markdown-body .pl-c{color:#6a737d}.markdown-body .pl-c1,.markdown-body .pl-s .pl-v{color:#005cc5}.markdown-body .pl-e,.markdown-body .pl-en{color:#6f42c1}.markdown-body .pl-s .pl-s1,.markdown-body .pl-smi{color:#24292e}.markdown-body .pl-ent{color:#22863a}.markdown-body .pl-k{color:#d73a49}.markdown-body .pl-pds,.markdown-body .pl-s,.markdown-body .pl-s .pl-pse .pl-s1,.markdown-body .pl-sr,.markdown-body .pl-sr .pl-cce,.markdown-body .pl-sr .pl-sra,.markdown-body .pl-sr .pl-sre{color:#032f62}.markdown-body .pl-smw,.markdown-body .pl-v{color:#e36209}.markdown-body .pl-bu{color:#b31d28}.markdown-body .pl-ii{color:#fafbfc;background-color:#b31d28}.markdown-body .pl-c2{color:#fafbfc;background-color:#d73a49}.markdown-body .pl-c2:before{content:"^M"}.markdown-body .pl-sr .pl-cce{font-weight:700;color:#22863a}.markdown-body .pl-ml{color:#735c0f}.markdown-body .pl-mh,.markdown-body .pl-mh .pl-en,.markdown-body .pl-ms{font-weight:700;color:#005cc5}.markdown-body .pl-mi{font-style:italic;color:#24292e}.markdown-body .pl-mb{font-weight:700;color:#24292e}.markdown-body .pl-md{color:#b31d28;background-color:#ffeef0}.markdown-body .pl-mi1{color:#22863a;background-color:#f0fff4}.markdown-body .pl-mc{color:#e36209;background-color:#ffebda}.markdown-body .pl-mi2{color:#f6f8fa;background-color:#005cc5}.markdown-body .pl-mdr{font-weight:700;color:#6f42c1}.markdown-body .pl-ba{color:#586069}.markdown-body .pl-sg{color:#959da5}.markdown-body .pl-corl{text-decoration:underline;color:#032f62}.markdown-body .octicon{display:inline-block;vertical-align:text-top;fill:currentColor}.markdown-body a{background-color:transparent}.markdown-body a:active,.markdown-body a:hover{outline-width:0}.markdown-body strong{font-weight:inherit;font-weight:bolder}.markdown-body h1{margin:.67em 0}.markdown-body img{border-style:none}.markdown-body code,.markdown-body kbd,.markdown-body pre{font-family:monospace,monospace;font-size:1em}.markdown-body hr{box-sizing:content-box;overflow:visible}.markdown-body input{font:inherit;margin:0;overflow:visible}.markdown-body [type=checkbox]{box-sizing:border-box;padding:0}.markdown-body *{box-sizing:border-box}.markdown-body input{font-family:inherit;font-size:inherit;line-height:inherit}.markdown-body a{color:#0366d6;text-decoration:none}.markdown-body a:hover{text-decoration:underline}.markdown-body strong{font-weight:600}.markdown-body hr{height:0;margin:15px 0;overflow:hidden;background:transparent;border-bottom:1px solid #dfe2e5}.markdown-body hr:after,.markdown-body hr:before{display:table;content:""}.markdown-body hr:after{clear:both}.markdown-body table{border-spacing:0;border-collapse:collapse}.markdown-body td,.markdown-body th{padding:0}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:0;margin-bottom:0}.markdown-body h1{font-size:32px;font-weight:600}.markdown-body h2{font-size:24px;font-weight:600}.markdown-body h3{font-size:20px;font-weight:600}.markdown-body h4{font-size:16px;font-weight:600}.markdown-body h5{font-size:14px;font-weight:600}.markdown-body h6{font-size:12px;font-weight:600}.markdown-body p{margin-top:0;margin-bottom:10px}.markdown-body blockquote{margin:0}.markdown-body ol,.markdown-body ul{padding-left:0;margin-top:0;margin-bottom:0}.markdown-body ol ol,.markdown-body ul ol{list-style-type:lower-roman}.markdown-body ol ol ol,.markdown-body ol ul ol,.markdown-body ul ol ol,.markdown-body ul ul ol{list-style-type:lower-alpha}.markdown-body dd{margin-left:0}.markdown-body code,.markdown-body pre{font-family:SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;font-size:12px}.markdown-body pre{margin-top:0;margin-bottom:0}.markdown-body .octicon{vertical-align:text-bottom}.markdown-body .pl-0{padding-left:0!important}.markdown-body .pl-1{padding-left:4px!important}.markdown-body .pl-2{padding-left:8px!important}.markdown-body .pl-3{padding-left:16px!important}.markdown-body .pl-4{padding-left:24px!important}.markdown-body .pl-5{padding-left:32px!important}.markdown-body .pl-6{padding-left:40px!important}.markdown-body:after,.markdown-body:before{display:table;content:""}.markdown-body:after{clear:both}.markdown-body>:first-child{margin-top:0!important}.markdown-body>:last-child{margin-bottom:0!important}.markdown-body a:not([href]){color:inherit;text-decoration:none}.markdown-body .anchor{float:left;padding-right:4px;margin-left:-20px;line-height:1}.markdown-body .anchor:focus{outline:none}.markdown-body blockquote,.markdown-body dl,.markdown-body ol,.markdown-body p,.markdown-body pre,.markdown-body table,.markdown-body ul{margin-top:0;margin-bottom:16px}.markdown-body hr{height:.25em;padding:0;margin:24px 0;background-color:#e1e4e8;border:0}.markdown-body blockquote{padding:0 1em;color:#6a737d;border-left:.25em solid #dfe2e5}.markdown-body blockquote>:first-child{margin-top:0}.markdown-body blockquote>:last-child{margin-bottom:0}.markdown-body kbd{font-size:11px;border:1px solid #c6cbd1;border-bottom-color:#959da5;box-shadow:inset 0 -1px 0 #959da5}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{margin-top:24px;margin-bottom:16px;font-weight:600;line-height:1.25}.markdown-body h1 .octicon-link,.markdown-body h2 .octicon-link,.markdown-body h3 .octicon-link,.markdown-body h4 .octicon-link,.markdown-body h5 .octicon-link,.markdown-body h6 .octicon-link{color:#1b1f23;vertical-align:middle;visibility:hidden}.markdown-body h1:hover .anchor,.markdown-body h2:hover .anchor,.markdown-body h3:hover .anchor,.markdown-body h4:hover .anchor,.markdown-body h5:hover .anchor,.markdown-body h6:hover .anchor{text-decoration:none}.markdown-body h1:hover .anchor .octicon-link,.markdown-body h2:hover .anchor .octicon-link,.markdown-body h3:hover .anchor .octicon-link,.markdown-body h4:hover .anchor .octicon-link,.markdown-body h5:hover .anchor .octicon-link,.markdown-body h6:hover .anchor .octicon-link{visibility:visible}.markdown-body h1{font-size:2em}.markdown-body h1,.markdown-body h2{padding-bottom:.3em;border-bottom:1px solid #eaecef}.markdown-body h2{font-size:1.5em}.markdown-body h3{font-size:1.25em}.markdown-body h4{font-size:1em}.markdown-body h5{font-size:.875em}.markdown-body h6{font-size:.85em;color:#6a737d}.markdown-body ol,.markdown-body ul{padding-left:2em}.markdown-body ol ol,.markdown-body ol ul,.markdown-body ul ol,.markdown-body ul ul{margin-top:0;margin-bottom:0}.markdown-body li{word-wrap:break-all}.markdown-body li>p{margin-top:16px}.markdown-body li+li{margin-top:.25em}.markdown-body dl{padding:0}.markdown-body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:600}.markdown-body dl dd{padding:0 16px;margin-bottom:16px}.markdown-body table{display:block;width:100%;overflow:auto}.markdown-body table th{font-weight:600}.markdown-body table td,.markdown-body table th{padding:6px 13px;border:1px solid #dfe2e5}.markdown-body table tr{background-color:#fff;border-top:1px solid #c6cbd1}.markdown-body table tr:nth-child(2n){background-color:#f6f8fa}.markdown-body img{max-width:100%;box-sizing:content-box;background-color:#fff}.markdown-body img[align=right]{padding-left:20px}.markdown-body img[align=left]{padding-right:20px}.markdown-body code{padding:.2em .4em;margin:0;font-size:85%;background-color:rgba(27,31,35,.05);border-radius:3px}.markdown-body pre{word-wrap:normal}.markdown-body pre>code{padding:0;margin:0;font-size:100%;word-break:normal;white-space:pre;background:transparent;border:0}.markdown-body .highlight{margin-bottom:16px}.markdown-body .highlight pre{margin-bottom:0;word-break:normal}.markdown-body .highlight pre,.markdown-body pre{padding:16px;overflow:auto;font-size:85%;line-height:1.45;background-color:#f6f8fa;border-radius:3px}.markdown-body pre code{display:inline;max-width:auto;padding:0;margin:0;overflow:visible;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}.markdown-body .full-commit .btn-outline:not(:disabled):hover{color:#005cc5;border-color:#005cc5}.markdown-body kbd{display:inline-block;padding:3px 5px;font:11px SFMono-Regular,Consolas,Liberation Mono,Menlo,Courier,monospace;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #d1d5da;border-bottom-color:#c6cbd1;border-radius:3px;box-shadow:inset 0 -1px 0 #c6cbd1}.markdown-body :checked+.radio-label{position:relative;z-index:1;border-color:#0366d6}.markdown-body .task-list-item{list-style-type:none}.markdown-body .task-list-item+.task-list-item{margin-top:3px}.markdown-body .task-list-item input{margin:0 .2em .25em -1.6em;vertical-align:middle}.markdown-body hr{border-bottom-color:#eee}</style><meta name="generator" content="Gatsby 2.0.22"/><style type="text/css" id="jss-server-side">.MuiPaper-root {
  background-color: #fff;
}
.MuiPaper-rounded {
  border-radius: 4px;
}
.MuiPaper-elevation0 {
  box-shadow: none;
}
.MuiPaper-elevation1 {
  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),0px 1px 1px 0px rgba(0, 0, 0, 0.14),0px 2px 1px -1px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation2 {
  box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation3 {
  box-shadow: 0px 1px 8px 0px rgba(0, 0, 0, 0.2),0px 3px 4px 0px rgba(0, 0, 0, 0.14),0px 3px 3px -2px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation4 {
  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2),0px 4px 5px 0px rgba(0, 0, 0, 0.14),0px 1px 10px 0px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation5 {
  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 5px 8px 0px rgba(0, 0, 0, 0.14),0px 1px 14px 0px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation6 {
  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation7 {
  box-shadow: 0px 4px 5px -2px rgba(0, 0, 0, 0.2),0px 7px 10px 1px rgba(0, 0, 0, 0.14),0px 2px 16px 1px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation8 {
  box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation9 {
  box-shadow: 0px 5px 6px -3px rgba(0, 0, 0, 0.2),0px 9px 12px 1px rgba(0, 0, 0, 0.14),0px 3px 16px 2px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation10 {
  box-shadow: 0px 6px 6px -3px rgba(0, 0, 0, 0.2),0px 10px 14px 1px rgba(0, 0, 0, 0.14),0px 4px 18px 3px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation11 {
  box-shadow: 0px 6px 7px -4px rgba(0, 0, 0, 0.2),0px 11px 15px 1px rgba(0, 0, 0, 0.14),0px 4px 20px 3px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation12 {
  box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation13 {
  box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 13px 19px 2px rgba(0, 0, 0, 0.14),0px 5px 24px 4px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation14 {
  box-shadow: 0px 7px 9px -4px rgba(0, 0, 0, 0.2),0px 14px 21px 2px rgba(0, 0, 0, 0.14),0px 5px 26px 4px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation15 {
  box-shadow: 0px 8px 9px -5px rgba(0, 0, 0, 0.2),0px 15px 22px 2px rgba(0, 0, 0, 0.14),0px 6px 28px 5px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation16 {
  box-shadow: 0px 8px 10px -5px rgba(0, 0, 0, 0.2),0px 16px 24px 2px rgba(0, 0, 0, 0.14),0px 6px 30px 5px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation17 {
  box-shadow: 0px 8px 11px -5px rgba(0, 0, 0, 0.2),0px 17px 26px 2px rgba(0, 0, 0, 0.14),0px 6px 32px 5px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation18 {
  box-shadow: 0px 9px 11px -5px rgba(0, 0, 0, 0.2),0px 18px 28px 2px rgba(0, 0, 0, 0.14),0px 7px 34px 6px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation19 {
  box-shadow: 0px 9px 12px -6px rgba(0, 0, 0, 0.2),0px 19px 29px 2px rgba(0, 0, 0, 0.14),0px 7px 36px 6px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation20 {
  box-shadow: 0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 20px 31px 3px rgba(0, 0, 0, 0.14),0px 8px 38px 7px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation21 {
  box-shadow: 0px 10px 13px -6px rgba(0, 0, 0, 0.2),0px 21px 33px 3px rgba(0, 0, 0, 0.14),0px 8px 40px 7px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation22 {
  box-shadow: 0px 10px 14px -6px rgba(0, 0, 0, 0.2),0px 22px 35px 3px rgba(0, 0, 0, 0.14),0px 8px 42px 7px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation23 {
  box-shadow: 0px 11px 14px -7px rgba(0, 0, 0, 0.2),0px 23px 36px 3px rgba(0, 0, 0, 0.14),0px 9px 44px 8px rgba(0, 0, 0, 0.12);
}
.MuiPaper-elevation24 {
  box-shadow: 0px 11px 15px -7px rgba(0, 0, 0, 0.2),0px 24px 38px 3px rgba(0, 0, 0, 0.14),0px 9px 46px 8px rgba(0, 0, 0, 0.12);
}
.MuiAppBar-root {
  width: 100%;
  display: flex;
  z-index: 1100;
  box-sizing: border-box;
  flex-shrink: 0;
  flex-direction: column;
}
.MuiAppBar-positionFixed {
  top: 0;
  left: auto;
  right: 0;
  position: fixed;
}
.MuiAppBar-positionAbsolute {
  top: 0;
  left: auto;
  right: 0;
  position: absolute;
}
.MuiAppBar-positionSticky {
  top: 0;
  left: auto;
  right: 0;
  position: sticky;
}
.MuiAppBar-positionStatic {
  position: static;
}
.MuiAppBar-positionRelative {
  position: relative;
}
.MuiAppBar-colorDefault {
  color: rgba(0, 0, 0, 0.87);
  background-color: #f5f5f5;
}
.MuiAppBar-colorPrimary {
  color: #fff;
  background-color: #448AFF;
}
.MuiAppBar-colorSecondary {
  color: rgba(0, 0, 0, 0.87);
  background-color: #EEEEEE;
}
.MuiToolbar-root {
  display: flex;
  position: relative;
  align-items: center;
}
.MuiToolbar-gutters {
  padding-left: 16px;
  padding-right: 16px;
}
@media (min-width:600px) {
  .MuiToolbar-gutters {
    padding-left: 24px;
    padding-right: 24px;
  }
}
.MuiToolbar-regular {
  min-height: 56px;
}
@media (min-width:0px) and (orientation: landscape) {
  .MuiToolbar-regular {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .MuiToolbar-regular {
    min-height: 64px;
  }
}
.MuiToolbar-dense {
  min-height: 48px;
}
.MuiTypography-root {
  margin: 0;
  display: block;
}
.MuiTypography-display4 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 7rem;
  font-weight: 300;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.14286em;
  margin-left: -.04em;
  letter-spacing: -.04em;
}
.MuiTypography-display3 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 3.5rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.30357em;
  margin-left: -.02em;
  letter-spacing: -.02em;
}
.MuiTypography-display2 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 2.8125rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.13333em;
  margin-left: -.02em;
}
.MuiTypography-display1 {
  color: rgba(0, 0, 0, 0.54);
  font-size: 2.125rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.20588em;
}
.MuiTypography-headline {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.5rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.35417em;
}
.MuiTypography-title {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.3125rem;
  font-weight: 500;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.16667em;
}
.MuiTypography-subheading {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-weight: 400;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.5em;
}
.MuiTypography-body2 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.01071em;
}
.MuiTypography-body1 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.5;
  letter-spacing: 0.00938em;
}
.MuiTypography-caption {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.66;
  letter-spacing: 0.03333em;
}
.MuiTypography-button {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.5;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
}
.MuiTypography-h1 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 6rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1;
  letter-spacing: -0.01562em;
}
.MuiTypography-h2 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 3.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 300;
  line-height: 1;
  letter-spacing: -0.00833em;
}
.MuiTypography-h3 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 3rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.04;
  letter-spacing: 0em;
}
.MuiTypography-h4 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 2.125rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.17;
  letter-spacing: 0.00735em;
}
.MuiTypography-h5 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.5rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.33;
  letter-spacing: 0em;
}
.MuiTypography-h6 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1.25rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.6;
  letter-spacing: 0.0075em;
}
.MuiTypography-subtitle1 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 1.75;
  letter-spacing: 0.00938em;
}
.MuiTypography-subtitle2 {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.875rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 500;
  line-height: 1.57;
  letter-spacing: 0.00714em;
}
.MuiTypography-overline {
  color: rgba(0, 0, 0, 0.87);
  font-size: 0.75rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  font-weight: 400;
  line-height: 2.66;
  letter-spacing: 0.08333em;
  text-transform: uppercase;
}
.MuiTypography-srOnly {
  width: 1px;
  height: 1px;
  position: absolute;
  overflow: hidden;
}
.MuiTypography-alignLeft {
  text-align: left;
}
.MuiTypography-alignCenter {
  text-align: center;
}
.MuiTypography-alignRight {
  text-align: right;
}
.MuiTypography-alignJustify {
  text-align: justify;
}
.MuiTypography-noWrap {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}
.MuiTypography-gutterBottom {
  margin-bottom: 0.35em;
}
.MuiTypography-paragraph {
  margin-bottom: 16px;
}
.MuiTypography-colorInherit {
  color: inherit;
}
.MuiTypography-colorPrimary {
  color: #448AFF;
}
.MuiTypography-colorSecondary {
  color: #EEEEEE;
}
.MuiTypography-colorTextPrimary {
  color: rgba(0, 0, 0, 0.87);
}
.MuiTypography-colorTextSecondary {
  color: rgba(0, 0, 0, 0.54);
}
.MuiTypography-colorError {
  color: #f44336;
}
.MuiButtonBase-root {
  color: inherit;
  cursor: pointer;
  margin: 0;
  border: 0;
  display: inline-flex;
  padding: 0;
  outline: none;
  position: relative;
  user-select: none;
  align-items: center;
  border-radius: 0;
  vertical-align: middle;
  justify-content: center;
  -moz-appearance: none;
  text-decoration: none;
  background-color: transparent;
  -webkit-appearance: none;
  -webkit-tap-highlight-color: transparent;
}
.MuiButtonBase-root::-moz-focus-inner {
  border-style: none;
}
.MuiButtonBase-root.MuiButtonBase-disabled {
  cursor: default;
  pointer-events: none;
}
.MuiIconButton-root {
  flex: 0 0 auto;
  color: rgba(0, 0, 0, 0.54);
  padding: 12px;
  overflow: visible;
  font-size: 1.5rem;
  text-align: center;
  transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  border-radius: 50%;
}
.MuiIconButton-root:hover {
  background-color: rgba(0, 0, 0, 0.08);
}
.MuiIconButton-root.MuiIconButton-disabled {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .MuiIconButton-root:hover {
    background-color: transparent;
  }
}
.MuiIconButton-root:hover.MuiIconButton-disabled {
  background-color: transparent;
}
.MuiIconButton-colorInherit {
  color: inherit;
}
.MuiIconButton-colorPrimary {
  color: #448AFF;
}
.MuiIconButton-colorPrimary:hover {
  background-color: rgba(68, 138, 255, 0.08);
}
@media (hover: none) {
  .MuiIconButton-colorPrimary:hover {
    background-color: transparent;
  }
}
.MuiIconButton-colorSecondary {
  color: #EEEEEE;
}
.MuiIconButton-colorSecondary:hover {
  background-color: rgba(238, 238, 238, 0.08);
}
@media (hover: none) {
  .MuiIconButton-colorSecondary:hover {
    background-color: transparent;
  }
}
.MuiIconButton-label {
  width: 100%;
  display: flex;
  align-items: inherit;
  justify-content: inherit;
}
.MuiSvgIcon-root {
  fill: currentColor;
  width: 1em;
  height: 1em;
  display: inline-block;
  font-size: 24px;
  transition: fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  user-select: none;
  flex-shrink: 0;
}
.MuiSvgIcon-colorPrimary {
  color: #448AFF;
}
.MuiSvgIcon-colorSecondary {
  color: #EEEEEE;
}
.MuiSvgIcon-colorAction {
  color: rgba(0, 0, 0, 0.54);
}
.MuiSvgIcon-colorError {
  color: #f44336;
}
.MuiSvgIcon-colorDisabled {
  color: rgba(0, 0, 0, 0.26);
}
.MuiSvgIcon-fontSizeInherit {
  font-size: inherit;
}
.MuiSvgIcon-fontSizeSmall {
  font-size: 20px;
}
.MuiSvgIcon-fontSizeLarge {
  font-size: 36px;
}
.MuiIcon-root {
  width: 1em;
  height: 1em;
  overflow: hidden;
  font-size: 24px;
  user-select: none;
  flex-shrink: 0;
}
.MuiIcon-colorPrimary {
  color: #448AFF;
}
.MuiIcon-colorSecondary {
  color: #EEEEEE;
}
.MuiIcon-colorAction {
  color: rgba(0, 0, 0, 0.54);
}
.MuiIcon-colorError {
  color: #f44336;
}
.MuiIcon-colorDisabled {
  color: rgba(0, 0, 0, 0.26);
}
.MuiIcon-fontSizeInherit {
  font-size: inherit;
}
.MuiIcon-fontSizeSmall {
  font-size: 20px;
}
.MuiIcon-fontSizeLarge {
  font-size: 36px;
}
.appMenu-sectionDesktop {
  display: none;
}
@media (min-width:600px) {
  .appMenu-sectionDesktop {
    display: flex;
  }
}
.MuiInputBase-root {
  color: rgba(0, 0, 0, 0.87);
  cursor: text;
  display: inline-flex;
  font-size: 1rem;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.1875em;
  align-items: center;
}
.MuiInputBase-root.MuiInputBase-disabled {
  color: rgba(0, 0, 0, 0.38);
  cursor: default;
}
.MuiInputBase-multiline {
  padding: 6px 0 7px;
}
.MuiInputBase-fullWidth {
  width: 100%;
}
.MuiInputBase-input {
  font: inherit;
  width: 100%;
  color: currentColor;
  border: 0;
  margin: 0;
  padding: 6px 0 7px;
  display: block;
  min-width: 0;
  box-sizing: content-box;
  background: none;
  -webkit-tap-highlight-color: transparent;
}
.MuiInputBase-input::-webkit-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.MuiInputBase-input::-moz-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.MuiInputBase-input:-ms-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.MuiInputBase-input::-ms-input-placeholder {
  color: currentColor;
  opacity: 0.42;
  transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
}
.MuiInputBase-input:focus {
  outline: 0;
}
.MuiInputBase-input:invalid {
  box-shadow: none;
}
.MuiInputBase-input::-webkit-search-decoration {
  -webkit-appearance: none;
}
.MuiInputBase-input.MuiInputBase-disabled {
  opacity: 1;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input::-webkit-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input::-moz-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input:-ms-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input::-ms-input-placeholder {
  opacity: 0;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input:focus::-webkit-input-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input:focus::-moz-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input:focus:-ms-input-placeholder {
  opacity: 0.42;
}
label[data-shrink=false] + .MuiInputBase-formControl .MuiInputBase-input:focus::-ms-input-placeholder {
  opacity: 0.42;
}
.MuiInputBase-inputMarginDense {
  padding-top: 3px;
}
.MuiInputBase-inputMultiline {
  resize: none;
  padding: 0;
}
.MuiInputBase-inputType {
  height: 1.1875em;
}
.MuiInputBase-inputTypeSearch {
  -moz-appearance: textfield;
  -webkit-appearance: textfield;
}
.searchList-popper {
  width: 100%;
  margin-top: 10px;
}
.searchList-list {
  overflow: auto;
  max-height: 300px;
}
.searchList-chips {
  display: flex;
  flex-wrap: wrap;
  justify-content: flex-start;
}
.searchList-chip {
  margin: 4px;
}
.searchBox-search {
  width: 100%;
  position: relative;
  margin-left: 0;
  margin-right: 16px;
  border-radius: 4px;
  background-color: rgba(255, 255, 255, 0.15);
}
.searchBox-search:hover {
  background-color: rgba(255, 255, 255, 0.25);
}
@media (min-width:600px) {
  .searchBox-search {
    width: auto;
    margin-left: 24px;
  }
}
.searchBox-searchIcon {
  width: 72px;
  height: 100%;
  display: flex;
  position: absolute;
  align-items: center;
  pointer-events: none;
  justify-content: center;
}
.searchBox-searchInputRoot {
  color: inherit;
  width: 100%;
}
.searchBox-searchInput {
  width: 100%;
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  padding-top: 8px;
  padding-left: 80px;
  padding-right: 8px;
  padding-bottom: 8px;
}
@media (min-width:960px) {
  .searchBox-searchInput {
    width: 200px;
  }
}
.MuiModal-root {
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1300;
  position: fixed;
}
.MuiModal-hidden {
  visibility: hidden;
}
.MuiDrawer-docked {
  flex: 0 0 auto;
}
.MuiDrawer-paper {
  top: 0;
  flex: 1 0 auto;
  height: 100%;
  display: flex;
  z-index: 1200;
  outline: none;
  position: fixed;
  overflow-y: auto;
  flex-direction: column;
  -webkit-overflow-scrolling: touch;
}
.MuiDrawer-paperAnchorLeft {
  left: 0;
  right: auto;
}
.MuiDrawer-paperAnchorRight {
  left: auto;
  right: 0;
}
.MuiDrawer-paperAnchorTop {
  top: 0;
  left: 0;
  right: 0;
  bottom: auto;
  height: auto;
  max-height: 100%;
}
.MuiDrawer-paperAnchorBottom {
  top: auto;
  left: 0;
  right: 0;
  bottom: 0;
  height: auto;
  max-height: 100%;
}
.MuiDrawer-paperAnchorDockedLeft {
  border-right: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedTop {
  border-bottom: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedRight {
  border-left: 1px solid rgba(0, 0, 0, 0.12);
}
.MuiDrawer-paperAnchorDockedBottom {
  border-top: 1px solid rgba(0, 0, 0, 0.12);
}
.appBar-root {
  width: 100%;
}
.appBar-grow {
  flex-grow: 1;
}
.appBar-space {
  min-height: 56px;
  margin-bottom: 10px;
}
@media (min-width:0px) and (orientation: landscape) {
  .appBar-space {
    min-height: 48px;
  }
}
@media (min-width:600px) {
  .appBar-space {
    min-height: 64px;
  }
}
.appBar-menuIcon {
  margin-left: -12px;
  margin-right: 20px;
}
.appBar-title {
  display: none;
}
@media (min-width:600px) {
  .appBar-title {
    display: block;
  }
}
.MuiGrid-container {
  width: 100%;
  display: flex;
  flex-wrap: wrap;
  box-sizing: border-box;
}
.MuiGrid-item {
  margin: 0;
  box-sizing: border-box;
}
.MuiGrid-zeroMinWidth {
  min-width: 0;
}
.MuiGrid-direction-xs-column {
  flex-direction: column;
}
.MuiGrid-direction-xs-column-reverse {
  flex-direction: column-reverse;
}
.MuiGrid-direction-xs-row-reverse {
  flex-direction: row-reverse;
}
.MuiGrid-wrap-xs-nowrap {
  flex-wrap: nowrap;
}
.MuiGrid-wrap-xs-wrap-reverse {
  flex-wrap: wrap-reverse;
}
.MuiGrid-align-items-xs-center {
  align-items: center;
}
.MuiGrid-align-items-xs-flex-start {
  align-items: flex-start;
}
.MuiGrid-align-items-xs-flex-end {
  align-items: flex-end;
}
.MuiGrid-align-items-xs-baseline {
  align-items: baseline;
}
.MuiGrid-align-content-xs-center {
  align-content: center;
}
.MuiGrid-align-content-xs-flex-start {
  align-content: flex-start;
}
.MuiGrid-align-content-xs-flex-end {
  align-content: flex-end;
}
.MuiGrid-align-content-xs-space-between {
  align-content: space-between;
}
.MuiGrid-align-content-xs-space-around {
  align-content: space-around;
}
.MuiGrid-justify-xs-center {
  justify-content: center;
}
.MuiGrid-justify-xs-flex-end {
  justify-content: flex-end;
}
.MuiGrid-justify-xs-space-between {
  justify-content: space-between;
}
.MuiGrid-justify-xs-space-around {
  justify-content: space-around;
}
.MuiGrid-justify-xs-space-evenly {
  justify-content: space-evenly;
}
.MuiGrid-spacing-xs-8 {
  width: calc(100% + 8px);
  margin: -4px;
}
.MuiGrid-spacing-xs-8 > .MuiGrid-item {
  padding: 4px;
}
.MuiGrid-spacing-xs-16 {
  width: calc(100% + 16px);
  margin: -8px;
}
.MuiGrid-spacing-xs-16 > .MuiGrid-item {
  padding: 8px;
}
.MuiGrid-spacing-xs-24 {
  width: calc(100% + 24px);
  margin: -12px;
}
.MuiGrid-spacing-xs-24 > .MuiGrid-item {
  padding: 12px;
}
.MuiGrid-spacing-xs-32 {
  width: calc(100% + 32px);
  margin: -16px;
}
.MuiGrid-spacing-xs-32 > .MuiGrid-item {
  padding: 16px;
}
.MuiGrid-spacing-xs-40 {
  width: calc(100% + 40px);
  margin: -20px;
}
.MuiGrid-spacing-xs-40 > .MuiGrid-item {
  padding: 20px;
}
.MuiGrid-grid-xs-auto {
  flex-grow: 0;
  max-width: none;
  flex-basis: auto;
}
.MuiGrid-grid-xs-true {
  flex-grow: 1;
  max-width: 100%;
  flex-basis: 0;
}
.MuiGrid-grid-xs-1 {
  flex-grow: 0;
  max-width: 8.333333%;
  flex-basis: 8.333333%;
}
.MuiGrid-grid-xs-2 {
  flex-grow: 0;
  max-width: 16.666667%;
  flex-basis: 16.666667%;
}
.MuiGrid-grid-xs-3 {
  flex-grow: 0;
  max-width: 25%;
  flex-basis: 25%;
}
.MuiGrid-grid-xs-4 {
  flex-grow: 0;
  max-width: 33.333333%;
  flex-basis: 33.333333%;
}
.MuiGrid-grid-xs-5 {
  flex-grow: 0;
  max-width: 41.666667%;
  flex-basis: 41.666667%;
}
.MuiGrid-grid-xs-6 {
  flex-grow: 0;
  max-width: 50%;
  flex-basis: 50%;
}
.MuiGrid-grid-xs-7 {
  flex-grow: 0;
  max-width: 58.333333%;
  flex-basis: 58.333333%;
}
.MuiGrid-grid-xs-8 {
  flex-grow: 0;
  max-width: 66.666667%;
  flex-basis: 66.666667%;
}
.MuiGrid-grid-xs-9 {
  flex-grow: 0;
  max-width: 75%;
  flex-basis: 75%;
}
.MuiGrid-grid-xs-10 {
  flex-grow: 0;
  max-width: 83.333333%;
  flex-basis: 83.333333%;
}
.MuiGrid-grid-xs-11 {
  flex-grow: 0;
  max-width: 91.666667%;
  flex-basis: 91.666667%;
}
.MuiGrid-grid-xs-12 {
  flex-grow: 0;
  max-width: 100%;
  flex-basis: 100%;
}
@media (min-width:600px) {
  .MuiGrid-grid-sm-auto {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .MuiGrid-grid-sm-true {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .MuiGrid-grid-sm-1 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .MuiGrid-grid-sm-2 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .MuiGrid-grid-sm-3 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .MuiGrid-grid-sm-4 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .MuiGrid-grid-sm-5 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .MuiGrid-grid-sm-6 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .MuiGrid-grid-sm-7 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .MuiGrid-grid-sm-8 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .MuiGrid-grid-sm-9 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .MuiGrid-grid-sm-10 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .MuiGrid-grid-sm-11 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .MuiGrid-grid-sm-12 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:960px) {
  .MuiGrid-grid-md-auto {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .MuiGrid-grid-md-true {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .MuiGrid-grid-md-1 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .MuiGrid-grid-md-2 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .MuiGrid-grid-md-3 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .MuiGrid-grid-md-4 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .MuiGrid-grid-md-5 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .MuiGrid-grid-md-6 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .MuiGrid-grid-md-7 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .MuiGrid-grid-md-8 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .MuiGrid-grid-md-9 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .MuiGrid-grid-md-10 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .MuiGrid-grid-md-11 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .MuiGrid-grid-md-12 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:1280px) {
  .MuiGrid-grid-lg-auto {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .MuiGrid-grid-lg-true {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .MuiGrid-grid-lg-1 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .MuiGrid-grid-lg-2 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .MuiGrid-grid-lg-3 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .MuiGrid-grid-lg-4 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .MuiGrid-grid-lg-5 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .MuiGrid-grid-lg-6 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .MuiGrid-grid-lg-7 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .MuiGrid-grid-lg-8 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .MuiGrid-grid-lg-9 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .MuiGrid-grid-lg-10 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .MuiGrid-grid-lg-11 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .MuiGrid-grid-lg-12 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
@media (min-width:1920px) {
  .MuiGrid-grid-xl-auto {
    flex-grow: 0;
    max-width: none;
    flex-basis: auto;
  }
  .MuiGrid-grid-xl-true {
    flex-grow: 1;
    max-width: 100%;
    flex-basis: 0;
  }
  .MuiGrid-grid-xl-1 {
    flex-grow: 0;
    max-width: 8.333333%;
    flex-basis: 8.333333%;
  }
  .MuiGrid-grid-xl-2 {
    flex-grow: 0;
    max-width: 16.666667%;
    flex-basis: 16.666667%;
  }
  .MuiGrid-grid-xl-3 {
    flex-grow: 0;
    max-width: 25%;
    flex-basis: 25%;
  }
  .MuiGrid-grid-xl-4 {
    flex-grow: 0;
    max-width: 33.333333%;
    flex-basis: 33.333333%;
  }
  .MuiGrid-grid-xl-5 {
    flex-grow: 0;
    max-width: 41.666667%;
    flex-basis: 41.666667%;
  }
  .MuiGrid-grid-xl-6 {
    flex-grow: 0;
    max-width: 50%;
    flex-basis: 50%;
  }
  .MuiGrid-grid-xl-7 {
    flex-grow: 0;
    max-width: 58.333333%;
    flex-basis: 58.333333%;
  }
  .MuiGrid-grid-xl-8 {
    flex-grow: 0;
    max-width: 66.666667%;
    flex-basis: 66.666667%;
  }
  .MuiGrid-grid-xl-9 {
    flex-grow: 0;
    max-width: 75%;
    flex-basis: 75%;
  }
  .MuiGrid-grid-xl-10 {
    flex-grow: 0;
    max-width: 83.333333%;
    flex-basis: 83.333333%;
  }
  .MuiGrid-grid-xl-11 {
    flex-grow: 0;
    max-width: 91.666667%;
    flex-basis: 91.666667%;
  }
  .MuiGrid-grid-xl-12 {
    flex-grow: 0;
    max-width: 100%;
    flex-basis: 100%;
  }
}
.footer-root {
  padding: 20px;
  background: #EEEEEE;
}
.footer-container {
  display: flex;
  justify-content: center;
}
.footer-gatsbyImg {
  width: 24px;
  height: 24px;
  margin-left: 10px;
  vertical-align: middle;
}
.footer-copyright {
  display: flex;
  align-items: center;
  justify-content: center;
}
html {
  box-sizing: border-box;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}
*, *::before, *::after {
  box-sizing: inherit;
}
body {
  margin: 0;
  background-color: #fafafa;
}
@media print {
  body {
    background-color: #fff;
  }
}
.imageCover-root {
  width: 100%;
  height: 400px;
  position: absolute;
}
.imageCover-img {
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  position: absolute;
  object-fit: cover;
  object-position: center center;
}
.imageCover-space {
  height: 300px;
}
.MuiButton-root {
  color: rgba(0, 0, 0, 0.87);
  padding: 8px 16px;
  font-size: 0.875rem;
  min-width: 64px;
  min-height: 36px;
  transition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,box-shadow 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms,border 250ms cubic-bezier(0.4, 0, 0.2, 1) 0ms;
  box-sizing: border-box;
  font-family: "Roboto", "Helvetica", "Arial", sans-serif;
  line-height: 1.5;
  font-weight: 500;
  border-radius: 4px;
  letter-spacing: 0.02857em;
  text-transform: uppercase;
}
.MuiButton-root:hover {
  text-decoration: none;
  background-color: rgba(0, 0, 0, 0.08);
}
.MuiButton-root.MuiButton-disabled {
  color: rgba(0, 0, 0, 0.26);
}
@media (hover: none) {
  .MuiButton-root:hover {
    background-color: transparent;
  }
}
.MuiButton-root:hover.MuiButton-disabled {
  background-color: transparent;
}
.MuiButton-label {
  width: 100%;
  display: inherit;
  align-items: inherit;
  justify-content: inherit;
}
.MuiButton-textPrimary {
  color: #448AFF;
}
.MuiButton-textPrimary:hover {
  background-color: rgba(68, 138, 255, 0.08);
}
@media (hover: none) {
  .MuiButton-textPrimary:hover {
    background-color: transparent;
  }
}
.MuiButton-textSecondary {
  color: #EEEEEE;
}
.MuiButton-textSecondary:hover {
  background-color: rgba(238, 238, 238, 0.08);
}
@media (hover: none) {
  .MuiButton-textSecondary:hover {
    background-color: transparent;
  }
}
.MuiButton-outlined {
  border: 1px solid rgba(0, 0, 0, 0.23);
}
.MuiButton-outlinedPrimary {
  border: 1px solid rgba(68, 138, 255, 0.5);
}
.MuiButton-outlinedPrimary:hover {
  border: 1px solid #448AFF;
}
.MuiButton-outlinedPrimary.MuiButton-disabled {
  border: 1px solid rgba(0, 0, 0, 0.26);
}
.MuiButton-outlinedSecondary {
  border: 1px solid rgba(238, 238, 238, 0.5);
}
.MuiButton-outlinedSecondary:hover {
  border: 1px solid #EEEEEE;
}
.MuiButton-outlinedSecondary.MuiButton-disabled {
  border: 1px solid rgba(0, 0, 0, 0.26);
}
.MuiButton-contained {
  color: rgba(0, 0, 0, 0.87);
  box-shadow: 0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12);
  background-color: #e0e0e0;
}
.MuiButton-contained.MuiButton-focusVisible {
  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12);
}
.MuiButton-contained:active {
  box-shadow: 0px 5px 5px -3px rgba(0, 0, 0, 0.2),0px 8px 10px 1px rgba(0, 0, 0, 0.14),0px 3px 14px 2px rgba(0, 0, 0, 0.12);
}
.MuiButton-contained.MuiButton-disabled {
  color: rgba(0, 0, 0, 0.26);
  box-shadow: none;
  background-color: rgba(0, 0, 0, 0.12);
}
.MuiButton-contained:hover {
  background-color: #d5d5d5;
}
@media (hover: none) {
  .MuiButton-contained:hover {
    background-color: #e0e0e0;
  }
}
.MuiButton-contained:hover.MuiButton-disabled {
  background-color: rgba(0, 0, 0, 0.12);
}
.MuiButton-containedPrimary {
  color: #fff;
  background-color: #448AFF;
}
.MuiButton-containedPrimary:hover {
  background-color: rgb(47, 96, 178);
}
@media (hover: none) {
  .MuiButton-containedPrimary:hover {
    background-color: #448AFF;
  }
}
.MuiButton-containedSecondary {
  color: rgba(0, 0, 0, 0.87);
  background-color: #EEEEEE;
}
.MuiButton-containedSecondary:hover {
  background-color: rgb(166, 166, 166);
}
@media (hover: none) {
  .MuiButton-containedSecondary:hover {
    background-color: #EEEEEE;
  }
}
.MuiButton-fab {
  width: 56px;
  height: 56px;
  padding: 0;
  min-width: 0;
  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),0px 6px 10px 0px rgba(0, 0, 0, 0.14),0px 1px 18px 0px rgba(0, 0, 0, 0.12);
  border-radius: 50%;
}
.MuiButton-fab:active {
  box-shadow: 0px 7px 8px -4px rgba(0, 0, 0, 0.2),0px 12px 17px 2px rgba(0, 0, 0, 0.14),0px 5px 22px 4px rgba(0, 0, 0, 0.12);
}
.MuiButton-extendedFab {
  width: auto;
  height: 48px;
  padding: 0 16px;
  min-width: 48px;
  border-radius: 24px;
}
.MuiButton-colorInherit {
  color: inherit;
}
.MuiButton-mini {
  width: 40px;
  height: 40px;
}
.MuiButton-sizeSmall {
  padding: 7px 8px;
  min-width: 64px;
  font-size: 0.8125rem;
  min-height: 32px;
}
.MuiButton-sizeLarge {
  padding: 8px 24px;
  min-width: 112px;
  font-size: 0.9375rem;
  min-height: 40px;
}
.MuiButton-fullWidth {
  width: 100%;
}
.moveButton-leftIcon {
  margin-right: 8px;
}
.moveButton-rightIcon {
  margin-left: 8px;
}
.moveButton-text {
  width: 100px;
}
.postNav-container {
  padding: 20px;
}
.pageTitle-title {
  margin-bottom: 20px;
}
.translationGuide-root {
  margin: 16px 0;
  padding: 8px;
  background: #EEEEEE;
}</style><link rel="alternate" type="application/rss+xml" title="pjb0811.github.io" href="/rss.xml"/><link rel="shortcut icon" href="/image/logo-192x192.png"/><link rel="manifest" href="/manifest.webmanifest"/><meta name="theme-color" content="#448AFF"/><title data-react-helmet="true">React를 활용한 isomorphic SPA 개발하기 - 5부</title><link data-react-helmet="true" rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" media="all"/><meta data-react-helmet="true" name="description" content="
&gt; 이번 파트는 전역 상태 관리 라이브러리인 `redux`를 활용한 내용을 정리했다. SPA 환경에서 전역 상태로 관리되는 데이터를 서버와 클라이언트 영역에서 어떻게 처리했는지에 대한 내용을 정리했다. "/><meta data-react-helmet="true" name="image" content="https://pjb0811.github.io/static/redux-4fff8d685687bacff24db95abaadd05b-178b9.png"/><meta data-react-helmet="true" name="og:url" content="https://pjb0811.github.io/2019/01/isomorphic-spa-using-react-part5/"/><meta data-react-helmet="true" name="og:type" content="article"/><meta data-react-helmet="true" name="og:title" content="React를 활용한 isomorphic SPA 개발하기 - 5부"/><meta data-react-helmet="true" name="og:description" content="
&gt; 이번 파트는 전역 상태 관리 라이브러리인 `redux`를 활용한 내용을 정리했다. SPA 환경에서 전역 상태로 관리되는 데이터를 서버와 클라이언트 영역에서 어떻게 처리했는지에 대한 내용을 정리했다. "/><meta data-react-helmet="true" name="og:image" content="https://pjb0811.github.io/static/redux-4fff8d685687bacff24db95abaadd05b-178b9.png"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;height:100%;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";height:100%;}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;width:100%;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:inherit;text-decoration:none;}a:hover,a:active{text-decoration:underline;}#___gatsby{height:100%;}#___gatsby>div{height:100%;}a:hover{text-decoration:none;}a.icon{display:inline-flex;;}.language-javascript .keyword{color:#d73a49;}.language-javascript .function{color:#6f42c1;}.language-javascript .number{color:#005cc5;}.language-javascript .boolean{color:#005cc5;}.language-typescript .keyword{color:#d73a49;}.language-typescript .function{color:#6f42c1;}.language-typescript .number{color:#005cc5;}.language-typescript .boolean{color:#005cc5;}.language-json .boolean{color:#005cc5;}figcaption{text-align:center;font-size:14px;}img[src*=".gif"]{display:block;margin:0 auto;}</style><link as="script" rel="preload" href="/component---src-components-pages-blog-post-jsx-6ece7e15387edb2847db.js"/><link as="script" rel="preload" href="/app-40c16a4b182bc5eccdc8.js"/><link as="script" rel="preload" href="/0-724affed024acf310ba2.js"/><link as="script" rel="preload" href="/12-6b8e8af5eed4a2ef6629.js"/><link as="script" rel="preload" href="/1-d1a755e5d630686ef986.js"/><link as="script" rel="preload" href="/webpack-runtime-3956f859ae1a8dc861f4.js"/><link rel="preload" href="/static/d/894/path---2019-01-isomorphic-spa-using-react-part-5-a-9-d-d11-7TohPdtvoT2OcWu8WNzGO8uUo.json" as="fetch" crossOrigin="use-credentials"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" role="group"><div classes="appBar-root"><header class="MuiPaper-root MuiPaper-elevation4 MuiAppBar-root MuiAppBar-positionFixed MuiAppBar-colorPrimary mui-fixed"><div class="MuiToolbar-root MuiToolbar-regular MuiToolbar-gutters"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit appBar-menuIcon" tabindex="0" type="button" aria-label="Menu"><span class="MuiIconButton-label"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path fill="none" d="M0 0h24v24H0z"></path><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"></path></svg></span></button><a class="MuiTypography-root MuiTypography-h6 MuiTypography-colorInherit appBar-title" href="/">pjb0811.github.io</a><div class="appBar-grow"></div><div class="searchBox-search"><div class="searchBox-searchIcon"><svg class="MuiSvgIcon-root" focusable="false" viewBox="0 0 24 24" aria-hidden="true" role="presentation"><path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path><path fill="none" d="M0 0h24v24H0z"></path></svg></div><div class="MuiInputBase-root searchBox-searchInputRoot"><input type="text" class="MuiInputBase-input searchBox-searchInput" placeholder="Search…"/></div></div><div class="appMenu-sectionDesktop"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="https://github.com/pjb0811" class="icon"><span class="material-icons MuiIcon-root fab fa-github" aria-hidden="true"></span></a></span></button><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="/tags" class="icon"><span class="material-icons MuiIcon-root fas fa-tag" aria-hidden="true"></span></a></span></button><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="/analysis" class="icon"><span class="material-icons MuiIcon-root fas fa-chart-bar" aria-hidden="true"></span></a></span></button></div></div></header></div><div class="appBar-space"></div><div class="imageCover-root"><img src="/static/redux-4fff8d685687bacff24db95abaadd05b-178b9.png" class="imageCover-img" alt="React를 활용한 isomorphic SPA 개발하기 - 5부"/></div><div class="imageCover-space"></div><div class="blogPost021"><div class="MuiGrid-container MuiGrid-spacing-xs-24 blogPost022"><div class="MuiGrid-item MuiGrid-grid-xs-12"><div class="MuiPaper-root MuiPaper-elevation1 MuiPaper-rounded blogPost025"><h3 class="MuiTypography-root MuiTypography-h3 pageTitle-title">React를 활용한 isomorphic SPA 개발하기 - 5부</h3><h6 class="MuiTypography-root MuiTypography-subtitle1 MuiTypography-alignRight">2019.01.22</h6><div class="blogPost023"><a class="MuiButtonBase-root MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-flat MuiButton-flatPrimary blogPost024" tabindex="0" role="button" href="/tags/react"><span class="MuiButton-label">react</span></a></div><div class="markdown-body"><blockquote>
<p>이번 파트는 전역 상태 관리 라이브러리인 <code class="language-text">redux</code>를 활용한 내용을 정리했다. SPA 환경에서 전역 상태로 관리되는 데이터를 서버와 클라이언트 영역에서 어떻게 처리했는지에 대한 내용을 정리했다. <!-- end -->이번 글 역시 스스로의 학습 내용을 정리하는 글이기 때문에 편한 말투로 작성했다.</p>
</blockquote>
<h2>redux</h2>
<p><code class="language-text">redux</code>는 JavaScript 개발 환경에서 대표적으로 사용되는 상태 관리 라이브러리이다. 말 그대로 JavaScript 환경에서는 어디든지 사용할 수 있기 때문에 VanillaJS 환경뿐만 아니라 특정 프레임워크 및 라이브러리로 구성된 프로젝트에 상관없이 사용 가능하다.</p>
<p>그래서 react 뿐만 아니라 vue.js, angular 등의 환경에서도 사용 가능한 걸로 알고 있는데, 이번 글에는 <code class="language-text">redux</code>의 간략한 개념정리 및 react 환경에서 <code class="language-text">redux</code>를 어떻게 활용했는지에 대한 내용만 정리하려 한다. 나 또한 <code class="language-text">redux</code>를 완벽히 다룬다고 생각하지 않으며 react 이외에 환경에서는 사용해보지 않아 설명할 내용도 없긴 하지만 나중에 공부해 보도록 하자</p>
<p>우선 react의 경우 컴포넌트 간 데이터 전달 시 부모로부터 자식 요소의 단방향 데이터 흐름을 강제한다. 이러한 구조는 순차적인 흐름으로써 사람이 갖고 있는 자연스러운 사고방식이기 때문에 데이터의 흐름을 쉽게 파악할 수 있고 관리하기도 편하다고 생각한다. 최근에는 <code class="language-text">Context API</code>라는 기능을 통해 기본적인 데이터 흐름을 벗어나 전역 상태를 관리할 수 있지만 내가 아직 많이 사용해보지 않았기 때문에 이 번 글에서는 따로 설명하지 않겠다.</p>
<p>아무튼 이러한 단방향 데이터 흐름의 경우 앱의 규모가 커지고 컴포넌트의 양이 늘어날 경우, 컴포넌트에서 사용하지 않는 데이터를 전달받는다든가 아니면 전역 데이터를 특정 부모 컴포넌트에 의존해야만 하는 경우도 생기게 된다. 결국 불필요하게 전달받는 데이터가 많아지면 데이터 구조가 복잡해지며 결국 컴포넌트의 상태를 관리하기가 힘들어지게 된다.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/data-flow-cd35d8dce7d99b99eb79384be259eee0-adc74.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 500px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 63%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsSAAALEgHS3X78AAACCElEQVQoz3VSbW+bMBDmR+/j/s76uZpUaWsnrQlZRcA4BQdCCOAkJGAgbRpBCAYMM6BmnbSdpZN95+deH6FtW0opAAAhZNu2oiimabbvwhjjOgj2OkLGfC6KYpIk3NI0DdfC8COKSBLHp9Npv98P7o+S5/np7Zi8vJIwoEVxtQsfPw3xrlJX9BhZxwCez0c/Zfbh4qc1Ze1f4KY7zUrTxxOxpLSzsJrr1z2c3H6+v/m0WY3cJH/4/m2xDrdpUzN2BXfZYg/rEGoIeZ7HymoooaIp2YCt/bALnUdoS4o60xBOsozWfco+c5EcoCwjTdtaS2k63ZlWm1/6BpojbS+MGQsVKEDHgaoCbWG/0abvsRWKLLOAanse8TD8+TibI6SqxPF6LMtoabg7AMUwDLQlnsoKeNZNZ93PpxGiOP719PRyOPD84mTioLkiSbazGroqioskSbqh8J0gXTcMwzQMVVHKsux6hhCSiIzuxmsTn/Nz5wNgNpthjNM01TTN3/lAgtIY0LLcbDZAVbnRNBdFUQjT6bSqyq83P57ljhuqCjlJLMtCOgrDcDQanS+ZImq3X+6513EcWZYxXnMUDy1UVTVsuOnHznrhr4FbjLH2//KHJAP4nZXd3Vlid4U9z+WF8Jy+7w/adV2+0bquhX+GHPZMgpiEEZ8Ir58QwmnLL3Ec8clzFvOifgOCN8kh3gkOrQAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="data-flow"
        title=""
        src="/static/data-flow-cd35d8dce7d99b99eb79384be259eee0-adc74.jpg"
        srcset="/static/data-flow-cd35d8dce7d99b99eb79384be259eee0-e40b4.jpg 148w,
/static/data-flow-cd35d8dce7d99b99eb79384be259eee0-ead33.jpg 295w,
/static/data-flow-cd35d8dce7d99b99eb79384be259eee0-adc74.jpg 500w"
        sizes="(max-width: 500px) 100vw, 500px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>이렇게 단향방 데이터의 흐름에서 벌어질 수 있는 단점을 보완하기 위해 위와 같이 상태 관리 라이브러리를 활용하여 컴포넌트의 종속되지 않고 데이터를 관리해 준다고 보면 될 것 같다(위 사진에는 <code class="language-text">redux</code>만 설명되어 있지만 <code class="language-text">mobx</code>도 같은 맥락으로 이해했다).</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/redux-cycle-4ffd05ad596b4d70fec4e1684dcb287c-67fb6.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 307px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 53.420195439739416%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABt0lEQVQoz3VRy27aQBTlG6ou+sVs2SBFZZFKLSuWlShiFeqW0tpFok6bxK5twOAH4zi2Z/AD2zPuHU9CNunRHek+5txnp2kaQgilFBTGuDRCniCcjAeaNE1N00QIiVCnKIrBYKBpWvuPQySaXc3eXV5+Go+FCYCfkiTFcSzL8nq95mRu/JD/GjpyQ/s2sq6D72OLnpov0uc3r14PP7zPcWOsDr9mThKRyWQynU5Ho5FlWZwMiaMoDsMQJyTDFX4okE0YbcD/9uIiTY9lzkL3uNfj8lQpPxVVVefzuei8k+c5aM7eIQSLzsVskC5JEoxxnmfn+cFvGIbneY8z+77veq5/8Gzb5mTKya7r6pq23W5hPb5/OCcNgmC3s03TyDKesQMPh0Xopu1mm/+Bk9toRsrokIsrcLK5QqrkCPsMGCdpAUs+3wwQo2zzJ3wmB3ti3z2AQmsq2ivLcrFYLJdLRVFgPVVJ4yA75VVdU7TD69+CzDj5GBfXXx1TDYwVaiVwNkjXNSieptmdduOa0beP1ubmHg55K3tQ7LlyW5PVFRcowmrouRgOh71er9vt9vv9qqwYfWER/wCELmDb29AW7wAAAABJRU5ErkJggg=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux-cycle"
        title=""
        src="/static/redux-cycle-4ffd05ad596b4d70fec4e1684dcb287c-67fb6.png"
        srcset="/static/redux-cycle-4ffd05ad596b4d70fec4e1684dcb287c-ee8a1.png 148w,
/static/redux-cycle-4ffd05ad596b4d70fec4e1684dcb287c-b8043.png 295w,
/static/redux-cycle-4ffd05ad596b4d70fec4e1684dcb287c-67fb6.png 307w"
        sizes="(max-width: 307px) 100vw, 307px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>위와 같이 <code class="language-text">redux</code>를 활용하면 흔히 <code class="language-text">store</code>라고 표현하는 단 하나의 데이터 저장소를 통해 컴포넌트의 종속되지 않고 데이터를 전달하기 위해 <code class="language-text">action</code>과 <code class="language-text">reducer</code>로 표현되는 개념들을 활용하여 상태를 관리해준다. 그림과 같이 상태값을 업데이트하기 위해 컴포넌트에서 <code class="language-text">action</code> 을 요청한 뒤 <code class="language-text">reducer</code> 에서 상태값을 변경한 후 <code class="language-text">store</code> 에 넘겨주게 되면 업데이트된 상태값을 통해 컴포넌트가 갱신되는 구조이다. 다만 이러한 개념을 이해하고 기본 설정부터 컴포넌트에 상태값을 연결하기 위해 <code class="language-text">redux</code>에서 제공하는 기능들을 이해하는 과정이 복잡하다고 생각하며 나 역시 이러한 부분을 이해하기가 쉽지 않았다.</p>
<p>사실 <code class="language-text">redux</code> 에 대해 좀 더 이해한 후 자세히 설명하고 싶지만 현재로서는 개인적인 지식이 아직 많이 부족하기 때문에 이쯤에서 정리하려고 한다. 나중에 시간이 되면 정리하도록 하고 우선 <code class="language-text">redux</code>를 어떻게 활용했는지 정리해보자.</p>
<h2>react-redux</h2>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/react-redux-321f364bd91c086d1f0df0121761ce44-90e0b.jpeg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 25.78125%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAFABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAMC/8QAFQEBAQAAAAAAAAAAAAAAAAAABAD/2gAMAwEAAhADEAAAAZ0GF0If/8QAFRABAQAAAAAAAAAAAAAAAAAAARD/2gAIAQEAAQUCL//EABcRAQADAAAAAAAAAAAAAAAAAAABAxH/2gAIAQMBAT8Bslr/xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/AT//xAAUEAEAAAAAAAAAAAAAAAAAAAAQ/9oACAEBAAY/An//xAAZEAEAAgMAAAAAAAAAAAAAAAARAAEQIUH/2gAIAQEAAT8h04ygDH//2gAMAwEAAgADAAAAEIQf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAEDAQE/EGlbf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABkQAQADAQEAAAAAAAAAAAAAAAEAEUEhUf/aAAgBAQABPxCiFA8Z2UW7pAKn/9k='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="react-redux"
        title=""
        src="/static/react-redux-321f364bd91c086d1f0df0121761ce44-f8fb9.jpeg"
        srcset="/static/react-redux-321f364bd91c086d1f0df0121761ce44-e8976.jpeg 148w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-63df2.jpeg 295w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-f8fb9.jpeg 590w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-85e3d.jpeg 885w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-d1924.jpeg 1180w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-9452e.jpeg 1770w,
/static/react-redux-321f364bd91c086d1f0df0121761ce44-90e0b.jpeg 1920w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>앞서 설명한대로 <code class="language-text">redux</code>는 JavaScript 환경에서 사용 가능하지만 react 개발 환경에서 좀 더 쉽게 사용할 수 있도록 <code class="language-text">react-redux</code>라는 라이브러리를 사용했다. 그리고 <code class="language-text">action</code> 구현을 쉽게 설정할 수 있는 <code class="language-text">redux-actions</code> 라이브러리를 사용했다. 우선 관련 라이브러리를 설치하자.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yarn add --dev redux react-redux redux-actions</code></pre></div>
<p>이제 <code class="language-text">redux</code>를 활용하여 간단한 카운터를 만들어보려 한다. 우선 컴포넌트에서 요청에 필요한 <code class="language-text">action</code> 과 <code class="language-text">reducer</code>를 구현하도록 하자.</p>
<ul>
<li><code class="language-text">src/redux/reducers/counter.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleActions<span class="token punctuation">,</span> createAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-actions'</span>

<span class="token keyword">const</span> <span class="token constant">INCREMENT</span> <span class="token operator">=</span> <span class="token string">'INCREMENT'</span>
<span class="token keyword">const</span> <span class="token constant">DECREMENT</span> <span class="token operator">=</span> <span class="token string">'DECREMENT'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> increment <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">INCREMENT</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> decrement <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">DECREMENT</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">handleActions</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">INCREMENT</span><span class="token punctuation">]</span><span class="token punctuation">:</span> state <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token constant">DECREMENT</span><span class="token punctuation">]</span><span class="token punctuation">:</span> state <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span> count<span class="token punctuation">:</span> state<span class="token punctuation">.</span>count <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  initialState
<span class="token punctuation">)</span></code></pre></div>
<p>우선 <code class="language-text">redux-actions</code>에서 제공하는 <code class="language-text">createAction</code> 함수를 통해 <code class="language-text">increment</code>, <code class="language-text">decrement</code>라는 <code class="language-text">action</code>를 생성했다. 컴포넌트에서 요청한 <code class="language-text">action</code>의 종류에 따라 기본 객체 프로퍼티인 <code class="language-text">count</code> 값을 가감하도록 설정했다. 만들어진 <code class="language-text">action</code> 은<code class="language-text">createAction</code> 호출 시 인자로 넘겨받은 타입에 맞춰 <code class="language-text">handleActions</code> 함수를 통해 상태값을 변경하도록 했다.</p>
<ul>
<li><code class="language-text">src/redux/reducers/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>생성된 <code class="language-text">reducer</code>를 <code class="language-text">store</code>에 전달하기 위한 파일을 생성했다. <code class="language-text">combineReducers</code>라는 함수를 통해 <code class="language-text">reducer</code>를 전달하도록 했다.</p>
<ul>
<li><code class="language-text">src/redux/store.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">'./reducers'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducers<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">reducer</code>를 통해 갱신된 데이터를 컴포넌트에 전달하는 <code class="language-text">store</code>를 생생했다. 이제 생성된 <code class="language-text">store</code>를 클라이언트 영역에서 전달받기 위한 작업을 진행해보자</p>
<h3>Client</h3>
<ul>
<li><code class="language-text">src/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span>
    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">react-redux</code> 에서 제공하는 <code class="language-text">Provider</code> 컴포넌트를 통해 <code class="language-text">store</code>로터 전달받은 상태 괸리 객체를 최상위 컴포넌트인 <code class="language-text">App</code>에 전달하도록 했다. 이제 <code class="language-text">App</code> 컴포넌트를 통해 설정된 전역 데이터를 활용하기 위한 컴포넌트 작업을 진행해보자.</p>
<ul>
<li><code class="language-text">src/components/Counter.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bindActionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> counterActions <span class="token keyword">from</span> <span class="token string">'../redux/reducers/counter'</span>

<span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> counter<span class="token punctuation">,</span> CounterActions <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token operator">&lt;</span>h1<span class="token operator">></span><span class="token punctuation">{</span>counter<span class="token punctuation">.</span>count<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
        <span class="token operator">&lt;</span>button
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            CounterActions<span class="token punctuation">.</span><span class="token function">increment</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">+</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
        <span class="token operator">&lt;</span>button
          onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
            CounterActions<span class="token punctuation">.</span><span class="token function">decrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">}</span>
        <span class="token operator">></span>
          <span class="token operator">-</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  state <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    counter<span class="token punctuation">:</span> state<span class="token punctuation">.</span>counter<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  dispatch <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    CounterActions<span class="token punctuation">:</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>counterActions<span class="token punctuation">,</span> dispatch<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span>Counter<span class="token punctuation">)</span></code></pre></div>
<p>전달받은 카운터 데이터를 활용할 수 있도록 <code class="language-text">Counter</code>라는 새로운 컴포넌트를 만들었다. <code class="language-text">react-redux</code> 에서 제공하는 <code class="language-text">connect</code> 함수를 통해 <code class="language-text">store</code>로부터 전달받은 <code class="language-text">counter</code> 객체와 해당 객체에 <code class="language-text">action</code>을 요청할 수 있도록 <code class="language-text">redux</code>에서 제공하는 <code class="language-text">bindActionCreators</code> 함수를 통해 <code class="language-text">CounterActions</code>이라는 새로운 객체를 <code class="language-text">HoC</code> 패턴을 활용해 해당 컴포넌트의 주입했다.</p>
<p>컴포넌트 구조는 전달받은 <code class="language-text">counter</code> 객체를 확인하기 위한 요소와 증가/감소 버튼으로 구성되었고 버튼 클릭 시 <code class="language-text">CounterActions</code> 에 설정된 <code class="language-text">action</code>을 호출하도록 했다. 이제 만들어진 컴포넌트를 사용하기 위해 <code class="language-text">Home</code>, <code class="language-text">About</code> 컴포넌트를 수정해보자.</p>
<ul>
<li><code class="language-text">src/components/Home.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> withLayout <span class="token keyword">from</span> <span class="token string">'./withLayout'</span>
<span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">'./Counter'</span>

<span class="token keyword">const</span> <span class="token function-variable function">Home</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span>home<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withLayout</span><span class="token punctuation">(</span>Home<span class="token punctuation">)</span></code></pre></div>
<ul>
<li><code class="language-text">src/components/About.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> withLayout <span class="token keyword">from</span> <span class="token string">'./withLayout'</span>
<span class="token keyword">import</span> Counter <span class="token keyword">from</span> <span class="token string">'./Counter'</span>

<span class="token keyword">const</span> <span class="token function-variable function">About</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>div<span class="token operator">></span>
      <span class="token operator">&lt;</span>h1<span class="token operator">></span>About<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">></span>
      <span class="token operator">&lt;</span>Counter <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">withLayout</span><span class="token punctuation">(</span>About<span class="token punctuation">)</span></code></pre></div>
<p><code class="language-text">Home</code>, <code class="language-text">About</code> 컴포넌트 내부에 <code class="language-text">Counter</code> 컴포넌트를 호출하도록 수정했다. 렌더링 시 컴포넌트를 호출하는 것 이외에 특별한 작업을 하지 않았다. 이제 화면을 동작시켜 결과를 확인해보자.</p>
<p><img src="/redux-client-05d38dffbcd810c12275dbc621024e73.gif" alt="redux-client"></p>
<p><code class="language-text">action</code> 요청 후 업데이트되는 상태값을 컴포넌트에 종속되지 않고 정상적으로 전달받는 것을 확인했다. 이제 서버 영역에서도 <code class="language-text">store</code>로부터 데이터를 전달받기 위한 작업을 진행해보자.</p>
<h3>Server</h3>
<p>서버 렌더링 시에는 <code class="language-text">store</code> 로부터 초기 전역 상태값을 전달받기 위한 작업이 필요하다. 해당 작업을 진행하기 위해 <code class="language-text">renderer.js</code> 파일을 수정해보자.</p>
<ul>
<li><code class="language-text">src/lib/renderer.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../redux/store'</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> html <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Loadable<span class="token punctuation">.</span>Capture report<span class="token operator">=</span><span class="token punctuation">{</span>moduleName <span class="token operator">=></span> modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>StaticRouter location<span class="token operator">=</span><span class="token punctuation">{</span>req<span class="token punctuation">.</span>url<span class="token punctuation">}</span> context<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>StaticRouter<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Loadable<span class="token punctuation">.</span>Capture<span class="token operator">></span>
  <span class="token punctuation">)</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> renderer</code></pre></div>
<p>이 전에 클라이언트 영역에서 구현했던 것처럼 서버측에서도 <code class="language-text">Provider</code> 컴포넌트를 통해 <code class="language-text">store</code> 로터 전달받은 상태 관리 객체를 최상위 컴포넌트인 <code class="language-text">App</code>에 전달하도록 했다. 서버 측에서 필요한 구현은 끝났으니 실행 결과를 확인해보자.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-012bd.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 57.223264540337716%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABX0lEQVQoz51S2XKDMAzk/3+uM81TGRJCSDCnsQM+gMBWJk1CaIeHakaWD3l1rLw2VxBRjqYUqKoOg+0BTJgmWqfpT3Wy3C/Fc4sqNVShVk+/nZ8vK+A3wMdZlS1ctrrm0DyDvg5IWQGecbRVCyssbv0N4zi+ga7Ve0Qw0qD0Oapwj/qwQxgM2H32iPyE7AfS4II6JHDWbCX/AuwaC3GSkMkF8hwgPg4IgglxdIP/VSIksPxUIjkmYCeGPMup5xW0UDBCo1fdKkO61NRLKyUpORcjGBtR5CMoBtIU4KVFkpzBUgaWMMRxjCIlQvMrDNfoCHQmxfWF7yvqVQNtDTE9bJKyRdYzQysMMj+liAUxTiRc7Qzcm37WwdBeO0tn+2Pp7Ihasv0EdJ9lLGYg52iJJENBbGvvVt7V1FQa3Tk/V+a9mhfrc8kuSh3VNDIa/5HlLHpd24EfqrnMrfna0iXoN8/AWdD5pnA7AAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux-server-src"
        title=""
        src="/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-fb8a0.png"
        srcset="/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-1a291.png 148w,
/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-2bc4a.png 295w,
/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-fb8a0.png 590w,
/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-526de.png 885w,
/static/redux-server-src-b0ba7b0d3357b6a9576b64a71122a6a8-012bd.png 1066w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p>서버 실행 후 페이지 소스를 확인해보니 정상적으로 서버 렌더링 시 전달받은 데이터를 화면에 그려주고 있다.</p>
<p>지금까지 활용한 예제는 동기적인 데이터이기 때문에 클라이언트 및 서버 영역에서의 <code class="language-text">redux</code> 설정 방법은 생각보다 간단했다. 이제 이 전에 다룬 비동기 데이터를 <code class="language-text">redux</code>를 활용하여 처리하는 방법에 대한 내용을 정리해보자.</p>
<h2>redux-thunk</h2>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-778cc.jpg"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 75.07836990595611%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAPABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAECA//EABYBAQEBAAAAAAAAAAAAAAAAAAEDBf/aAAwDAQACEAMQAAAB1m1XKoYP/8QAGBAAAwEBAAAAAAAAAAAAAAAAAAIhARD/2gAIAQEAAQUCvFKUXD//xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAgBAwEBPwFH/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFBABAAAAAAAAAAAAAAAAAAAAIP/aAAgBAQAGPwJf/8QAGhABAQEAAwEAAAAAAAAAAAAAAQARIUFx4f/aAAgBAQABPyFNfZ0lxeJF1Jl//9oADAMBAAIAAwAAABB4H//EABcRAQEBAQAAAAAAAAAAAAAAAAEAEVH/2gAIAQMBAT8QTkHL/8QAFhEBAQEAAAAAAAAAAAAAAAAAEQAB/9oACAECAQE/EG0b/8QAHBABAAICAwEAAAAAAAAAAAAAAQARIUExUWFx/9oACAEBAAE/EEJFpcQmpW/sReXnuNFNfYSGNewLs3P/2Q=='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux-thunk"
        title=""
        src="/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-f8fb9.jpg"
        srcset="/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-e8976.jpg 148w,
/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-63df2.jpg 295w,
/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-f8fb9.jpg 590w,
/static/redux-thunk-1958a6c91b0b9c1801d873cb30b79acf-778cc.jpg 638w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code class="language-text">redux</code>를 사용하는 경우 전역 상태를 관리할때 동기적인 데이터의 경우 기본적인 기능을 통해 활용할 수 있지만 비동기 데이터를 처리하기 위해서는 미들웨어가 필요하다. 그러한 미들웨어 중 하나가 <code class="language-text">redux-thunk</code>이며 이를 통해 <code class="language-text">action</code> 호출 시 동기적으로 전달되는 객체를 함수 또는 <code class="language-text">Promises</code>로 감싼뒤 비동기적으로 반환하게 해줄 수 있게 도와준다.</p>
<p>우선 <code class="language-text">redux-thunk</code>를 설치하고 미들웨어를 연결하기 위한 작업을 진행하도록 하자.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yarn add --dev redux-thunk</code></pre></div>
<ul>
<li><code class="language-text">src/redux/store.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">import</span> ReduxThunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">createStore</span><span class="token punctuation">(</span>reducers<span class="token punctuation">,</span> <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>ReduxThunk<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">redux</code>에서 제공하는 <code class="language-text">applyMiddleware</code>라는 함수를 통해 <code class="language-text">store</code> 생성 시 <code class="language-text">redux-thunk</code>를 사용할 수 있도록 수정했다. 이제 비동기 액션을 처리하기 위한 <code class="language-text">reducer</code>를 만들어보자.</p>
<ul>
<li><code class="language-text">src/redux/reducers/post.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleActions<span class="token punctuation">,</span> createAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-actions'</span>
<span class="token keyword">import</span> axios <span class="token keyword">from</span> <span class="token string">'axios'</span>

<span class="token keyword">const</span> <span class="token constant">GET_POST_LOADING</span> <span class="token operator">=</span> <span class="token string">'GET_POST_LOADING'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_SUCCESS</span> <span class="token operator">=</span> <span class="token string">'GET_POST_SUCCESS'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_ERROR</span> <span class="token operator">=</span> <span class="token string">'GET_POST_ERROR'</span>

<span class="token keyword">const</span> loading <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST_LOADING</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> success <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST_SUCCESS</span><span class="token punctuation">,</span> res <span class="token operator">=></span> res<span class="token punctuation">.</span>data<span class="token punctuation">)</span>
<span class="token keyword">const</span> error <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST_ERROR</span><span class="token punctuation">)</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">getPost</span> <span class="token operator">=</span> path <span class="token operator">=></span> dispatch <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  axios<span class="token punctuation">.</span><span class="token keyword">get</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`https://jsonplaceholder.typicode.com</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>path<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
    res <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">success</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  pending<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">handleActions</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST_LOADING</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        pending<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST_SUCCESS</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> data <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">)</span>
        <span class="token operator">?</span> action<span class="token punctuation">.</span>payload
        <span class="token punctuation">:</span> <span class="token punctuation">[</span>action<span class="token punctuation">.</span>payload<span class="token punctuation">]</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        pending<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        data<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST_ERROR</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        pending<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  initialState
<span class="token punctuation">)</span></code></pre></div>
<p>비동기 요청 시 반환 상태에 따른 <code class="language-text">loading</code>, <code class="language-text">success</code>, <code class="language-text">error</code>라는 <code class="language-text">action</code>을 생성했다. 비동기 데이터 요청 시 반환되는 <code class="language-text">pending</code>, <code class="language-text">resolve</code>, <code class="language-text">reject</code> 상태에 따라 각 액션을 호출하도록 구현했다. 다만 비동기 요청 시 반환 상태에 따라 <code class="language-text">dispatch</code> 함수를 통해 일일히 <code class="language-text">action</code>을 요청해야 하기 때문에 기존에 사용했던 비동기 요청 함수를 사용하지 못하는 부분이 조금 아쉽다.</p>
<p>다행히도 이러한 비동기 상태에 따라 액션을 자동으로 생성히 주는 라이브러리가 있어 이를 활용했다. <code class="language-text">redux-promise-middleware</code>라는 미들웨어를 활용하여 코드를 개선해보자.</p>
<p>우선 라이브러리를 사용하기 위해 설치부터 진행하도록 하자.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yarn add --dev redux-promise-middleware</code></pre></div>
<p>설치한 미들웨어를 사용하기 위해 <code class="language-text">store</code> 파일에 수정하도록 하자.</p>
<ul>
<li><code class="language-text">src/redux/store.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">import</span> ReduxThunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>
<span class="token keyword">import</span> promiseMiddleware <span class="token keyword">from</span> <span class="token string">'redux-promise-middleware'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
    reducers<span class="token punctuation">,</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>
      ReduxThunk<span class="token punctuation">,</span>
      <span class="token function">promiseMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        promiseTypeSuffixes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'LOADING'</span><span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token string">'ERROR'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">applyMiddleware</code> 함수 호출 시 해당 미들웨어를 사용하도록 <code class="language-text">promiseMiddleware</code> 함수의 반환 값을 인자에 추가했다. <code class="language-text">promiseMiddleware</code>의 인자로는 액션 생성 시 연결할 문자열을 옵션으로 추가했다. 이를 통해 비동기 요청 상태에 따라 <code class="language-text">_LOADING</code>, <code class="language-text">_SUCCESS</code>, <code class="language-text">_ERROR</code>라는 접미사가 추가된 액션이 생성하도록 설정했다.</p>
<p>이제 이 전에 구현했던 비동기 요청을 통해 액션을 요청하는 영역을 수정해보자.</p>
<ul>
<li><code class="language-text">src/redux/reducers/post.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleActions<span class="token punctuation">,</span> createAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-actions'</span>
<span class="token keyword">import</span> loadData <span class="token keyword">from</span> <span class="token string">'../../lib/loadData'</span>

<span class="token keyword">const</span> <span class="token constant">GET_POST</span> <span class="token operator">=</span> <span class="token string">'GET_POST'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_LOADING</span> <span class="token operator">=</span> <span class="token string">'GET_POST_LOADING'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_SUCCESS</span> <span class="token operator">=</span> <span class="token string">'GET_POST_SUCCESS'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_ERROR</span> <span class="token operator">=</span> <span class="token string">'GET_POST_ERROR'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> getPost <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span>
  <span class="token constant">GET_POST</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> path <span class="token operator">=></span> <span class="token keyword">await</span> <span class="token function">loadData</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// ...</span></code></pre></div>
<p>반환 상태에 따라 <code class="language-text">createAction</code> 함수를 통해 생성한 액션 함수를 비동기 요청 시 직접 호출하지 않도록 수정했다. <code class="language-text">GET_POST</code>라는 액션 생성 시 미들웨어를 통해 비동기 요청 상태에 따라 액션을 자동으로 생성하도록 요청했고 이를 통해 기존의 <code class="language-text">loadData</code> 함수를 사용할 수 있도록 수정했다.</p>
<p>그럼 이제 구현한 <code class="language-text">reducer</code>를 <code class="language-text">store</code>에 전달하도록 하자.</p>
<ul>
<li><code class="language-text">src/redux/reducer/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> combineReducers <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> counter <span class="token keyword">from</span> <span class="token string">'./counter'</span>
<span class="token keyword">import</span> post <span class="token keyword">from</span> <span class="token string">'./post'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">combineReducers</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  counter<span class="token punctuation">,</span>
  post<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>새롭게 구현한 <code class="language-text">post reducer</code>를 <code class="language-text">store</code>에 주입하도록 설정했다. 이제 비동기 데이터를 활용하기 위해 컴포넌트 영역을 수정하도록 하자.</p>
<h3>Client</h3>
<p><code class="language-text">redux-thunk</code>를 통한 비동기 데이터를 활용하기 위해 기존에 사용했던 <code class="language-text">Posts</code> 컴포넌트를 수정했다.</p>
<ul>
<li><code class="language-text">src/components/Posts.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> React<span class="token punctuation">,</span> <span class="token punctuation">{</span> Component <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react'</span>
<span class="token keyword">import</span> withLayout <span class="token keyword">from</span> <span class="token string">'./withLayout'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> connect <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> bindActionCreators <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> postActions <span class="token keyword">from</span> <span class="token string">'../redux/reducers/post'</span>

<span class="token keyword">class</span> <span class="token class-name">Posts</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> PostActions<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props
    PostActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> post <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>div<span class="token operator">></span>
        <span class="token punctuation">{</span>post<span class="token punctuation">.</span>loading <span class="token operator">&amp;&amp;</span> <span class="token string">'...loading'</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>post<span class="token punctuation">.</span>error <span class="token operator">&amp;&amp;</span> <span class="token string">'error!'</span><span class="token punctuation">}</span>
        <span class="token punctuation">{</span>post<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span>item<span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>
          <span class="token operator">&lt;</span>div key<span class="token operator">=</span><span class="token punctuation">{</span>i<span class="token punctuation">}</span><span class="token operator">></span><span class="token punctuation">{</span>item<span class="token punctuation">.</span>title<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">></span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">connect</span><span class="token punctuation">(</span>
  state <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    post<span class="token punctuation">:</span> state<span class="token punctuation">.</span>post<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  dispatch <span class="token operator">=></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
    PostActions<span class="token punctuation">:</span> <span class="token function">bindActionCreators</span><span class="token punctuation">(</span>postActions<span class="token punctuation">,</span> dispatch<span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token function">withLayout</span><span class="token punctuation">(</span>Posts<span class="token punctuation">)</span><span class="token punctuation">)</span></code></pre></div>
<p>우선 라우터를 통해 비동기 데이터를 활용하기 위해 구현했던 이 전 코드는 지우고 <code class="language-text">redux-thunk</code>를 활용하기 위해 수정된 코드의 내용이다. <code class="language-text">Counter</code> 컴포넌트를 구현할때와 마찬가지로 <code class="language-text">connect</code> 함수를 통해 전역 상태와 <code class="language-text">action</code> 함수를 전달받도록 수정했다. 이 후 <code class="language-text">componentDidMount</code> 함수 호출 시 라우팅 정보에 따른 <code class="language-text">action</code> 호출을 통해 비동기 데이터를 전달받도록 수정했다. 렌더링 시에는 요청 상태에 따른 화면 구성을 구분할 수 있도록 구현했다. 그럼 이제 해당 코드가 잘 동작하는지 확인해보자.</p>
<p><img src="/redux-thunk-client-b0b4a9885d017b4e6bc230aaa52af72c.gif" alt="redux-thunk-client"></p>
<p>컴포넌트 렌더링 시 비동기적인 액션 호출을 통해 정상적으로 비동기 데이터를 전달받는 것을 확인했다.</p>
<h3>Server</h3>
<p>이제 서버에서 비동기 데이터를 정상적으로 렌더링할 수 있도록 작업을 진행해보자. 우선 서버 측에서 라우터 주소에 따라 <code class="language-text">action</code>을 호출하기 위한 작업이 필요하다.</p>
<ul>
<li><code class="language-text">src/lib/routes.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../redux/store'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> postActions <span class="token keyword">from</span> <span class="token string">'../redux/reducers/post'</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> initStore <span class="token operator">=</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/posts/:id'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      loading<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    loadData<span class="token punctuation">:</span> <span class="token keyword">async</span> path <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> initStore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>postActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> initStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/posts'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      loading<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    loadData<span class="token punctuation">:</span> <span class="token keyword">async</span> path <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">await</span> initStore<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>postActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> initStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Routes</code></pre></div>
<p>기존 <code class="language-text">loadData</code> 함수에서 비동기 요청에 대한 응답 데이터를 반환하지 않고 <code class="language-text">store</code>를 생성한 뒤 해당 라우터 주소에 따라 새로운 전역 상태에 대한 데이터를 반환하도록 수정했다.</p>
<ul>
<li><code class="language-text">src/lib/renderer.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../redux/store'</span>

<span class="token keyword">const</span> renderer <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> html <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentRoute <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>route <span class="token operator">=></span> <span class="token function">matchPath</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> route<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> initState <span class="token operator">=</span> currentRoute<span class="token punctuation">.</span>loadData
    <span class="token operator">?</span> <span class="token keyword">await</span> currentRoute<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> initStore <span class="token operator">=</span> <span class="token function">store</span><span class="token punctuation">(</span>initState<span class="token punctuation">)</span>

  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> modules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>
    <span class="token operator">&lt;</span>Loadable<span class="token punctuation">.</span>Capture report<span class="token operator">=</span><span class="token punctuation">{</span>moduleName <span class="token operator">=></span> modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>StaticRouter location<span class="token operator">=</span><span class="token punctuation">{</span>req<span class="token punctuation">.</span>url<span class="token punctuation">}</span> context<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span><span class="token operator">></span>
        <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>initStore<span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
      <span class="token operator">&lt;</span><span class="token operator">/</span>StaticRouter<span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Loadable<span class="token punctuation">.</span>Capture<span class="token operator">></span>
  <span class="token punctuation">)</span>

  <span class="token keyword">let</span> bundles <span class="token operator">=</span> <span class="token function">getBundles</span><span class="token punctuation">(</span>stats<span class="token punctuation">,</span> modules<span class="token punctuation">)</span>

  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    html<span class="token punctuation">:</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
      <span class="token string">'&lt;div id="root">&lt;/div>'</span><span class="token punctuation">,</span>
      <span class="token template-string"><span class="token string">`&lt;div id="root"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>app<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>
      &lt;script>window.__INIT_DATA__ = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">serialize</span><span class="token punctuation">(</span>initStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/script>
      </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bundles
        <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>bundle <span class="token operator">=></span> <span class="token operator">!</span>bundle<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.map'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>bundle <span class="token operator">=></span> `<span class="token operator">&lt;</span>script src<span class="token operator">=</span>"$<span class="token punctuation">{</span>bundle<span class="token punctuation">.</span>publicPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/script>`</span></span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
      `
    <span class="token punctuation">)</span><span class="token punctuation">,</span>
    context<span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> renderer</code></pre></div>
<p>서버 측 비동기 데이터 설정 시 기존에는 컴포넌트에 설정한 <code class="language-text">loadData</code> 함수 요청 후 반환되는 비동기 데이터를 <code class="language-text">context</code> 객체의 프로퍼티로 설정한 뒤 <code class="language-text">StaticRouter</code>의 props로 전달해 주었다. 현재는 비동기 데이터를 포함한 전역 데이터를 새로운 <code class="language-text">store</code> 함수 호출에 필요한 인자값으로 넘겨주고 있다. 이 후 새롭게 생성된 상태 객체를 <code class="language-text">Provider</code> 컴포넌트이 props로 전달하도록 수정했다. 이 후 클라이언트에서 확인하기 위한 초기 전역 데이터 또한 <code class="language-text">window.__INIT_DATA__</code>라는 새로운 객체를 통해 클라이언트에서 전달받을 수 있도록 수정했다.</p>
<p>다만 기존에 구현된 <code class="language-text">store</code> 생성함수는 초기 데이터값에 대한 인자를 따로 받지 않았기 때문에 <code class="language-text">store</code> 생성 시 초기 전역 데이터를 전달받을 수 있도록 수정해야 하며 서버 렌더링 이후 클라이언트 렌더링 시에도 초기 전역 데이터를 전달받기 위한 수정이 필요하다.</p>
<ul>
<li><code class="language-text">src/redux/store.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">import</span> ReduxThunk <span class="token keyword">from</span> <span class="token string">'redux-thunk'</span>
<span class="token keyword">import</span> promiseMiddleware <span class="token keyword">from</span> <span class="token string">'redux-promise-middleware'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>initialState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
    reducers<span class="token punctuation">,</span>
    initialState<span class="token punctuation">,</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>
      ReduxThunk<span class="token punctuation">,</span>
      <span class="token function">promiseMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        promiseTypeSuffixes<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'LOADING'</span><span class="token punctuation">,</span> <span class="token string">'SUCCESS'</span><span class="token punctuation">,</span> <span class="token string">'ERROR'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>기존 함수 호출 시 비어있던 인자를 <code class="language-text">initialState</code>라는 초기 전역 데이터를 갖는 인자로 수정했다. 이 후 함수 호출 시 전달받은 초기 전역 데이터를 <code class="language-text">createStore</code> 함수의 인자로 추가했다.</p>
<ul>
<li><code class="language-text">src/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span>
    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">store</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>__INIT_DATA__ <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span>

<span class="token comment">// ...</span></code></pre></div>
<p>서버 렌더링 이후 요청되는 클라이언트 측 <code class="language-text">store</code> 생성 함수의 인자로 서버에서 설정한 <code class="language-text">window.__INIT_DATA__</code> 객체를 인수로 전달할 수 있도록 수정했다. 이를 통하 최초 서버 렌더링 이후 클라이언트 렌더링 시 서버에서 전달받은 초기 데이터를 통해 <code class="language-text">store</code> 함수를 호출할 수 있다. 이제 서버 렌더링 이 후 추가적인 라우터 호출 시 컴포넌트 영역에서 <code class="language-text">window.__INIT_DATA__</code> 객체 존재 여부에 따라 액션 호출 조건만 수정하면 된다.</p>
<ul>
<li><code class="language-text">src/components/Counter.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Counter</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>__INIT_DATA__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>__INIT_DATA__ <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">Counter</code> 컴포넌트에서 <code class="language-text">componentDidMount</code> 함수 호출 시 <code class="language-text">window.__INIT_DATA__</code> 객체가 존재할 경우 해당 객체를 비워주도록 설정했다. 최초 서버 렌더링 이후 클라이언트 영역에서 해당 객체를 참조하지 않기 위해서다</p>
<ul>
<li><code class="language-text">src/components/Posts.jsx</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">class</span> <span class="token class-name">Posts</span> <span class="token keyword">extends</span> <span class="token class-name">Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>

  <span class="token function">componentDidMount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> <span class="token punctuation">{</span> PostActions<span class="token punctuation">,</span> match <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>props

    <span class="token keyword">if</span> <span class="token punctuation">(</span>window<span class="token punctuation">.</span>__INIT_DATA__<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span>__INIT_DATA__ <span class="token operator">=</span> <span class="token keyword">null</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      PostActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>match<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// ...</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">Posts</code> 컴포넌트 또한 <code class="language-text">componentDidMount</code> 함수 호출 시 <code class="language-text">window.__INIT_DATA__</code> 객체가 존재할 경우 해당 객체를 비워주도록 설정했다. 서버 렌더링 이후 클라이언트 영역에서 컴포넌트 재호출 시에는 새롭게 액션 함수 호출을 통해 전역 상태를 갱신할 수 있도록 수정했다.</p>
<p>이제 서버 설정을 완료했으니 서버 실행 후 페이지 소스를 확인해보자.</p>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-6919e.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 68.9608636977058%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdklEQVQ4y61Ti27CMAzs///iyihjfZfSPEnSx80OFKGNIYSIdE3itGfnfE1MpyHLHloHLDPujmVZ/mCN/x4Jh0xn4KWDNxLOOIhBwQqDQEnmacaC5THpDW/CjylMELmAKneo9wN22xH77Q7NvoSuFEYbnq48Egb6YCAiVWxRZgM2G2CTWqQfkvYd9p9fKIoSTdVAdYpu40me5W6SSHg6nsBaemdhrSM9PZQKNE8wJIGUgiAhhIDVFieCdx4hBHjv4ZyL63mcz4SmpcbUAsZaIjBEpC6Ql72GNZaSKHrHRPI1zuthGGA0aW4CEt1ouqrEu0YiWoHqu4pZ2raNmcdxvCv4M0jYEnmRo6qqqMdt9/7z2sMK2UNN06Cu66jH8Xh8ubqrbfq+R5Zl6LruWuXLGkYfUsvTNI2ETM7gitfKD4dDlITPy7KMWq/nfMZznucxHgnZR9yMdWbw9dkmq0XYg2wTnjnGa26ktWc7cZyR8D9rhX2bbX4AS8VFL0fVguYAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux-thunk-server-src"
        title=""
        src="/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-fb8a0.png"
        srcset="/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-1a291.png 148w,
/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-2bc4a.png 295w,
/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-fb8a0.png 590w,
/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-526de.png 885w,
/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-fa2eb.png 1180w,
/static/redux-thunk-server-src-e3b36ca221c3e154ae9352a92a8afce5-6919e.png 1482w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code class="language-text">Posts</code> 컴포넌트 호출 시 서버 측에서 초기 전역 데이터를 정상적으로 렌더링하는 것을 확인할 수 있다. 이 후 클라이언트 렌더링 또한 이상없이 동작하는 것을 확인할 수 있다.</p>
<h2>redux-saga</h2>
<p>
  <a
    class="gatsby-resp-image-link"
    href="/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-b4c1c.png"
    style="display: block"
    target="_blank"
    rel="noopener"
  >
  
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block;  max-width: 590px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 20.875000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsSAAALEgHS3X78AAAA+0lEQVQY02OYOXMmw4yZM9xnzpgZOX3eVPmGX6HcXZcKBRmAYMas6ewMeEDnjVwuDEGggeJAA/NnTZ5rM2V1T0n7vUynjps5Dl2XC3RmTpsdC5SLAarRB+IQIHacMXu61pzehSo9p8oMgOoigIZqAbFV500wNgIZGAHU5Dlr0lypaYsnVk1bOkGn8r8zB9DA+BmzZsQBXV4/c+aMCqC6OiAG0jOqZ06flTx5XZch0MACoGGlQLwIaFgPENeDvBsJxCEzp83KmbyuM6b3WGVK+91Mh86r+QogH0xd2csElGcCGsY2Y8YMDiCbE8nLPF13chmABpkBsTUQMwMAyraFICNFV0sAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="redux-saga"
        title=""
        src="/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-fb8a0.png"
        srcset="/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-1a291.png 148w,
/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-2bc4a.png 295w,
/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-fb8a0.png 590w,
/static/redux-saga-f860bd1b76161ab4c3f39c95e4dd124e-b4c1c.png 800w"
        sizes="(max-width: 590px) 100vw, 590px"
      />
    </span>
  </span>
  
  </a>
    </p>
<p><code class="language-text">redux-saga</code>는 앞서 설명한 <code class="language-text">redux-thunk</code>와 같이 <code class="language-text">redux</code>에서 비동기 데이터를 활용할 수 있도록 도와주는 라이브러리이다. <code class="language-text">redux-thunk</code>와 다른 점은 <code class="language-text">redux</code>를 통해 생성한 <code class="language-text">action</code>의 <code class="language-text">side effect</code>를 생성하는 별도의 <code class="language-text">task</code>를 활용한다고 볼 수 있다. 해당 <code class="language-text">task</code>를 통해 동기적인 <code class="language-text">action</code>을 비동기적으로 호출해줄 수 있다.</p>
<p><code class="language-text">redux-thunk</code> 를 사용할때는 <code class="language-text">action</code> 호출의 반환 상태를 객체 대신 함수로 변경한 뒤 비동기 요청 상태에 따라 다른 <code class="language-text">action</code>을 호출해 주었다. 비동기 상태에 따라 <code class="language-text">action</code> 을 호출하다 보면 결국 호출이 여러 단계로 중첩될 수 있으며, 이는 비동기 데이터 처리 로직이 복잡해질수록 중첩된 <code class="language-text">action</code> 호출에 의한 전역 상태의 디버깅 및 테스트가 어려워지게 된다.</p>
<p><code class="language-text">redux-saga</code>는 동기적인 <code class="language-text">action</code>의 <code class="language-text">side effect</code>를 통해 액션 호출을 비동기적으로 제어할 수 있기 때문에, <code class="language-text">action</code> 자체가 가지고 있는 본연의 기능을 사용할 수 있으며 상태의 흐름 또한 쉽게 파악할 수 있기 때문에 전역 상태를 관리하는 입장에서 <code class="language-text">redux-thunk</code> 보다 장점을 가지고 있다.</p>
<p>다만 비동기 액션 처리 시 <code class="language-text">es6</code>의 <code class="language-text">generator</code> 문법을 활용하며, <code class="language-text">redux-saga</code>에서 제공하는 여러 기능의 사용법들은 사용자에 따라 높은 러닝커브를 요구하기도 한다. 나 역시 그 중 한명으로써 익숙하지 않은 <code class="language-text">generator</code> 문법과 기본적인 활용법에 대해 아직 이해하지 못하는 부분이 많다.</p>
<p>그래도 내가 이해하는 범위 내에서 <code class="language-text">redux-saga</code>를 활용한 내용을 간단히 정리했다. 그럼 우선 <code class="language-text">redux-saga</code>를 설치하고 <code class="language-text">action</code> 을 생성하는 부분을 수정해보자.</p>
<div class="gatsby-highlight" data-language="bash"><pre class="language-bash"><code class="language-bash">yarn add --dev redux-saga</code></pre></div>
<ul>
<li><code class="language-text">src/redux/reducers/post.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleActions<span class="token punctuation">,</span> createAction <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-actions'</span>

<span class="token keyword">const</span> <span class="token constant">GET_POST</span> <span class="token operator">=</span> <span class="token string">'GET_POST'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_SUCCESS</span> <span class="token operator">=</span> <span class="token string">'GET_POST_SUCCESS'</span>
<span class="token keyword">const</span> <span class="token constant">GET_POST_ERROR</span> <span class="token operator">=</span> <span class="token string">'GET_POST_ERROR'</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> getPost <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> getPostSuccess <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST_SUCCESS</span><span class="token punctuation">)</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> getPostError <span class="token operator">=</span> <span class="token function">createAction</span><span class="token punctuation">(</span><span class="token constant">GET_POST_ERROR</span><span class="token punctuation">)</span>

<span class="token keyword">const</span> initialState <span class="token operator">=</span> <span class="token punctuation">{</span>
  loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">handleActions</span><span class="token punctuation">(</span>
  <span class="token punctuation">{</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        loading<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST_SUCCESS</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span>_<span class="token punctuation">,</span> action<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">let</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> action<span class="token punctuation">.</span>payload

      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>Array<span class="token punctuation">.</span><span class="token function">isArray</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        data <span class="token operator">=</span> <span class="token punctuation">[</span>data<span class="token punctuation">]</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        data<span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">[</span><span class="token constant">GET_POST_ERROR</span><span class="token punctuation">]</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        loading<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
        error<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  initialState
<span class="token punctuation">)</span>

<span class="token comment">// ...</span></code></pre></div>
<p>이전에는 <code class="language-text">GET_POST</code> 액션 요청에 따라 <code class="language-text">GET_POST_LOADING</code>, <code class="language-text">GET_POST_SUCCESS</code>, <code class="language-text">GET_POST_ERROR</code> 라는 액션을 생성했다. 앞서 말했듯이 새롭게 생성된 액션은 <code class="language-text">GET_POST</code>라는 액션 내부에 중첩된 액션이며 비동기 로직이 복잡해질 경우 해당 액션에 대한 테스트 및 디버깅이 어려워게 된다. 또한 액션 타입을 집적 설정하지 않기 때문에 코드 가독성도 떨어진다.</p>
<p><code class="language-text">redux-saga</code>의 경우 동기적인 액션을 활용하기 때문에 기본적으로 <code class="language-text">redux</code>를 사용할때처럼 액션을 생성하도록 수정했다. <code class="language-text">GET_POST</code> 액션 요청시 반환 상태에 따라 <code class="language-text">GET_POST_SUCCESS</code>, <code class="language-text">GET_POST_ERROR</code>라는 액션을 호출할 수 있도록 설정했다.</p>
<p><code class="language-text">redux-thunk</code>를 사용할때와 달리 다른 액션에 종속되지 않는 각각의 독립된 액션으로 사용되기 때문에 비동기 로직이 복잡해지더라도 테스트 및 디버깅에 보다 유리한 이점을 가지고 있다. 실제 비동기 로직이 복잡해질 경우 <code class="language-text">redux-saga</code>를 통해 <code class="language-text">task</code>를 수행하는 과정이 복잡해지겠지만, 기존에 <code class="language-text">action</code> 내부에서 관리되었던 역할을 분리할 수 있다는 것만으로드 큰 장점이 된다고 생각한다.</p>
<p>이제 <code class="language-text">GET_POST</code> 액션 호출 시 비동기적으로 <code class="language-text">task</code>를 제어할 수 있도록 코드를 추가해 보자.</p>
<ul>
<li><code class="language-text">src/redux/saga/post.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> call<span class="token punctuation">,</span> put<span class="token punctuation">,</span> take <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> post <span class="token keyword">from</span> <span class="token string">'../reducers/post'</span>
<span class="token keyword">import</span> loadData <span class="token keyword">from</span> <span class="token string">'../../lib/loadData'</span>

<span class="token keyword">export</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">getPost</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> <span class="token punctuation">{</span> payload <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">take</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span>getPost<span class="token punctuation">)</span>
      <span class="token keyword">const</span> data <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">call</span><span class="token punctuation">(</span>loadData<span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token function">getPostSuccess</span><span class="token punctuation">(</span><span class="token punctuation">{</span> data <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">yield</span> <span class="token function">put</span><span class="token punctuation">(</span>post<span class="token punctuation">.</span><span class="token function">getPostError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<p>앞서 설명했듯이 <code class="language-text">redux-saga</code>는 <code class="language-text">generator</code> 및 <code class="language-text">redux-saga</code>에서 제공하는 기능을 활용하여 액션 호출에 대한 <code class="language-text">effect</code>를 통해 비동기적인 액션 호출을 수행할 수 있게 해준다. <code class="language-text">getPost</code>라는 <code class="language-text">generator function</code>을 통해 동기적인 액션 함수 호출에 대한 비동기적인 <code class="language-text">task</code>를 수행할 수 있도록 구현했다.</p>
<p><code class="language-text">try/catch</code> 문법을 활용하여 <code class="language-text">take</code> 함수를 통해 <code class="language-text">getPost</code> 액션 함수 호출 시 전달받게 되는 인자를 확인한 뒤 <code class="language-text">call</code> 함수를 통해 비동기 요청에 대한 응답 데이터를 반환받도록 했다. 이 후 반환 데이터 여부에 따라 <code class="language-text">put</code> 함수를 통해 <code class="language-text">getPostSuccess</code> 또는 <code class="language-text">getPostError</code> 액션 함수를 호출하도록 구현했다.</p>
<p>이제 구현된 <code class="language-text">generator</code> 함수를 <code class="language-text">store</code>에 연결하기 위한 엔트리 파일을 구현했다.</p>
<ul>
<li><code class="language-text">src/redux/saga/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> fork <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga/effects'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> getPost <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./post'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">rootSaga</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">yield</span> <span class="token function">fork</span><span class="token punctuation">(</span>getPost<span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">fork</code> 함수를 통해 앞서 구현한 <code class="language-text">getPost</code> 함수를 감지할 수 있도록 한다. 이제 <code class="language-text">store</code> 생성 시 <code class="language-text">redux-saga</code> 미들웨어를 통해 해당 함수를 전달받을 수 있도록 수정해보자.</p>
<ul>
<li><code class="language-text">src/redux/store.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> createStore<span class="token punctuation">,</span> applyMiddleware <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux'</span>
<span class="token keyword">import</span> reducers <span class="token keyword">from</span> <span class="token string">'./reducers'</span>
<span class="token keyword">import</span> createSagaMiddleware<span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token constant">END</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'redux-saga'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>initialState <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sagaMiddleware <span class="token operator">=</span> <span class="token function">createSagaMiddleware</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> store <span class="token operator">=</span> <span class="token function">createStore</span><span class="token punctuation">(</span>
    reducers<span class="token punctuation">,</span>
    initialState<span class="token punctuation">,</span>
    <span class="token function">applyMiddleware</span><span class="token punctuation">(</span>sagaMiddleware<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>

  store<span class="token punctuation">.</span>runSaga <span class="token operator">=</span> sagaMiddleware<span class="token punctuation">.</span>run
  store<span class="token punctuation">.</span><span class="token function-variable function">close</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token constant">END</span><span class="token punctuation">)</span>

  <span class="token keyword">return</span> store
<span class="token punctuation">}</span></code></pre></div>
<p>기존에 사용했던 <code class="language-text">redux-thunk</code> 관련 코드는 지운 뒤, <code class="language-text">redux-saga</code>를 활용하기 위해 미들웨어를 연결하는 부분을 수정했다. 이 후 앞서 구현한 <code class="language-text">generator function</code>을 전달받고 액션 호출과 관련된 <code class="language-text">task</code>를 제어하기 위해 <code class="language-text">runSaga</code>, <code class="language-text">close</code>라는 메서드를 <code class="language-text">store</code>에 추가했다. 그럼 이제 클라이언트 영역에서 <code class="language-text">redux-saga</code>를 사용할 수 있도록 수정해보자.</p>
<h3>Client</h3>
<ul>
<li><code class="language-text">src/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'./redux/store'</span>
<span class="token keyword">import</span> rootSaga <span class="token keyword">from</span> <span class="token string">'./redux/sagas'</span>

<span class="token keyword">const</span> initStore <span class="token operator">=</span> <span class="token function">store</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>__INIT_DATA__ <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
initStore<span class="token punctuation">.</span><span class="token function">runSaga</span><span class="token punctuation">(</span>rootSaga<span class="token punctuation">)</span>

ReactDOM<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token operator">&lt;</span>BrowserRouter<span class="token operator">></span>
    <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>initStore<span class="token punctuation">}</span><span class="token operator">></span>
      <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">/</span>BrowserRouter<span class="token operator">></span><span class="token punctuation">,</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'root'</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span></code></pre></div>
<p>이 전에 바로 <code class="language-text">store</code> 객체를 연결할 때와 달리 <code class="language-text">runSaga</code> 메서드를 통해 <code class="language-text">rootSaga</code>로 정의한 <code class="language-text">generator function</code>을 인자로 넘겨준 뒤 <code class="language-text">Provider</code> 컴포넌트에 props로 설정해주었다. 그밖의 구현내용은 이 전에 <code class="language-text">redux-thunk</code>를 통해 기존에 사용했던 코드들을 활용하면 된다. 그럼 이제 클라이언트 영역에서 정상적으로 동작하는지 확인해보자</p>
<p><img src="/redux-saga-client-bf00218d9617b0f315939202418917b5.gif" alt="redux-saga-client"></p>
<p><code class="language-text">redux-thunk</code>를 사용할때와 같이 <code class="language-text">redux-saga</code>를 활용하여 동기적인 액션뿐만 아니라 비동기적인 액션 요청 또한 정상적으로 처리하는 것을 확인했다.</p>
<h3>Server</h3>
<p>서버 설정은 기존에 구현했던 방식과 다르게 진행되기 때문에 적지 않은 부분에 대한 코드의 변경이 필요하다. 우선 서버 측 렌더링을 담당하는 영역을 수정해보자.</p>
<ul>
<li><code class="language-text">src/lib/renderer.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Provider <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'react-redux'</span>
<span class="token keyword">import</span> store <span class="token keyword">from</span> <span class="token string">'../redux/store'</span>
<span class="token keyword">import</span> rootSaga <span class="token keyword">from</span> <span class="token string">'../redux/sagas'</span>
<span class="token keyword">import</span> pretty <span class="token keyword">from</span> <span class="token string">'pretty'</span>

<span class="token keyword">const</span> <span class="token function-variable function">renderer</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> html <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> currentRoute <span class="token operator">=</span> routes<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span>route <span class="token operator">=></span> <span class="token function">matchPath</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">,</span> route<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">const</span> initStore <span class="token operator">=</span> <span class="token function">store</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token keyword">const</span> context <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">let</span> modules <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  initStore
    <span class="token punctuation">.</span><span class="token function">runSaga</span><span class="token punctuation">(</span>rootSaga<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">toPromise</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">renderToString</span><span class="token punctuation">(</span>
        <span class="token operator">&lt;</span>Loadable<span class="token punctuation">.</span>Capture report<span class="token operator">=</span><span class="token punctuation">{</span>moduleName <span class="token operator">=></span> modules<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>moduleName<span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token operator">></span>
          <span class="token operator">&lt;</span>StaticRouter location<span class="token operator">=</span><span class="token punctuation">{</span>req<span class="token punctuation">.</span>url<span class="token punctuation">}</span> context<span class="token operator">=</span><span class="token punctuation">{</span>context<span class="token punctuation">}</span><span class="token operator">></span>
            <span class="token operator">&lt;</span>Provider store<span class="token operator">=</span><span class="token punctuation">{</span>initStore<span class="token punctuation">}</span><span class="token operator">></span>
              <span class="token operator">&lt;</span>App <span class="token operator">/</span><span class="token operator">></span>
            <span class="token operator">&lt;</span><span class="token operator">/</span>Provider<span class="token operator">></span>
          <span class="token operator">&lt;</span><span class="token operator">/</span>StaticRouter<span class="token operator">></span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>Loadable<span class="token punctuation">.</span>Capture<span class="token operator">></span>
      <span class="token punctuation">)</span>

      <span class="token keyword">const</span> bundles <span class="token operator">=</span> <span class="token function">getBundles</span><span class="token punctuation">(</span>stats<span class="token punctuation">,</span> modules<span class="token punctuation">)</span>
      <span class="token keyword">const</span> renderHTML <span class="token operator">=</span> html<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>
        <span class="token string">'&lt;div id="root">&lt;/div>'</span><span class="token punctuation">,</span>
        <span class="token template-string"><span class="token string">`&lt;div id="root"></span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>app<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div>
        &lt;script>window.__INIT_DATA__ = </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token function">serialize</span><span class="token punctuation">(</span>
          initStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/script>
        </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>bundles
          <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span>bundle <span class="token operator">=></span> <span class="token operator">!</span>bundle<span class="token punctuation">.</span>file<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">'.map'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>bundle <span class="token operator">=></span> `<span class="token operator">&lt;</span>script src<span class="token operator">=</span>"$<span class="token punctuation">{</span>bundle<span class="token punctuation">.</span>publicPath<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">">&lt;/script>`</span></span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">'\n'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
        `
      <span class="token punctuation">)</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">404</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>context<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">301</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token number">301</span><span class="token punctuation">,</span> context<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
      <span class="token punctuation">}</span>

      res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token function">pretty</span><span class="token punctuation">(</span>renderHTML<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

  currentRoute<span class="token punctuation">.</span>loadData <span class="token operator">&amp;&amp;</span> currentRoute<span class="token punctuation">.</span><span class="token function">loadData</span><span class="token punctuation">(</span>initStore<span class="token punctuation">,</span> req<span class="token punctuation">.</span>url<span class="token punctuation">)</span>
  initStore<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span></code></pre></div>
<p>이 전에는 비동기 데이터 요청 시 응답 데이터를 포함하는 초기 상태 객체를 통해 새로운 <code class="language-text">store</code>를 생성한 후 해당 객체를 통한 서버 렌더링 결과를 반환하는 구조였지만 현재는 <code class="language-text">redux-saga</code>에서 제공하는 함수를 통해 비동기 상태 데이터가 응답한 이후 서버 렌더링 데이터를 그려주도록 수정했다.</p>
<p>우선 클라이언트에서 구현했던 내용과 같이 <code class="language-text">store</code>를 생성한 뒤 <code class="language-text">rootSaga</code>로 정의한 <code class="language-text">generator function</code>을 <code class="language-text">runSaga</code>의 인자로 넘겨주었다. 다만 이 전과 달리 모든 <code class="language-text">action</code> 호출은 동기적으로 수행되기 때문에 실제 비동기 데이터를 전달해주는 <code class="language-text">action</code> 호출을 확인하기 위해 <code class="language-text">runSaga</code> 함수 호출 이후 <code class="language-text">toPromise().then()</code> 이라는 체이닝 함수를 활용했다. <code class="language-text">then</code> 함수 호출 시 해당 인자에 대한 콜백 함수를 통해 이 후 렌더링 과정을 구현했다.</p>
<p>이 전과 달리 함수의 반환 값을 넘겨주지 않고 서버 렌더링을 수행하기 때문에 <code class="language-text">renderer</code> 함수 호출 시 <code class="language-text">res</code> 인자를 추가로 전달 받은 뒤 <code class="language-text">server/index.js</code>에서 구현했던 내용을 <code class="language-text">then</code> 함수의 콜백 인자 내부에서 수행할 수 있도록 했다. 이 전에는 <code class="language-text">async/await</code> 문법을 활용하여 비동기 요청에 대한 응답 데이터를 반환했지만 현재 구조에서는 필요하지 않기 때문에 일반 함수의 구조로 수정했다.</p>
<p>이 후 현재 라우터 컴포넌트 요청 시 <code class="language-text">loadData</code> 함수가 확인되는 경우 이 전과 같이 해당 함수를 호출하도록 했다. 다만 이 전과 다른 점은 <code class="language-text">loadData</code> 함수 호출 시 서버에서 생성한 <code class="language-text">store</code> 객체를 인자로 전달받게 했다. 이 후 전달받은 <code class="language-text">store</code>를 통해 각 라우터 컴포넌트에 필요한 <code class="language-text">action</code>를 호출하도록 했다. 중요한 점은 <code class="language-text">loadData</code> 함수 호출 시점은 <code class="language-text">runSaga</code> 함수 호출 이후가 되어야 한다. 그리고 마지막으로 <code class="language-text">store</code> 객체 생성 시 만들어 주었던 <code class="language-text">close</code> 함수를 호출하도록 했다.</p>
<p>사실 <code class="language-text">redux-thunk</code>와 달리 <code class="language-text">redux-saga</code>를 활용한 서버 렌더링 구조의 경우 아직까지 완벽히 이해가 되지 않는다. 이 후 깨달음을 얻게 된다면 내용을 보충할 수 있도록 하자.</p>
<p>이제 <code class="language-text">renderer</code> 함수는 수정했으니 해당 함수가 정상적으로 동작하도록 라우터 컴포넌트에서 <code class="language-text">action</code>을 요청하는 부분과 서버 실행 영역을 수정해보자.</p>
<ul>
<li><code class="language-text">src/lib/routes.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> postActions <span class="token keyword">from</span> <span class="token string">'../redux/reducers/post'</span>

<span class="token comment">// ...</span>

<span class="token keyword">const</span> Routes <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/posts/:id'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      loading<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    loadData<span class="token punctuation">:</span> <span class="token punctuation">(</span>store<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>postActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token punctuation">:</span> <span class="token string">'/posts'</span><span class="token punctuation">,</span>
    component<span class="token punctuation">:</span> <span class="token function">Loadable</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      loader<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'../components/Posts'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      loading<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    loadData<span class="token punctuation">:</span> <span class="token punctuation">(</span>store<span class="token punctuation">,</span> path<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span>postActions<span class="token punctuation">.</span><span class="token function">getPost</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> Routes</code></pre></div>
<p>이 전과 달리 라우팅 영역에서 <code class="language-text">store</code>를 직접 생성하지 않고 서버측에서 전달받은 <code class="language-text">store</code>를 통해 <code class="language-text">action</code>을 <code class="language-text">dispatch</code> 하도록 수정했다. 렌더링 시와 마찬가지로 <code class="language-text">async/await</code> 문법이 필요하지 않기 때문에 기본 함수 문법으로 수정했다.</p>
<ul>
<li><code class="language-text">server/index.js</code></li>
</ul>
<div class="gatsby-highlight" data-language="javascript"><pre class="language-javascript"><code class="language-javascript"><span class="token comment">// ...</span>

app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">'*'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span>req<span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">renderer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> req<span class="token punctuation">,</span> res<span class="token punctuation">,</span> html<span class="token punctuation">:</span> indexHTML <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ...</span></code></pre></div>
<p>라우팅 처리 시에도 이 전과 달리 함수 호출 시 반환받은 데이터를 처리하지 않고 <code class="language-text">res</code> 인자를 넘겨준 뒤 <code class="language-text">renderer</code> 함수에서 처리하도록 수정해주었다. 서버 측 설정도 완료되었으니 서버 실행 후 렌더링 결과를 확인해보면 서버 측에서 정상적으로 동작되는 것을 확인할 수 있다.</p>
<h2>다음 과제</h2>
<p>지금까지 SPA 개발환경에서 <code class="language-text">redux</code>를 활용하여 전역 상태 데이터를 처리하는 방법에 대한 내용들을 정리했다. 다음은 <code class="language-text">mobx</code>를 SPA 환경에서 활용하는 방법에 대한 내용을 정리하고자 한다.</p></div></div></div><div class="MuiGrid-item MuiGrid-grid-xs-12"><div class="MuiPaper-root MuiPaper-elevation1 MuiPaper-rounded blogPost025"><div id="disqus_thread"></div></div></div><div class="MuiGrid-container MuiGrid-align-items-xs-center MuiGrid-justify-xs-space-around postNav-container"><a class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-raised MuiButton-raisedPrimary" tabindex="0" role="button" href="/2019/01/refactoring-jquery-project-using-typescript-part2/"><span class="MuiButton-label"><span class="material-icons MuiIcon-root fas fa-arrow-left moveButton-leftIcon" aria-hidden="true"></span><span class="MuiTypography-root MuiTypography-button MuiTypography-colorInherit MuiTypography-noWrap moveButton-text">TypeScript를 활용한 JQuery 프로젝트 리팩토링 - 2부</span></span></a><a class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-raised MuiButton-raisedPrimary" tabindex="0" role="button" href="/2019/02/isomorphic-spa-using-react-part6/"><span class="MuiButton-label"><span class="MuiTypography-root MuiTypography-button MuiTypography-colorInherit MuiTypography-noWrap moveButton-text">React를 활용한 isomorphic SPA 개발하기 - 6부</span><span class="material-icons MuiIcon-root fas fa-arrow-right moveButton-rightIcon" aria-hidden="true"></span></span></a></div></div></div><div class="footer-root"><div class="MuiGrid-item MuiGrid-grid-xs-12"><h6 class="MuiTypography-root MuiTypography-subtitle2 MuiTypography-colorInherit MuiTypography-alignCenter">Copyright © 2018. pjb0811 All rights reserved.</h6><div class="footer-container"><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="https://github.com/pjb0811" class="icon"><span class="material-icons MuiIcon-root MuiIcon-fontSizeSmall fab fa-github" aria-hidden="true"></span></a></span></button><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="mailto:pjb0811@gmail.com" class="icon"><span class="material-icons MuiIcon-root MuiIcon-fontSizeSmall far fa-envelope" aria-hidden="true"></span></a></span></button><button class="MuiButtonBase-root MuiIconButton-root MuiIconButton-colorInherit" tabindex="0" type="button"><span class="MuiIconButton-label"><a href="/rss.xml" class="icon"><span class="material-icons MuiIcon-root MuiIcon-fontSizeSmall fas fa-rss" aria-hidden="true"></span></a></span></button></div><h6 class="MuiTypography-root MuiTypography-subtitle2 MuiTypography-colorInherit MuiTypography-alignCenter footer-copyright">Powered by<!-- --> <a href="https://www.gatsbyjs.org/"><img src="/static/gatsby-4a9773549091c227cd2eb82ccd9c5e3a.png" alt="gatsby" class="footer-gatsbyImg"/></a></h6></div></div></div></div><script>
  window.excludeGAPaths=[/^(?:\/)$/,/^(?:\/tags)$/,/^(?:\/tags\/(?:(?!(?:\/|^)\.).)*?)$/,/^(?:\/tags\/(?:(?!(?:\/|^)\.).)*?\/)$/,/^(?:\/analysis)$/];
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-79751268-3', 'auto', {});
      
      }
      </script><script id="gatsby-script-loader">/*<![CDATA[*/window.page={"componentChunkName":"component---src-components-pages-blog-post-jsx","jsonName":"2019-01-isomorphic-spa-using-react-part-5-a9d","path":"/2019/01/isomorphic-spa-using-react-part5/"};window.dataPath="894/path---2019-01-isomorphic-spa-using-react-part-5-a-9-d-d11-7TohPdtvoT2OcWu8WNzGO8uUo";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-40c16a4b182bc5eccdc8.js"],"component---src-components-pages-index-jsx":["/component---src-components-pages-index-jsx-09b3d3ebc92d44135699.js"],"component---src-components-pages-blog-post-jsx":["/component---src-components-pages-blog-post-jsx-6ece7e15387edb2847db.js"],"component---src-components-pages-tags-jsx":["/component---src-components-pages-tags-jsx-30821318c4885c0510e3.js"],"component---src-pages-404-jsx":["/component---src-pages-404-jsx-23d198f59cce2a2590bb.js"],"component---src-pages-analysis-jsx":["/component---src-pages-analysis-jsx-914ce169da1f334bdc12.js"],"component---src-pages-tags-jsx":["/component---src-pages-tags-jsx-9776e4bba8164516df52.js"]};/*]]>*/</script><script src="/webpack-runtime-3956f859ae1a8dc861f4.js" async=""></script><script src="/1-d1a755e5d630686ef986.js" async=""></script><script src="/12-6b8e8af5eed4a2ef6629.js" async=""></script><script src="/0-724affed024acf310ba2.js" async=""></script><script src="/app-40c16a4b182bc5eccdc8.js" async=""></script><script src="/component---src-components-pages-blog-post-jsx-6ece7e15387edb2847db.js" async=""></script></body></html>